<div data-controller="iiif_viewer" data-docid="<%= @prefix %>.<%= @documentId %>">

    <div id="pv-images-info" class="text-aligned">
        <span data-toggle="tooltip" data-placement="right" title="" data-original-title="Canadiana uses OCR (optical character recognition) to provide full-text search for printed documents.">
        </span>
        <img class="pv-help-icon" src="/info.svg" width="18" height="18" class="" alt=""/>
        <span>57 images, 55 with full-text search</span>
    </div>

    <%= render(DocumentDownloadsComponent.new(documentId: @documentId, prefix: 'oocihm', pageNum: params[:pageNum])) do %><% end %>



    <div id="pvToolbarTop" aria-label="Viewer controls">
        <form id="pvSearchForm" class="DocSearch-Form" method="GET">
            <label class="DocSearch-MagnifierLabel" for="docsearch-input" id="docsearch-label">
                <span class="visually-hidden">Search within this item</span>
                <svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20">
                    <path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
            </label>
            
            <span class="d-inline-flex">
                <input type="hidden" name="pageNum" value="1" /> 
                <input 
                id="pvSearch" 
                class="DocSearch-Input search-q q form-control rounded-0"
                aria-autocomplete="both" 
                aria-labelledby="docsearch-label" 
                autocomplete="off" 
                autocorrect="off" 
                autocapitalize="off" 
                enterkeyhint="search" 
                spellcheck="false" 
                placeholder="Search within images..."
                type="search"
                name="q"
                value="<%= params[:q] %>"/>
                <button type="submit" id="item-search-submit" class="btn btn-primary">Search</button>
                <button id="pvSearchReset" class="btn btn-secondary">Reset</button>
            </span>
        </form>

        <% if params[:q] && params[:q].length != 0 && params[:q] != "*:*" %>
            <div class="pvSearchResults">
                <%= render(LegacyOcrSearchComponent.new(documentId: @documentId, term: params[:q] || '', prefix: 'oocihm')) do %><% end %>
            </div>
        <% end %>
    </div>
    <div class="mv" id="page-viewer" style="overflow: hidden; width: 100%; min-height: 50rem !important; height: 60vh; position: relative;"></div>

    <div id="download-help" class="text-aligned">
        <img class="pv-help-icon" src="/help.svg" width="19" height="19" class="" alt=""/>
        <span>For help please see our <a href="https://www.crkn-rcdr.ca/en/navigating-collections" target="_blank">documentation</a> <!--Help--></span>
    </div>
</div>


<%= javascript_pack_tag('m3') %>