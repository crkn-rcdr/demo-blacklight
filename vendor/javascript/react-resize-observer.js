import e from"react";var t={};Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=_interopRequireDefault(e);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return _typeof(e)}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};var r=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))));r.forEach((function(t){_defineProperty(e,t,i[t])}))}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");_setPrototypeOf(e.prototype,t&&t.prototype);t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf(e,t)}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){t&&_defineProperties(e.prototype,t);i&&_defineProperties(e,i);return e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!==typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){_getPrototypeOf=Object.getPrototypeOf||function _getPrototypeOf(e){return e.__proto__};return _getPrototypeOf(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true}):e[t]=i;return e}var r={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"hidden",zIndex:-1,visibility:"hidden",pointerEvents:"none"};var n={position:"absolute",left:0,top:0,transition:"0s"};function isAncestor(e,t){var i=e.parentNode;while(i){if(i===t)return true;i=i.parentNode}return false}var o=function(e){function ResizeObserver(){var e;var t,i;_classCallCheck(this,ResizeObserver);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _possibleConstructorReturn(i,(t=i=_possibleConstructorReturn(this,(e=_getPrototypeOf(ResizeObserver)).call.apply(e,[this].concat(n))),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_expandRef",null),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_shrinkRef",null),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_node",null),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_lastWidth",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_lastHeight",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_lastRect",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_hasResize",false),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_handleScroll",(function(e){(i.props.onPosition||i.props.onReflow||i.props.onResize)&&(i._globalScollTarget(e.target)||i._refScrollTarget(e.target)||i._ancestorScollTarget(e.target))&&i._reflow()})),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_globalScollTarget",(function(e){return e instanceof Node&&(i.props.onPosition||i.props.onReflow)&&(e===document||e===document.documentElement||e===document.body)})),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_refScrollTarget",(function(e){if(e instanceof HTMLElement&&(e===i._expandRef||e===i._shrinkRef)){var t=e.offsetWidth;var r=e.offsetHeight;if(t!==i._lastWidth||r!==i._lastHeight){i._lastWidth=t;i._lastHeight=r;i._reset(i._expandRef);i._reset(i._shrinkRef);return true}}return false})),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_ancestorScollTarget",(function(e){return e instanceof Node&&(i.props.onPosition||i.props.onReflow)&&i._node&&isAncestor(i._node,e)})),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_reflow",(function(){if(i._node&&i._node.parentNode instanceof Element){var e=i._node.parentNode.getBoundingClientRect();var t=true;var r=true;if(i._lastRect){t=e.width!==i._lastRect.width||e.height!==i._lastRect.height;r=e.top!==i._lastRect.top||e.left!==i._lastRect.left}i._lastRect=e;t&&i.props.onResize&&i.props.onResize(e);r&&i.props.onPosition&&i.props.onPosition(e);(t||r)&&i.props.onReflow&&i.props.onReflow(e)}})),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_handleRef",(function(e){i._node=e})),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_handleExpandRef",(function(e){i._reset(e);i._expandRef=e})),_defineProperty(_assertThisInitialized(_assertThisInitialized(i)),"_handleShrinkRef",(function(e){i._reset(e);i._shrinkRef=e})),t))}_createClass(ResizeObserver,[{key:"componentDidMount",value:function componentDidMount(){this._reflow();window.addEventListener("scroll",this._handleScroll,true);if(this.props.onPosition||this.props.onReflow){window.addEventListener("resize",this._reflow,true);this._hasResize=true}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(!this.props.onPosition&&!this.props.onReflow||this._hasResize){if(!(this.props.onPosition||this.props.onReflow)&&this._hasResize){window.removeEventListener("resize",this._reflow,true);this._hasResize=false}}else{window.addEventListener("resize",this._reflow,true);this._hasResize=true}}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("scroll",this._handleScroll,true);this._hasResize&&window.removeEventListener("resize",this._reflow,true)}},{key:"_reset",value:function _reset(e){if(e){e.scrollLeft=1e5;e.scrollTop=1e5}}},{key:"render",value:function render(){return this.props.onResize||this.props.onReflow?i.default.createElement("div",{style:r,ref:this._handleRef},i.default.createElement("div",{ref:this._handleExpandRef,style:r},i.default.createElement("div",{style:_objectSpread({},n,{width:1e5,height:1e5})})),i.default.createElement("div",{ref:this._handleShrinkRef,style:r},i.default.createElement("div",{style:_objectSpread({},n,{width:"200%",height:"200%"})}))):i.default.createElement("noscript",{ref:this._handleRef})}}]);_inherits(ResizeObserver,e);return ResizeObserver}(i.default.Component);_defineProperty(o,"displayName","ResizeObserver");var s=o;t.default=s;const a=t.__esModule;export default t;export{a as __esModule};

