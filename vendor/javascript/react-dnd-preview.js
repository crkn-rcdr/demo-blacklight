import e,{useRef as t,createContext as r}from"react";import{useDragLayer as n}from"react-dnd";var i=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),a=e=>{let t=e.getInitialClientOffset(),r=e.getInitialSourceClientOffset();return null===t||null===r?{x:0,y:0}:i(t,r)},u=(e,t)=>{let r=e.getClientOffset();if(null===r)return null;if(!t.current||!t.current.getBoundingClientRect)return i(r,a(e));let n=t.current.getBoundingClientRect(),o={x:n.width/2,y:n.height/2};return i(r,o)};var p=e=>{let t=`translate(${e.x.toFixed(1)}px, ${e.y.toFixed(1)}px)`;return{pointerEvents:"none",position:"fixed",top:0,left:0,transform:t,WebkitTransform:t}},l=()=>{let e=t(null),r=n((t=>({currentOffset:u(t,e),isDragging:t.isDragging(),itemType:t.getItemType(),item:t.getItem(),monitor:t})));return r.isDragging&&null!==r.currentOffset?{display:!0,itemType:r.itemType,item:r.item,style:p(r.currentOffset),monitor:r.monitor,ref:e}:{display:!1}};var o=r(void 0);var x=t=>{let r=l();if(!r.display)return null;let n,{display:f,...s}=r;return n="children"in t?"function"==typeof t.children?t.children(s):t.children:t.generator(s),e.createElement(o.Provider,{value:s},n)};export{o as Context,x as Preview,l as usePreview};

