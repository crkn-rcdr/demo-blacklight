import{Component as e,createElement as t}from"react";let i;i=typeof window!=="undefined"?window:typeof self!=="undefined"?self:global;let s=null;let n=null;const r=20;const o=i.clearTimeout;const a=i.setTimeout;const l=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame;const d=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame;if(l==null||d==null){s=o;n=function requestAnimationFrameViaSetTimeout(e){return a(e,r)}}else{s=function cancelFrame([e,t]){l(e);o(t)};n=function requestAnimationFrameWithSetTimeoutFallback(e){const t=d((function animationFrameCallback(){o(i);e()}));const i=a((function timeoutCallback(){l(t);e()}),r);return[t,i]}}function createDetectElementResize(e){let t;let r;let o;let a;let l;let d;let _;const h=typeof document!=="undefined"&&document.attachEvent;if(!h){d=function(e){const t=e.__resizeTriggers__,i=t.firstElementChild,s=t.lastElementChild,n=i.firstElementChild;s.scrollLeft=s.scrollWidth;s.scrollTop=s.scrollHeight;n.style.width=i.offsetWidth+1+"px";n.style.height=i.offsetHeight+1+"px";i.scrollLeft=i.scrollWidth;i.scrollTop=i.scrollHeight};l=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height};_=function(e){if(e.target.className&&typeof e.target.className.indexOf==="function"&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;d(this);this.__resizeRAF__&&s(this.__resizeRAF__);this.__resizeRAF__=n((function animationFrame(){if(l(t)){t.__resizeLast__.width=t.offsetWidth;t.__resizeLast__.height=t.offsetHeight;t.__resizeListeners__.forEach((function forEachResizeListener(i){i.call(t,e)}))}}))};let e=false;let i="";o="animationstart";const h="Webkit Moz O ms".split(" ");let c="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");let u="";{const t=document.createElement("fakeelement");t.style.animationName!==void 0&&(e=true);if(e===false)for(let s=0;s<h.length;s++)if(t.style[h[s]+"AnimationName"]!==void 0){u=h[s];i="-"+u.toLowerCase()+"-";o=c[s];e=true;break}}r="resizeanim";t="@"+i+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ";a=i+"animation: 1ms "+r+"; "}const createStyles=function(i){if(!i.getElementById("detectElementResize")){const s=(t||"")+".resize-triggers { "+(a||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=i.head||i.getElementsByTagName("head")[0],r=i.createElement("style");r.id="detectElementResize";r.type="text/css";e!=null&&r.setAttribute("nonce",e);r.styleSheet?r.styleSheet.cssText=s:r.appendChild(i.createTextNode(s));n.appendChild(r)}};const addResizeListener=function(e,t){if(h)e.attachEvent("onresize",t);else{if(!e.__resizeTriggers__){const t=e.ownerDocument;const s=i.getComputedStyle(e);s&&s.position==="static"&&(e.style.position="relative");createStyles(t);e.__resizeLast__={};e.__resizeListeners__=[];(e.__resizeTriggers__=t.createElement("div")).className="resize-triggers";const n=t.createElement("div");n.className="expand-trigger";n.appendChild(t.createElement("div"));const a=t.createElement("div");a.className="contract-trigger";e.__resizeTriggers__.appendChild(n);e.__resizeTriggers__.appendChild(a);e.appendChild(e.__resizeTriggers__);d(e);e.addEventListener("scroll",_,true);if(o){e.__resizeTriggers__.__animationListener__=function animationListener(t){t.animationName===r&&d(e)};e.__resizeTriggers__.addEventListener(o,e.__resizeTriggers__.__animationListener__)}}e.__resizeListeners__.push(t)}};const removeResizeListener=function(e,t){if(h)e.detachEvent("onresize",t);else{e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1);if(!e.__resizeListeners__.length){e.removeEventListener("scroll",_,true);if(e.__resizeTriggers__.__animationListener__){e.__resizeTriggers__.removeEventListener(o,e.__resizeTriggers__.__animationListener__);e.__resizeTriggers__.__animationListener__=null}try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}};return{addResizeListener:addResizeListener,removeResizeListener:removeResizeListener}}class AutoSizer extends e{constructor(...e){super(...e);this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0};this._autoSizer=null;this._detectElementResize=null;this._parentNode=null;this._resizeObserver=null;this._timeoutId=null;this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:i}=this.props;if(this._parentNode){var s,n,r,o;const a=window.getComputedStyle(this._parentNode)||{};const l=parseFloat((s=a.paddingLeft)!==null&&s!==void 0?s:"0");const d=parseFloat((n=a.paddingRight)!==null&&n!==void 0?n:"0");const _=parseFloat((r=a.paddingTop)!==null&&r!==void 0?r:"0");const h=parseFloat((o=a.paddingBottom)!==null&&o!==void 0?o:"0");const c=this._parentNode.getBoundingClientRect();const u=c.height-_-h;const f=c.width-l-d;const g=this._parentNode.offsetHeight-_-h;const m=this._parentNode.offsetWidth-l-d;if(!e&&(this.state.height!==g||this.state.scaledHeight!==u)||!t&&(this.state.width!==m||this.state.scaledWidth!==f)){this.setState({height:g,width:m,scaledHeight:u,scaledWidth:f});typeof i==="function"&&i({height:g,scaledHeight:u,scaledWidth:f,width:m})}}};this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props;if(this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement){this._parentNode=this._autoSizer.parentNode;if(this._parentNode!=null){if(typeof ResizeObserver!=="undefined"){this._resizeObserver=new ResizeObserver((()=>{this._timeoutId=setTimeout(this._onResize,0)}));this._resizeObserver.observe(this._parentNode)}else{this._detectElementResize=createDetectElementResize(e);this._detectElementResize.addResizeListener(this._parentNode,this._onResize)}this._onResize()}}}componentWillUnmount(){if(this._parentNode){this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize);this._timeoutId!==null&&clearTimeout(this._timeoutId);if(this._resizeObserver){this._resizeObserver.observe(this._parentNode);this._resizeObserver.disconnect()}}}render(){const{children:e,defaultHeight:i,defaultWidth:s,disableHeight:n=false,disableWidth:r=false,nonce:o,onResize:a,style:l={},tagName:d="div",..._}=this.props;const{height:h,scaledHeight:c,scaledWidth:u,width:f}=this.state;const g={overflow:"visible"};const m={};let p=false;if(!n){h===0&&(p=true);g.height=0;m.height=h;m.scaledHeight=c}if(!r){f===0&&(p=true);g.width=0;m.width=f;m.scaledWidth=u}return t(d,{ref:this._setRef,style:{...g,...l},..._},!p&&e(m))}}function isHeightAndWidthProps(e){return e&&e.disableHeight!==true&&e.disableWidth!==true}function isHeightOnlyProps(e){return e&&e.disableHeight!==true&&e.disableWidth===true}function isWidthOnlyProps(e){return e&&e.disableHeight===true&&e.disableWidth!==true}export{AutoSizer as default,isHeightAndWidthProps,isHeightOnlyProps,isWidthOnlyProps};

