import e from"@babel/runtime/helpers/esm/extends";import{RuleList as t}from"jss";var r="@global";var l="@global ";var n=function(){function GlobalContainerRule(l,n,s){this.type="global";this.at=r;this.isProcessed=false;this.key=l;this.options=s;this.rules=new t(e({},s,{parent:this}));for(var o in n)this.rules.add(o,n[o]);this.rules.process()}var l=GlobalContainerRule.prototype;l.getRule=function getRule(e){return this.rules.get(e)};l.addRule=function addRule(e,t,r){var l=this.rules.add(e,t,r);l&&this.options.jss.plugins.onProcessRule(l);return l};l.replaceRule=function replaceRule(e,t,r){var l=this.rules.replace(e,t,r);l&&this.options.jss.plugins.onProcessRule(l);return l};l.indexOf=function indexOf(e){return this.rules.indexOf(e)};l.toString=function toString(e){return this.rules.toString(e)};return GlobalContainerRule}();var s=function(){function GlobalPrefixedRule(t,n,s){this.type="global";this.at=r;this.isProcessed=false;this.key=t;this.options=s;var o=t.substr(l.length);this.rule=s.jss.createRule(o,n,e({},s,{parent:this}))}var t=GlobalPrefixedRule.prototype;t.toString=function toString(e){return this.rule?this.rule.toString(e):""};return GlobalPrefixedRule}();var o=/\s*,\s*/g;function addScope(e,t){var r=e.split(o);var l="";for(var n=0;n<r.length;n++){l+=t+" "+r[n].trim();r[n+1]&&(l+=", ")}return l}function handleNestedGlobalContainerRule(t,l){var n=t.options,s=t.style;var o=s?s[r]:null;if(o){for(var i in o)l.addRule(i,o[i],e({},n,{selector:addScope(i,t.selector)}));delete s[r]}}function handlePrefixedGlobalRule(t,l){var n=t.options,s=t.style;for(var o in s)if("@"===o[0]&&o.substr(0,r.length)===r){var i=addScope(o.substr(r.length),t.selector);l.addRule(i,s[o],e({},n,{selector:i}));delete s[o]}}function jssGlobal(){function onCreateRule(e,t,o){if(!e)return null;if(e===r)return new n(e,t,o);if("@"===e[0]&&e.substr(0,l.length)===l)return new s(e,t,o);var i=o.parent;i&&("global"===i.type||i.options.parent&&"global"===i.options.parent.type)&&(o.scoped=false);o.selector||false!==o.scoped||(o.selector=e);return null}function onProcessRule(e,t){if("style"===e.type&&t){handleNestedGlobalContainerRule(e,t);handlePrefixedGlobalRule(e,t)}}return{onCreateRule:onCreateRule,onProcessRule:onProcessRule}}export{jssGlobal as default};

