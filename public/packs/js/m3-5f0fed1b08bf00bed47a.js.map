{"version":3,"file":"js/m3-5f0fed1b08bf00bed47a.js","mappings":"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","sources":["webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/ImageTool.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/ImageRotation.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/ImageFlip.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/MiradorImageTools.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/MiradorImageToolsMenuItem.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/translations.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/miradorImageToolsPlugin.js","webpack://demo-blacklight/./app/javascript/src/plugins/fullResDownloadPlugin.js","webpack://demo-blacklight/./app/javascript/src/plugins/pdfDownloadPlugin.js","webpack://demo-blacklight/./app/javascript/src/plugins/fullPdfDownloadPlugin.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-downloads/miradorDownloadPlugin.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-downloads/RenderingDownloadLink.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-downloads/CanvasDownloadLinks.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-downloads/ManifestDownloadLinks.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-downloads/MiradorDownloadDialog.js","webpack://demo-blacklight/./app/javascript/src/plugins/downloadMenuButton.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/downloadMenuPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/miradorPDIIIFMenuItem.js","webpack://demo-blacklight/./app/javascript/src/plugins/miradorPDIIIFDialog.js","webpack://demo-blacklight/./app/javascript/src/plugins/pageNumPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/miradorViewPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/navControls.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/legacySearchPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/modules/m3_viewer.js","webpack://demo-blacklight/./app/javascript/packs/m3.js"],"sourcesContent":["import React, { Component } from 'react';\nimport compose from 'lodash/flowRight';\nimport PropTypes from 'prop-types';\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\nimport Slider from '@material-ui/core/Slider';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport withWidth from '@material-ui/core/withWidth';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\n\n/** Styles for withStyles HOC */\nconst styles = ({ palette, breakpoints }) => ({\n  slider: {\n    backgroundColor: fade(palette.shades.main, 0.8),\n    borderRadius: 25,\n    top: 48,\n    marginTop: 2,\n    position: 'absolute',\n    height: 150,\n    zIndex: 100,\n    marginLeft: 2,\n    padding: [[2, 7, 2, 7]],\n    [breakpoints.down('sm')]: {\n      top: 'auto',\n      right: 48,\n      width: 150,\n      height: 'auto',\n      marginTop: -46,\n      marginBottom: 2,\n      padding: [[4, 2, 4, 2]],\n    },\n  },\n});\n\nclass ImageTool extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: props.open,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    const { value, variant } = this.props;\n    switch (variant) {\n      case 'toggle':\n        this.handleChange({}, value === 0 ? 100 : 0);\n        break;\n      default:\n        this.setState((state) => ({\n          open: !state.open,\n        }));\n    }\n  }\n\n  handleChange(e, val) {\n    const { onChange } = this.props;\n    onChange(val);\n  }\n\n  render() {\n    const {\n      children, containerId, label, max, min, value, type, variant, windowId,\n      foregroundColor, classes, width,\n    } = this.props;\n    const { open } = this.state;\n\n    const toggled = variant === 'toggle' && value > 0;\n\n    const id = `${windowId}-${type}`;\n\n    let bubbleBg;\n    if (open || toggled) {\n      bubbleBg = fade(foregroundColor, open ? 0.1 : 0.25);\n    }\n\n    return (\n      <div style={{ display: 'inline-block' }}>\n        <MiradorMenuButton\n          id={`${id}-label`}\n          aria-label={label}\n          containerId={containerId}\n          onClick={this.handleClick}\n          aria-expanded={open}\n          aria-controls={id}\n          style={{ backgroundColor: bubbleBg }}\n        >\n          {children}\n        </MiradorMenuButton>\n\n        {open && (\n        <div\n          id={id}\n          aria-labelledby={`${id}-label`}\n          className={`MuiPaper-elevation4 ${classes.slider}`}\n        >\n          <Slider\n            orientation={['xs', 'sm'].indexOf(width) >= 0 ? 'horizontal' : 'vertical'}\n            min={min}\n            max={max}\n            value={value}\n            onChange={this.handleChange}\n          />\n        </div>\n        )}\n      </div>\n    );\n  }\n}\n\nImageTool.propTypes = {\n  children: PropTypes.node.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  classes: PropTypes.object.isRequired,\n  containerId: PropTypes.string.isRequired,\n  foregroundColor: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  onChange: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  type: PropTypes.string.isRequired,\n  value: PropTypes.number.isRequired,\n  variant: PropTypes.string,\n  windowId: PropTypes.string.isRequired,\n  width: PropTypes.oneOf(['lg', 'md', 'sm', 'xl', 'xs']).isRequired,\n};\n\nImageTool.defaultProps = {\n  foregroundColor: 'rgb(0, 0, 0)',\n  min: 0,\n  max: 100,\n  open: false,\n  variant: 'slider',\n};\n\nexport default compose(withStyles(styles), withWidth())(ImageTool);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\nimport RotateRightIcon from '@material-ui/icons/RotateRight';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\n\nexport default class ImageRotation extends Component {\n  render() {\n    const { label, variant, ...otherProps } = this.props;\n    return (\n      <MiradorMenuButton\n        aria-label={label}\n        {...otherProps}\n      >\n        { variant === 'left' ? <RotateLeftIcon /> : <RotateRightIcon /> }\n      </MiradorMenuButton>\n    );\n  }\n}\n\nImageRotation.propTypes = {\n  containerId: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  variant: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\nimport SwapHorizIcon from '@material-ui/icons/SwapHoriz';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\n\nexport default class ImageFlip extends Component {\n  render() {\n    const {\n      flipped, label, backgroundColor, foregroundColor, ...otherProps\n    } = this.props;\n\n    return (\n      <MiradorMenuButton\n        aria-label={label}\n        style={{ backgroundColor: flipped && fade(foregroundColor, 0.25) }}\n        {...otherProps}\n      >\n        <SwapHorizIcon style={{ color: flipped && backgroundColor }} />\n      </MiradorMenuButton>\n    );\n  }\n}\n\nImageFlip.propTypes = {\n  backgroundColor: PropTypes.string,\n  containerId: PropTypes.string.isRequired,\n  foregroundColor: PropTypes.string,\n  flipped: PropTypes.bool.isRequired,\n  label: PropTypes.string.isRequired,\n};\n\nImageFlip.defaultProps = {\n  backgroundColor: 'rgb(255, 255, 255)',\n  foregroundColor: 'rgb(0, 0, 0)',\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'lodash/flowRight';\nimport BrightnessIcon from '@material-ui/icons/Brightness5';\nimport TonalityIcon from '@material-ui/icons/Tonality';\nimport GradientIcon from '@material-ui/icons/Gradient';\nimport ContrastIcon from '@material-ui/icons/ExposureSharp';\nimport InvertColorsIcon from '@material-ui/icons/InvertColors';\nimport TuneSharpIcon from '@material-ui/icons/TuneSharp';\nimport CloseSharpIcon from '@material-ui/icons/CloseSharp';\nimport ReplaySharpIcon from '@material-ui/icons/ReplaySharp';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport withWidth from '@material-ui/core/withWidth';\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\nimport ImageTool from './ImageTool';\nimport ImageRotation from './ImageRotation';\nimport ImageFlip from './ImageFlip';\n\n/** Styles for withStyles HOC */\nconst styles = ({ breakpoints, palette }) => {\n  const backgroundColor = palette.shades.main;\n  const foregroundColor = palette.getContrastText(backgroundColor);\n  const border = `1px solid ${fade(foregroundColor, 0.2)}`;\n  const borderImageRight = 'linear-gradient('\n    + 'to bottom, '\n    + `${fade(foregroundColor, 0)} 20%, `\n    + `${fade(foregroundColor, 0.2)} 20% 80%, `\n    + `${fade(foregroundColor, 0)} 80% )`;\n  const borderImageBottom = borderImageRight.replace('to bottom', 'to right');\n  return {\n    root: {\n      backgroundColor: fade(backgroundColor, 0.8),\n      borderRadius: 25,\n      position: 'absolute',\n      top: 8,\n      right: 8,\n      zIndex: 999,\n      display: 'flex',\n      flexDirection: 'row',\n      [breakpoints.down('sm')]: {\n        flexDirection: 'column',\n      },\n    },\n    borderContainer: {\n      border: 0,\n      borderRight: border,\n      borderImageSlice: 1,\n      borderImageSource: borderImageRight,\n      display: 'flex',\n      flexDirection: 'row',\n      [breakpoints.down('sm')]: {\n        flexDirection: 'column',\n        borderBottom: border,\n        borderRight: 'none',\n        borderImageSource: borderImageBottom,\n      },\n    },\n    toggleButtonLabel : {\n      fontSize: '0.8rem'\n    }\n  };\n};\n\nclass MiradorImageTools extends Component {\n  constructor(props) {\n    super(props);\n    this.toggleState = this.toggleState.bind(this);\n    this.toggleRotate = this.toggleRotate.bind(this);\n    this.toggleFlip = this.toggleFlip.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n  }\n\n  componentDidMount() {\n    const { viewer } = this.props;\n    if (viewer) this.applyFilters();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { viewConfig, viewer } = this.props;\n    if (viewer && viewConfig !== prevProps.viewConfig) this.applyFilters();\n  }\n\n  handleChange(param) {\n    const { updateViewport, windowId } = this.props;\n    return (value) => updateViewport(windowId, { [param]: value });\n  }\n\n  handleReset() {\n    const { updateViewport, windowId } = this.props;\n    const viewConfig = {\n      rotation: 0,\n      flip: false,\n      brightness: 100,\n      contrast: 100,\n      saturate: 100,\n      grayscale: 0,\n      invert: 0,\n    };\n\n    updateViewport(windowId, viewConfig);\n  }\n\n  applyFilters() {\n    const {\n      viewConfig: {\n        brightness = 100,\n        contrast = 100,\n        saturate = 100,\n        grayscale = 0,\n        invert = 0,\n      },\n      viewer: { canvas },\n    } = this.props;\n\n    if (!canvas) return;\n\n    const controlledFilters = ['brightness', 'contrast', 'saturate', 'grayscale', 'invert'];\n\n    const currentFilters = canvas.style.filter.split(' ');\n    const newFilters = currentFilters.filter(\n      (filter) => !controlledFilters.some((type) => filter.includes(type)),\n    );\n    newFilters.push(`brightness(${brightness}%)`);\n    newFilters.push(`contrast(${contrast}%)`);\n    newFilters.push(`saturate(${saturate}%)`);\n    newFilters.push(`grayscale(${grayscale}%)`);\n    newFilters.push(`invert(${invert}%)`);\n    canvas.style.filter = newFilters.join(' ');\n  }\n\n  toggleState() {\n    const { open, updateWindow, windowId } = this.props;\n\n    updateWindow(windowId, { imageToolsOpen: !open });\n  }\n\n  toggleRotate(value) {\n    const { updateViewport, viewConfig: { flip = false, rotation = 0 }, windowId } = this.props;\n\n    const offset = flip ? -1 * value : value;\n\n    updateViewport(windowId, { rotation: (rotation + offset) % 360 });\n  }\n\n  toggleFlip() {\n    const { updateViewport, viewConfig: { flip = false }, windowId } = this.props;\n\n    updateViewport(windowId, { flip: !flip });\n  }\n\n  render() {\n    const {\n      classes, containerId, enabled, open, viewer, windowId, width,\n      theme: { palette },\n      viewConfig: {\n        flip = false,\n        brightness = 100,\n        contrast = 100,\n        saturate = 100,\n        grayscale = 0,\n        invert = 0,\n      },\n      t,\n    } = this.props;\n\n    if (!viewer || !enabled) return null;\n\n    const backgroundColor = palette.shades.main;\n    const foregroundColor = palette.getContrastText(backgroundColor);\n    const isSmallDisplay = ['xs', 'sm'].indexOf(width) >= 0;\n\n    /** Button for toggling the menu */\n    const toggleButton = (\n      <div className={(isSmallDisplay && open) ? classes.borderContainer : ''}>\n        <MiradorMenuButton\n          aria-expanded={open}\n          aria-haspopup\n          aria-label={t('collapse', { context: open ? 'open' : 'close' })}\n          containerId={containerId}\n          onClick={this.toggleState}\n        >\n          { open ? <CloseSharpIcon /> : <TuneSharpIcon /> }\n          { open ? \"\" : <label className={classes.toggleButtonLabel}>Image Tools</label> }\n          \n        </MiradorMenuButton>\n      </div>\n    );\n    return (\n      <div className={`MuiPaper-elevation4 ${classes.root}`}>\n        {isSmallDisplay && toggleButton}\n        {open\n        && (\n        <React.Fragment>\n          <div className={classes.borderContainer}>\n            <ImageRotation\n              containerId={containerId}\n              label={t('rotateRight')}\n              onClick={() => this.toggleRotate(90)}\n              variant=\"right\"\n            />\n            <ImageRotation\n              containerId={containerId}\n              label={t('rotateLeft')}\n              onClick={() => this.toggleRotate(-90)}\n              variant=\"left\"\n            />\n            <ImageFlip\n              label={t('flip')}\n              onClick={this.toggleFlip}\n              flipped={flip}\n              containerId={containerId}\n            />\n          </div>\n          <div className={classes.borderContainer}>\n            <ImageTool\n              type=\"brightness\"\n              label={t('brightness')}\n              max={200}\n              windowId={windowId}\n              value={brightness}\n              foregroundColor={foregroundColor}\n              containerId={containerId}\n              onChange={this.handleChange('brightness')}\n            >\n              <BrightnessIcon />\n            </ImageTool>\n            <ImageTool\n              type=\"contrast\"\n              label={t('contrast')}\n              max={200}\n              windowId={windowId}\n              value={contrast}\n              foregroundColor={foregroundColor}\n              containerId={containerId}\n              onChange={this.handleChange('contrast')}\n            >\n              <ContrastIcon style={{ transform: 'rotate(180deg)' }} />\n            </ImageTool>\n            <ImageTool\n              type=\"saturate\"\n              label={t('saturation')}\n              max={200}\n              windowId={windowId}\n              value={saturate}\n              foregroundColor={foregroundColor}\n              containerId={containerId}\n              onChange={this.handleChange('saturate')}\n            >\n              <GradientIcon />\n            </ImageTool>\n            <ImageTool\n              type=\"grayscale\"\n              variant=\"toggle\"\n              label={t('greyscale')}\n              windowId={windowId}\n              value={grayscale}\n              backgroundColor={backgroundColor}\n              foregroundColor={foregroundColor}\n              containerId={containerId}\n              onChange={this.handleChange('grayscale')}\n            >\n              <TonalityIcon />\n            </ImageTool>\n            <ImageTool\n              type=\"invert\"\n              variant=\"toggle\"\n              label={t('invert')}\n              windowId={windowId}\n              value={invert}\n              foregroundColor={foregroundColor}\n              containerId={containerId}\n              onChange={this.handleChange('invert')}\n            >\n              <InvertColorsIcon />\n            </ImageTool>\n          </div>\n          <div className={isSmallDisplay ? '' : classes.borderContainer}>\n            <MiradorMenuButton\n              aria-label={t('revert')}\n              containerId={containerId}\n              onClick={this.handleReset}\n            >\n              <ReplaySharpIcon />\n            </MiradorMenuButton>\n          </div>\n        </React.Fragment>\n        )}\n        {!isSmallDisplay && toggleButton}\n      </div>\n    );\n  }\n}\n\nMiradorImageTools.propTypes = {\n  classes: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  containerId: PropTypes.string.isRequired,\n  enabled: PropTypes.bool,\n  open: PropTypes.bool,\n  t: PropTypes.func.isRequired,\n  theme: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  updateViewport: PropTypes.func.isRequired,\n  updateWindow: PropTypes.func.isRequired,\n  viewer: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  viewConfig: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  windowId: PropTypes.string.isRequired,\n  width: PropTypes.oneOf(['lg', 'md', 'sm', 'xl', 'xs']).isRequired,\n};\n\nMiradorImageTools.defaultProps = {\n  enabled: true,\n  open: true,\n  viewer: undefined,\n  viewConfig: {},\n};\n\n// Export without wrapping HOC for testing.\nexport const TestableImageTools = MiradorImageTools;\n\nexport default compose(withStyles(styles), withWidth())(MiradorImageTools);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TuneSharpIcon from '@material-ui/icons/TuneSharp';\n\nconst MiradorImageToolsMenuItem = ({\n  enabled, handleClose, t, updateWindow, windowId,\n}) => {\n  const handleClickOpen = () => {\n    handleClose();\n    updateWindow(windowId, { imageToolsEnabled: !enabled });\n  };\n\n  return (\n    <MenuItem onClick={handleClickOpen}>\n      <ListItemIcon>\n        <TuneSharpIcon />\n      </ListItemIcon>\n      <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\n        { enabled ? t('hide') : t('show') }\n      </ListItemText>\n    </MenuItem>\n  );\n};\n\nMiradorImageToolsMenuItem.propTypes = {\n  enabled: PropTypes.bool,\n  handleClose: PropTypes.func.isRequired,\n  t: PropTypes.func.isRequired,\n  updateWindow: PropTypes.func.isRequired,\n  windowId: PropTypes.string.isRequired,\n};\n\nMiradorImageToolsMenuItem.defaultProps = {\n  enabled: true,\n};\n\nexport default MiradorImageToolsMenuItem;\n","const translations = {\n  de: {\n    brightness: 'Helligkeit',\n    collapse_open: 'Bildbearbeitung ausblenden',\n    collapse_close: 'Bildbearbeitung einblenden',\n    contrast: 'Kontrast',\n    flip: 'Spiegeln',\n    greyscale: 'Darstellung in Graustufen',\n    hide: 'Bildbearbeitung verbergen',\n    invert: 'Umkehrung der Farben',\n    revert: 'Einstellungen zurücksetzen',\n    rotateLeft: 'Rotation links',\n    rotateRight: 'Rotation rechts',\n    saturation: 'Sättigung',\n    show: 'Bildbearbeitung anzeigen',\n  },\n  en: {\n    brightness: 'Brightness',\n    collapse_open: 'Collapse image tools',\n    collapse_close: 'Expand image tools',\n    contrast: 'Contrast',\n    flip: 'Flip',\n    greyscale: 'Greyscale',\n    hide: 'Hide image tools',\n    invert: 'Invert colors',\n    revert: 'Revert image',\n    rotateLeft: 'Rotate left',\n    rotateRight: 'Rotate right',\n    saturation: 'Saturation',\n    show: 'Show image tools',\n  },\n  it: {\n    brightness: 'Luminosità',\n    collapse_open: 'Chiudere gli strumenti dell\\'immagine',\n    collapse_close: 'Espandi gli strumenti dell\\'immagine',\n    contrast: 'Contrasto',\n    flip: 'Inverti',\n    greyscale: 'Scala di grigio',\n    hide: 'Nascondi gli strumenti dell\\'immagine',\n    invert: 'Inverti colori',\n    revert: 'Ripristinare l\\'immagine',\n    rotateLeft: 'Ruota a sinistra',\n    rotateRight: 'Ruota a destra',\n    saturation: 'Saturazione',\n    show: 'Mostra gli strumenti dell\\'immagine',\n  },\n  fr: {\n    brightness: 'Luminosité',\n    collapse_open: 'Fermer les outils d\\'image',\n    collapse_close: 'Ouvrir les outils d\\'image',\n    contrast: 'Contraste',\n    flip: 'Miroir',\n    greyscale: 'Niveaux de gris',\n    hide: 'Masquer les outils d\\'image',\n    invert: 'Inverser les couleurs',\n    revert: 'Réinitialiser les réglages',\n    rotateLeft: 'Rotation vers la gauche',\n    rotateRight: 'Rotation vers la droite',\n    saturation: 'Saturation',\n    show: 'Afficher les outils d\\'image',\n  },\n  ja: {\n    brightness: '明るさ',\n    collapse_open: '画像ツールを畳む',\n    collapse_close: '画像ツールを開く',\n    contrast: 'コントラスト',\n    flip: 'フリップ',\n    greyscale: 'グレースケール',\n    hide: '画像ツールを隠す',\n    invert: '色を反転',\n    revert: '元に戻す',\n    rotateLeft: '左回転',\n    rotateRight: '右回転',\n    saturation: '彩度',\n    show: '画像ツールを表示',\n  },\n  sr: {\n    brightness: 'Осветљење',\n    collapse_open: 'Затворите алат',\n    collapse_close: 'Отворите алат',\n    contrast: 'Контраст',\n    flip: 'Окрени',\n    greyscale: 'Црнобело',\n    hide: 'Сакријте алат',\n    invert: 'Инверзија боја',\n    revert: 'Поништи подешавања',\n    rotateLeft: 'Ротирај лево',\n    rotateRight: 'Ротирај десно',\n    saturation: 'Сатурација',\n    show: 'Прикажите алат',\n  },\n  'zh-CN': {\n    brightness: '亮度',\n    collapse_open: '折叠图像工具',\n    collapse_close: '展开图像工具',\n    contrast: '对比度',\n    flip: '翻转',\n    greyscale: '灰度',\n    hide: '隐藏图像工具',\n    invert: '反转颜色',\n    revert: '还原图像',\n    rotateLeft: '向左旋转',\n    rotateRight: '向右旋转',\n    saturation: '饱和度',\n    show: '显示图像工具',\n  },\n  'zh-TW': {\n    brightness: '亮度',\n    collapse_open: '折疊圖像工具',\n    collapse_close: '展開圖像工具',\n    contrast: '對比度',\n    flip: '翻轉',\n    greyscale: '灰度',\n    hide: '隱藏圖像工具',\n    invert: '反轉顏色',\n    revert: '還原圖像',\n    rotateLeft: '向左旋轉',\n    rotateRight: '向右旋轉',\n    saturation: '飽和度',\n    show: '顯示圖像工具',\n  },\n};\n\nexport default translations;\n","import withTheme from '@material-ui/core/styles/withTheme';\nimport * as actions from 'mirador/dist/es/src/state/actions';\nimport { getWindowConfig, getViewer, getContainerId } from 'mirador/dist/es/src/state/selectors';\nimport MiradorImageTools from './MiradorImageTools';\nimport MiradorImageToolsMenuItem from './MiradorImageToolsMenuItem';\nimport translations from './translations';\n\nexport default [\n  {\n    target: 'OpenSeadragonViewer',\n    mapDispatchToProps: {\n      updateWindow: actions.updateWindow,\n      updateViewport: actions.updateViewport,\n    },\n    mapStateToProps: (state, { windowId }) => ({\n      containerId: getContainerId(state),\n      enabled: getWindowConfig(state, { windowId }).imageToolsEnabled || true,\n      open: getWindowConfig(state, { windowId }).imageToolsOpen || false,\n      viewConfig: getViewer(state, { windowId }) || {},\n    }),\n    mode: 'add',\n    component: withTheme(MiradorImageTools),\n    config: {\n      translations,\n    },\n  },\n  {\n    target: 'WindowTopBarPluginMenu',\n    component: MiradorImageToolsMenuItem,\n    mode: 'add',\n    mapDispatchToProps: {\n      updateWindow: actions.updateWindow,\n    },\n    mapStateToProps: (state, { windowId }) => ({\n      enabled: getWindowConfig(state, { windowId }).imageToolsEnabled || false,\n    }),\n  },\n];\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\nimport {\n  getCanvasIndex, \n  getCurrentCanvas,\n} from 'mirador/dist/es/src/state/selectors'\n\n\n\nfunction downloadFile(url, filename) {\n  fetch(url, {\n      method: 'GET',\n      //headers: new Headers({\n      //    \"Authorization\": \"Bearer \" + token\n      //})\n  })\n  .then(response => response.blob())\n  .then(blob => {\n      var url = window.URL.createObjectURL(blob);\n      var a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a); // we need to append the element to the dom -> otherwise it will not work in firefox\n      a.click();    \n      a.remove();  //afterwards we remove the element again         \n  });\n}\n\nclass FullResDownload extends Component {\n  downloadAndCloseMenu() {\n    const { handleClose, canvasIndex, manifestId, canvas } = this.props;\n    console.log(\"c\", canvas)\n    console.log(\"m\", manifestId)\n    let page = canvasIndex + 1\n    console.log(\"url\", canvas.__jsonld.items[0].items[0].body.id)\n    downloadFile(canvas.__jsonld.items[0].items[0].body.id, \"oocihm.84056.\"+page+\".jpg\") \n    console.log(\"/access-files/69429/oocihm.84056.\"+page+\".jpg\")\n    handleClose()\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MenuItem onClick={() => this.downloadAndCloseMenu()}>\n          <ListItemIcon>\n            <DownloadIcon />\n          </ListItemIcon>\n          <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\n            Current image in full resolution\n          </ListItemText>\n        </MenuItem>\n      </React.Fragment>\n    );\n  }\n}\n\nFullResDownload.propTypes = {\n  handleClose: PropTypes.func,\n  canvasIndex: PropTypes.number,\n  canvas: PropTypes.object,\n  manifestId: PropTypes.string\n};\n\nFullResDownload.defaultProps = {\n  handleClose: () => {}\n};\n\n/**\n * mapStateToProps - to hook up connect\n * @memberof Window\n * @private\n */\nconst mapStateToProps = (state, props) => {\n  const { windowId } = props;\n  const canvasIndex = getCanvasIndex(state, { windowId })\n  const canvas = getCurrentCanvas(state, { windowId })\n  const manifestId = state.windows[windowId].manifestId\n  return {\n    canvasIndex,\n    canvas,\n    manifestId\n  };\n};\n\nexport default {\n  target: 'WindowTopBarPluginMenu',\n  mode: 'add',\n  name: 'FullResDownloadPlugin',\n  component: FullResDownload,\n  mapStateToProps\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\nimport {\n  getCanvasIndex,\n} from 'mirador/dist/es/src/state/selectors'\n\nfunction downloadFile(url, filename) {\n  fetch(url, {\n      method: 'GET',\n      //headers: new Headers({\n      //    \"Authorization\": \"Bearer \" + token\n      //})\n  })\n  .then(response => response.blob())\n  .then(blob => {\n      var url = window.URL.createObjectURL(blob);\n      var a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a); // we need to append the element to the dom -> otherwise it will not work in firefox\n      a.click();    \n      a.remove();  //afterwards we remove the element again         \n  });\n}\n\nclass PDFDownload extends Component {\n  downloadAndCloseMenu() {\n    const { handleClose, canvasIndex, manifestId } = this.props;\n    console.log(\"m\", manifestId)\n    let page = canvasIndex + 1\n    console.log(\"/access-files/69429/oocihm.84056.\"+page+\".pdf\")\n    downloadFile(\"/access-files/69429/oocihm.84056.\"+page+\".pdf\", \"oocihm.84056.\"+page+\".pdf\") \n    handleClose();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MenuItem onClick={() => this.downloadAndCloseMenu()}>\n          <ListItemIcon>\n            <DownloadIcon />\n          </ListItemIcon>\n          <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\n            Current image as a searchable PDF\n          </ListItemText>\n        </MenuItem>\n      </React.Fragment>\n    );\n  }\n}\n\nPDFDownload.propTypes = {\n  handleClose: PropTypes.func,\n  canvasIndex: PropTypes.number,\n  manifestId: PropTypes.string\n};\n\nPDFDownload.defaultProps = {\n  handleClose: () => {}\n};\n\n/**\n * mapStateToProps - to hook up connect\n * @memberof Window\n * @private\n */\nconst mapStateToProps = (state, props) => {\n  const { windowId } = props;\n  const canvasIndex = getCanvasIndex(state, { windowId })\n  const  manifestId = state.windows[windowId].manifestId\n  return {\n    canvasIndex,\n    manifestId\n  };\n};\n\nexport default {\n  target: 'WindowTopBarPluginMenu',\n  mode: 'add',\n  name: 'PDFDownloadPlugin',\n  component: PDFDownload,\n  mapStateToProps\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\nimport {\n  getCanvasIndex,\n} from 'mirador/dist/es/src/state/selectors'\n\nfunction downloadFile(url, filename) {\n  fetch(url, {\n      method: 'GET',\n      //headers: new Headers({\n      //    \"Authorization\": \"Bearer \" + token\n      //})\n  })\n  .then(response => response.blob())\n  .then(blob => {\n      var url = window.URL.createObjectURL(blob);\n      var a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a); // we need to append the element to the dom -> otherwise it will not work in firefox\n      a.click();    \n      a.remove();  //afterwards we remove the element again         \n  });\n}\n\nclass FullPDFDownload extends Component {\n  downloadAndCloseMenu() {\n    const { handleClose, canvasIndex, manifestId } = this.props;\n    console.log(\"m\", manifestId)\n    let page = canvasIndex + 1\n    console.log(\"/access-files/69429/oocihm.84056.pdf\")\n    downloadFile(\"/access-files/69429/oocihm.84056.pdf\", \"oocihm.84056.pdf\") \n    handleClose();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MenuItem onClick={() => this.downloadAndCloseMenu()}>\n          <ListItemIcon>\n            <DownloadIcon />\n          </ListItemIcon>\n          <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\n            All images as a searchable PDF\n          </ListItemText>\n        </MenuItem>\n      </React.Fragment>\n    );\n  }\n}\n\nFullPDFDownload.propTypes = {\n  handleClose: PropTypes.func,\n  canvasIndex: PropTypes.number,\n  manifestId: PropTypes.string\n};\n\nFullPDFDownload.defaultProps = {\n  handleClose: () => {}\n};\n\n/**\n * mapStateToProps - to hook up connect\n * @memberof Window\n * @private\n */\nconst mapStateToProps = (state, props) => {\n  const { windowId } = props;\n  const canvasIndex = getCanvasIndex(state, { windowId })\n  const  manifestId = state.windows[windowId].manifestId\n  return {\n    canvasIndex,\n    manifestId\n  };\n};\n\nexport default {\n  target: 'WindowTopBarPluginMenu',\n  mode: 'add',\n  name: 'FullPDFDownloadPlugin',\n  component: FullPDFDownload,\n  mapStateToProps\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\n\nconst downloadDialogReducer = (state = {}, action) => {\n  if (action.type === 'OPEN_WINDOW_DIALOG') {\n    return {\n      ...state,\n      [action.windowId]: {\n        openDialog: action.dialogType,\n      },\n    };\n  }\n\n  if (action.type === 'CLOSE_WINDOW_DIALOG') {\n    return {\n      ...state,\n      [action.windowId]: {\n        openDialog: null,\n      },\n    };\n  }\n  return state;\n};\n\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\n  openDownloadDialog: () => dispatch({ type: 'OPEN_WINDOW_DIALOG', windowId, dialogType: 'download' }),\n});\n\nclass MiradorDownload extends Component {\n  openDialogAndCloseMenu() {\n    const { handleClose, openDownloadDialog } = this.props;\n\n    openDownloadDialog();\n    handleClose();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <MenuItem onClick={() => this.openDialogAndCloseMenu()}>\n          <ListItemIcon>\n            <DownloadIcon />\n          </ListItemIcon>\n          <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\n            Current image in other resolutions\n          </ListItemText>\n        </MenuItem>\n      </React.Fragment>\n    );\n  }\n}\n\nMiradorDownload.propTypes = {\n  handleClose: PropTypes.func,\n  openDownloadDialog: PropTypes.func,\n};\n\nMiradorDownload.defaultProps = {\n  handleClose: () => {},\n  openDownloadDialog: () => {},\n};\n\nexport default {\n  target: 'WindowTopBarPluginMenu',\n  mode: 'add',\n  name: 'MiradorDownloadPlugin',\n  component: MiradorDownload,\n  mapDispatchToProps,\n  reducers: {\n    windowDialogs: downloadDialogReducer,\n  },\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from '@material-ui/core/Link';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n/**\n * RenderingDownloadLink ~\n*/\nexport default class RenderingDownloadLink extends Component {\n  render() {\n    const { rendering } = this.props;\n    return (\n      <ListItem disableGutters divider key={rendering.id}>\n        <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\n          <Link href={rendering.id} download rel=\"noopener noreferrer\" target=\"_blank\" variant=\"body1\">\n            {rendering.getLabel().getValue()}\n          </Link>\n          {rendering.getFormat()\n            && rendering.getFormat().value\n            && ` (${rendering.getFormat().value})`\n          }\n        </ListItemText>\n      </ListItem>\n    );\n  }\n}\n\nRenderingDownloadLink.propTypes = {\n  rendering: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    getLabel: PropTypes.func.isRequired,\n    getFormat: PropTypes.func.isRequired,\n  }).isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport uniqBy from 'lodash/uniqBy';\nimport { OSDReferences } from 'mirador/dist/es/src/plugins/OSDReferences';\nimport RenderingDownloadLink from './RenderingDownloadLink';\n\n\n/**\n * CanvasDownloadLinks ~\n*/\nexport default class CanvasDownloadLinks extends Component {\n  zoomedImageLabel() {\n    const bounds = this.currentBounds();\n    return `Zoomed region (${Math.floor(bounds.width)} x ${Math.floor(bounds.height)}px)`;\n  }\n\n  fullImageLabel() {\n    const { canvas } = this.props;\n\n    return `Whole image (${canvas.getWidth()} x ${canvas.getHeight()}px)`;\n  }\n\n  smallImageLabel() {\n    const { canvas } = this.props;\n\n    return `Whole image (1000 x ${Math.floor((1000 * canvas.getHeight()) / canvas.getWidth())}px)`;\n  }\n\n  zoomedImageUrl() {\n    const { canvas } = this.props;\n    const bounds = this.currentBounds();\n    const boundsUrl = canvas.getCanonicalImageUri().replace(\n      /\\/full\\/.*\\/0\\//,\n      `/${bounds.x},${bounds.y},${bounds.width},${bounds.height}/full/0/`,\n    );\n\n    return `${boundsUrl}?download=true`;\n  }\n\n  imageUrlForSize(size) {\n    const { canvas } = this.props;\n\n    return `${canvas.getCanonicalImageUri(size.width)}?download=true`;\n  }\n\n  fullImageUrl() {\n    const { canvas } = this.props;\n\n    return `${canvas.getCanonicalImageUri().replace(/\\/full\\/.*\\/0\\//, '/full/full/0/')}?download=true`;\n  }\n\n  thousandPixelWideImage() {\n    const { canvas } = this.props;\n\n    return `${canvas.getCanonicalImageUri('1000')}?download=true`;\n  }\n\n  osdViewport() {\n    const { windowId } = this.props;\n\n    return OSDReferences.get(windowId).current.viewport;\n  }\n\n  currentBounds() {\n    const bounds = this.osdViewport().getBounds();\n\n    return Object.keys(bounds).reduce((object, key) => {\n      object[key] = Math.ceil(bounds[key]); // eslint-disable-line no-param-reassign\n      return object;\n    }, {});\n  }\n\n  definedSizesRestrictsDownload() {\n    const { infoResponse } = this.props;\n    if (!infoResponse.json) return false;\n    const { height, width } = infoResponse.json;\n\n    if (this.definedSizes().length !== 1) return false;\n\n    return this.definedSizes()[0].width <= width\n           && this.definedSizes()[0].height <= height;\n  }\n\n  displayCurrentZoomLink() {\n    const { restrictDownloadOnSizeDefinition, infoResponse, viewType } = this.props;\n\n    if (viewType !== 'single') return false;\n    if (restrictDownloadOnSizeDefinition && this.definedSizesRestrictsDownload()) return false;\n    if (!(infoResponse && infoResponse.json)) return false;\n\n    const bounds = this.currentBounds();\n    return bounds.height < infoResponse.json.height\n      && bounds.width < infoResponse.json.width\n      && bounds.x >= 0\n      && bounds.y >= 0;\n  }\n\n  /**\n   * This only returns unique sizes\n  */\n  definedSizes() {\n    const { infoResponse } = this.props;\n    if (!(infoResponse && infoResponse.json && infoResponse.json.sizes)) return [];\n\n    return uniqBy(infoResponse.json.sizes, size => `${size.width}${size.height}`);\n  }\n\n  fullImageLink() {\n    return (\n      <ListItem disableGutters divider key={this.fullImageUrl()}>\n        <Link href={this.fullImageUrl()} rel=\"noopener noreferrer\" target=\"_blank\" variant=\"body1\">\n          {this.fullImageLabel()}\n        </Link>\n      </ListItem>\n    );\n  }\n\n  thousandPixelWideLink() {\n    const { canvas } = this.props;\n\n    if (canvas.getWidth() < 1000) return '';\n\n    return (\n      <ListItem disableGutters divider key={this.thousandPixelWideImage()}>\n        <Link href={this.thousandPixelWideImage()} rel=\"noopener noreferrer\" target=\"_blank\" variant=\"body1\">\n          {this.smallImageLabel()}\n        </Link>\n      </ListItem>\n    );\n  }\n\n  linksForDefinedSizes() {\n    return (\n      this.definedSizes().map(size => (\n        <ListItem disableGutters divider key={`${size.width}${size.height}`}>\n          <Link href={this.imageUrlForSize(size)} rel=\"noopener noreferrer\" target=\"_blank\" variant=\"body1\">\n            {`Whole image (${size.width} x ${size.height}px)`}\n          </Link>\n        </ListItem>\n      ))\n    );\n  }\n\n  /**\n   * Returns the rendered component\n  */\n  render() {\n    const {\n      canvas,\n      canvasLabel,\n      classes,\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <Typography noWrap variant=\"h3\" className={classes.h3}>{canvasLabel}</Typography>\n        <List>\n          {this.displayCurrentZoomLink()\n            && (\n              <ListItem disableGutters divider>\n                <Link href={this.zoomedImageUrl()} download rel=\"noopener noreferrer\" target=\"_blank\" variant=\"body1\">\n                  {this.zoomedImageLabel()}\n                </Link>\n              </ListItem>\n            )\n          }\n          {this.definedSizes().length === 0\n            && ([this.fullImageLink(), this.thousandPixelWideLink()])}\n          {this.definedSizes().length > 0\n            && (this.linksForDefinedSizes())}\n          {canvas.getRenderings().map(rendering => (\n            <RenderingDownloadLink rendering={rendering} key={rendering.id} />\n          ))}\n        </List>\n      </React.Fragment>\n    );\n  }\n}\n\nCanvasDownloadLinks.propTypes = {\n  canvas: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    getCanonicalImageUri: PropTypes.func.isRequired,\n    getHeight: PropTypes.func.isRequired,\n    getRenderings: PropTypes.func.isRequired,\n    getWidth: PropTypes.func.isRequired,\n  }).isRequired,\n  canvasLabel: PropTypes.string.isRequired, // canvasLabel is passed because we need access to redux\n  classes: PropTypes.shape({\n    h3: PropTypes.string,\n  }).isRequired,\n  infoResponse: PropTypes.shape({\n    json: PropTypes.shape({\n      height: PropTypes.number,\n      sizes: PropTypes.arrayOf(\n        PropTypes.shape({ height: PropTypes.number, width: PropTypes.number }),\n      ),\n      width: PropTypes.number,\n    }),\n  }).isRequired,\n  restrictDownloadOnSizeDefinition: PropTypes.bool.isRequired,\n  viewType: PropTypes.string.isRequired,\n  windowId: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport RenderingDownloadLink from './RenderingDownloadLink';\n\n/**\n * ManifestDownloadLinks ~\n*/\nexport default class ManifestDownloadLinks extends Component {\n  /**\n   * Returns the rendered component\n  */\n  render() {\n    const { classes, renderings } = this.props;\n\n    return (\n      <React.Fragment>\n        <Typography variant=\"h3\" className={classes.h3}>Other Resolutions</Typography>\n        <List>\n          {renderings.map(rendering => (\n            <RenderingDownloadLink rendering={rendering} key={rendering.id} />\n          ))}\n        </List>\n      </React.Fragment>\n    );\n  }\n}\n\nManifestDownloadLinks.propTypes = {\n  classes: PropTypes.shape({\n    h3: PropTypes.string,\n  }).isRequired,\n  renderings: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport { getCanvasLabel, getVisibleCanvases, selectInfoResponse } from 'mirador/dist/es/src/state/selectors/canvases';\nimport { getWindowViewType } from 'mirador/dist/es/src/state/selectors/windows';\nimport { getManifestoInstance } from 'mirador/dist/es/src/state/selectors/manifests';\nimport { getContainerId } from 'mirador/dist/es/src/state/selectors/config';\nimport ScrollIndicatedDialogContent from 'mirador/dist/es/src/containers/ScrollIndicatedDialogContent';\nimport CanvasDownloadLinks from './CanvasDownloadLinks';\nimport ManifestDownloadLinks from './ManifestDownloadLinks';\n\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\n  closeDialog: () => dispatch({ type: 'CLOSE_WINDOW_DIALOG', windowId }),\n});\n\nconst mapStateToProps = (state, { windowId }) => ({\n  canvases: getVisibleCanvases(state, { windowId }),\n  canvasLabel: canvasId => (getCanvasLabel(state, { canvasId, windowId })),\n  containerId: getContainerId(state),\n  infoResponse: canvasId => (selectInfoResponse(state, { windowId, canvasId }) || {}),\n  manifest: getManifestoInstance(state, { windowId }),\n  restrictDownloadOnSizeDefinition: state.config.miradorDownloadPlugin\n                                    && state.config\n                                      .miradorDownloadPlugin\n                                      .restrictDownloadOnSizeDefinition,\n  open: (state.windowDialogs[windowId] && state.windowDialogs[windowId].openDialog === 'download'),\n  viewType: getWindowViewType(state, { windowId }),\n});\n\n\n/**\n * MiradorDownloadDialog ~\n*/\nexport class MiradorDownloadDialog extends Component {\n  renderings() {\n    const { manifest } = this.props;\n    if (!(\n      manifest\n      && manifest.getSequences()\n      && manifest.getSequences()[0]\n      && manifest.getSequences()[0].getRenderings()\n    )) return [];\n\n    return manifest.getSequences()[0].getRenderings();\n  }\n\n  /**\n   * Returns the rendered component\n  */\n  render() {\n    const {\n      canvases,\n      canvasLabel,\n      classes,\n      closeDialog,\n      containerId,\n      infoResponse,\n      open,\n      restrictDownloadOnSizeDefinition,\n      viewType,\n      windowId,\n    } = this.props;\n\n    if (!open) return ('');\n\n    return (\n      <React.Fragment>\n        <Dialog\n          container={document.querySelector(`#${containerId} .mirador-viewer`)}\n          disableEnforceFocus\n          onClose={closeDialog}\n          open={open}\n          scroll=\"paper\"\n          fullWidth\n          maxWidth=\"xs\"\n        >\n          <DialogTitle disableTypography className={classes.h2}>\n            <Typography variant=\"h2\">Other Resolutions</Typography>\n          </DialogTitle>\n          <ScrollIndicatedDialogContent>\n            {canvases.map(canvas => (\n              <CanvasDownloadLinks\n                canvas={canvas}\n                canvasLabel={canvasLabel(canvas.id)}\n                classes={classes}\n                infoResponse={infoResponse(canvas.id)}\n                restrictDownloadOnSizeDefinition={restrictDownloadOnSizeDefinition}\n                key={canvas.id}\n                viewType={viewType}\n                windowId={windowId}\n              />\n            ))}\n            {this.renderings().length > 0\n              && <ManifestDownloadLinks classes={classes} renderings={this.renderings()} />\n            }\n          </ScrollIndicatedDialogContent>\n          <DialogActions>\n            <Button onClick={closeDialog} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </React.Fragment>\n    );\n  }\n}\n\nMiradorDownloadDialog.propTypes = {\n  canvasLabel: PropTypes.func.isRequired,\n  canvases: PropTypes.arrayOf(\n    PropTypes.shape({ id: PropTypes.string, index: PropTypes.number }),\n  ),\n  classes: PropTypes.shape({\n    h2: PropTypes.string,\n    h3: PropTypes.string,\n  }).isRequired,\n  closeDialog: PropTypes.func.isRequired,\n  containerId: PropTypes.string.isRequired,\n  infoResponse: PropTypes.func.isRequired,\n  manifest: PropTypes.shape({\n    getSequences: PropTypes.func,\n  }),\n  open: PropTypes.bool,\n  restrictDownloadOnSizeDefinition: PropTypes.bool,\n  viewType: PropTypes.string.isRequired,\n  windowId: PropTypes.string.isRequired,\n};\nMiradorDownloadDialog.defaultProps = {\n  canvases: [],\n  manifest: {},\n  open: false,\n  restrictDownloadOnSizeDefinition: false,\n};\n\nconst styles = () => ({\n  h2: {\n    paddingBottom: 0,\n  },\n  h3: {\n    marginTop: '20px',\n  },\n});\n\nexport default {\n  target: 'Window',\n  mode: 'add',\n  name: 'MiradorDownloadDialog',\n  component: withStyles(styles)(MiradorDownloadDialog),\n  mapDispatchToProps,\n  mapStateToProps,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MoreVertIcon from '@material-ui/icons/MoreVertSharp';\nimport Menu from '@material-ui/core/Menu';\nimport MiradorMenuButton from 'mirador/dist/es/src/containers/MiradorMenuButton';\nimport { PluginHook } from 'mirador/dist/es/src/components/PluginHook';\n\n/**\n *\n */\nexport class DownloadWindowTopBarPluginMenu extends Component {\n  /**\n   * constructor -\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n      open: false,\n    };\n    this.handleMenuClick = this.handleMenuClick.bind(this);\n    this.handleMenuClose = this.handleMenuClose.bind(this);\n  }\n\n  /**\n   * Set the anchorEl state to the click target\n   */\n  handleMenuClick(event) {\n    this.setState({\n      anchorEl: event.currentTarget,\n      open: true,\n    });\n  }\n\n  /**\n   * Set the anchorEl state to null (closing the menu)\n   */\n  handleMenuClose() {\n    this.setState({\n      anchorEl: null,\n      open: false,\n    });\n  }\n\n  /**\n   * render component\n   */\n  render() {\n    const {\n      container, PluginComponents, t, windowId, menuIcon,\n    } = this.props;\n    const { anchorEl, open } = this.state;\n    const windowPluginMenuId = `window-plugin-menu_${windowId}`;\n    if (!PluginComponents || PluginComponents.length === 0) return null;\n\n    return (\n      <>\n        <MiradorMenuButton\n          aria-haspopup=\"true\"\n          aria-label={t('windowPluginMenu')}\n          aria-owns={open ? windowPluginMenuId : undefined}\n          selected={open}\n          onClick={this.handleMenuClick}\n        >\n          <span style={{ \n            display: 'flex', \n            alignItems: 'center',\n            justifyContent: 'center',\n            flexDirection: 'column',\n            fontSize: '0.8rem'\n          }}>\n            {menuIcon}\n            <span>Download</span>\n          </span>\n        </MiradorMenuButton>\n\n        <Menu\n          id={windowPluginMenuId}\n          container={container?.current}\n          anchorEl={anchorEl}\n          anchorOrigin={{\n            horizontal: 'right',\n            vertical: 'bottom',\n          }}\n          transformOrigin={{\n            horizontal: 'right',\n            vertical: 'top',\n          }}\n          open={open}\n          onClose={() => this.handleMenuClose()}\n        >\n          <PluginHook handleClose={() => this.handleMenuClose()} {...this.props} />\n        </Menu>\n      </>\n    );\n  }\n}\n\nDownloadWindowTopBarPluginMenu.propTypes = {\n  anchorEl: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  container: PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  menuIcon: PropTypes.element,\n  open: PropTypes.bool,\n  PluginComponents: PropTypes.arrayOf(\n    PropTypes.node,\n  ),\n  t: PropTypes.func.isRequired,\n  windowId: PropTypes.string.isRequired,\n};\n\nDownloadWindowTopBarPluginMenu.defaultProps = {\n  anchorEl: null,\n  container: null,\n  menuIcon: <MoreVertIcon />,\n  open: false,\n  PluginComponents: [],\n};\n\nexport default {\n  target: 'WindowTopBarShareMenu',\n  mode: 'wrap',\n  component: DownloadWindowTopBarPluginMenu\n};\n","'use strict';\nimport React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from 'mirador/dist/es/src/extend/withPlugins';\nimport { DownloadWindowTopBarPluginMenu } from './downloadMenuButton.jsx';\nimport { getContainerId } from 'mirador/dist/es/src/state/selectors';\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\n\nconst WindowTopBarShareMenu = (props) => (\n  <DownloadWindowTopBarPluginMenu\n    {...props}\n    t={() => 'Download options'}\n    menuIcon={<DownloadIcon />}\n  />\n)\n\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\nconst styles = theme => ({\n  ctrlBtnSelected: {\n    backgroundColor: theme.palette.action.selected,\n  },\n});\n\nconst ImprovedWindowTopBarShareMenu = withStyles(styles)(\n  withPlugins('WindowTopBarShareMenu')(\n    WindowTopBarShareMenu\n  )\n);\n\n\nexport default {\n  component: ImprovedWindowTopBarShareMenu,\n  mapStateToProps: (state) => ({\n    containerId: getContainerId(state),\n  }),\n  mode: 'add',\n  name: 'WindowTopBarShareMenu',\n  target: 'WindowTopBarPluginArea',\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { getCanvasGroupings } from \"mirador/dist/es/src/state/selectors\";\nimport { estimatePdfSize } from \"pdiiif\";\n\n/**\n * Check support for streamsaver\n * Adapted from PDIIIF web example: https://github.com/jbaiter/pdiiif/blob/main/pdiiif-web/src/util.ts\n */\nfunction checkStreamsaverSupport() {\n  try {\n    // Our usecase requires WriteableStream\n    new Response(new WritableStream());\n    if (isSecureContext && !(\"serviceWorker\" in navigator)) {\n      return false;\n    }\n  } catch (err) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Check image API has CORS\n * Adapted from PDIIIF web example: https://github.com/jbaiter/pdiiif/blob/main/pdiiif-web/src/iiif.ts\n * @returns {boolean} true if image API has CORS\n */\nasync function checkImageApiHasCors() {\n  try {\n    let testImgResp = await fetch(images[0][\"@id\"] ?? images[0].id);\n    let testImgData = new Uint8Array(await testImgResp.arrayBuffer());\n    return testImgData[0] !== undefined ? true : false;\n  } catch {\n    return false;\n  }\n}\n\n\n// select an icon from material icons to import and use: https://v4.mui.com/components/material-icons/\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\n\nconst dialogReducer = (state = {}, action) => {\n  if (action.type === \"OPEN_WINDOW_DIALOG\") {\n    return {\n      ...state,\n      [action.windowId]: {\n        openDialog: action.dialogType,\n      },\n    };\n  }\n\n  if (action.type === \"CLOSE_WINDOW_DIALOG\") {\n    return {\n      ...state,\n      [action.windowId]: {\n        openDialog: null,\n      },\n    };\n  }\n  return state;\n};\n\nconst PDIIIFReducer = (state = {}, action) => {\n  if (action.type === \"PDIIIF/ALLOW_PDF_DOWNLOAD\") {\n    return {\n      ...state,\n      [action.windowId]: {\n        ...state[action.windowId],\n        PDFDownloadEnabled: true,\n      },\n    };\n  }\n  if (action.type === \"PDIIIF/SET_ESTIMATED_SIZE\") {\n    var estimatedSizeInBytes = action.size;\n    if (\n      typeof action.size === 'object' &&\n      !Array.isArray(action.size) &&\n      action.size !== null\n    ) {\n        if ('size' in action.size) {\n          estimatedSizeInBytes = action.size.size;\n        }\n    }\n    return {\n      ...state,\n      [action.windowId]: {\n        ...state[action.windowId],\n        estimatedSizeInBytes: estimatedSizeInBytes,\n      },\n    };\n  }\n  return state;\n};\n\nconst mapStateToProps = (state, { windowId }) => ({\n  manifest: state.manifests[state.windows[windowId].manifestId],\n  canvasGroupings: getCanvasGroupings(state, { windowId }),\n  allowPdfDownload: state.PDIIIF[windowId]?.PDFDownloadEnabled ?? false,\n});\n\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\n  setAllowPdfDownload: () =>\n    dispatch({ type: \"PDIIIF/ALLOW_PDF_DOWNLOAD\", windowId }),\n  setEstimatedSize: (size) =>\n    dispatch({ type: \"PDIIIF/SET_ESTIMATED_SIZE\", windowId, size }),\n  openDialog: () =>\n    dispatch({ type: \"OPEN_WINDOW_DIALOG\", windowId, dialogType: \"PDIIIF\" }),\n});\n\nclass PDIIIFMenuItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasChecked: false,\n      supportsFilesystemAPI: typeof showSaveFilePicker === \"function\",\n      supportsStreamsaver: checkStreamsaverSupport(),\n      imageApiHasCors: checkImageApiHasCors(),\n    };\n  }\n\n  openDialogAndCloseMenu() {\n    const { handleClose, openDialog } = this.props;\n\n    openDialog();\n    handleClose();\n  }\n\n  async componentDidMount() {\n    const {\n      manifest,\n      canvasGroupings,\n      setAllowPdfDownload,\n      allowPdfDownload,\n      setEstimatedSize,\n    } = this.props;\n    const { supportsFilesystemAPI, supportsStreamsaver, imageApiHasCors } =\n      this.state;\n\n    // If already allowed, don't check again\n    // Don't allow PDF download if neither Filesystem API or Streamsaver are supported\n    // Or if image API doesn't have CORS headers\n    if (\n      allowPdfDownload ||\n      (!supportsFilesystemAPI && !supportsStreamsaver) ||\n      !imageApiHasCors\n    ) {\n      this.setState({ hasChecked: true });\n      return;\n    }\n\n    if (!manifest?.error && manifest?.json) {\n      // Only show PDF's for PTO's\n      if (canvasGroupings.length > 1) {\n        // Check size can be estimated\n        const estimatedSizeInBytes = await estimatePdfSize({\n          manifest: manifest.json,\n          maxWidth: 1500,\n        });\n\n        // Estimated size, or 0\n        // N.B. Sometimes this is NaN, but not sure what triggers this\n        // it seems to be be caused bug in PDIIIIF trying to divide 0 by 0\n        if (estimatedSizeInBytes !== 0) {\n          setAllowPdfDownload();\n          setEstimatedSize(estimatedSizeInBytes);\n        }\n      }\n    }\n\n    this.setState({ hasChecked: true });\n  }\n\n  renderMenuItemText = () => {\n    const { hasChecked } = this.state;\n    const { allowPdfDownload } = this.props;\n\n    if (!hasChecked) {\n      return \"Loading non-searchable PDF options\";\n    }\n\n    if (allowPdfDownload) {\n      return \"Range of images in a non-searchable PDF\";\n    }\n\n    return \"Non-searchable PDF Unavailable\";\n  };\n\n  render() {\n    const { classes, allowPdfDownload } = this.props;\n    const { hasChecked } = this.state;\n    return (\n      <div>\n        <MenuItem\n          disabled={!hasChecked || !allowPdfDownload}\n          onClick={() => this.openDialogAndCloseMenu()}\n        >\n          <ListItemIcon>\n            <DownloadIcon />\n          </ListItemIcon>\n          <ListItemText primaryTypographyProps={{ variant: \"body1\" }}>\n            {this.renderMenuItemText()}\n          </ListItemText>\n          {!hasChecked && (\n            <CircularProgress size={15} className={classes.progress} />\n          )}\n        </MenuItem>\n      </div>\n    );\n  }\n}\n\nPDIIIFMenuItem.propTypes = {\n  allowPdfDownload: PropTypes.bool,\n  canvasGroupings: PropTypes.array.isRequired,\n  handleClose: PropTypes.func,\n  openPDIIIFDialog: PropTypes.func,\n  manifest: PropTypes.object.isRequired,\n  setAllowPdfDownload: PropTypes.func.isRequired,\n  setEstimatedSize: PropTypes.func.isRequired,\n};\n\nPDIIIFMenuItem.defaultProps = {\n  handleClose: () => {},\n  openPDIIIFDialog: () => {},\n};\n\nconst styles = () => ({\n  progress: {\n    marginLeft: \"2px\",\n  },\n});\n\nexport default {\n  target: \"WindowTopBarShareMenu\",\n  mode: \"add\",\n  name: \"PDIIIFMenuItem\",\n  component: withStyles(styles)(PDIIIFMenuItem),\n  mapDispatchToProps,\n  mapStateToProps,\n  reducers: {\n    windowDialogs: dialogReducer,\n    PDIIIF: PDIIIFReducer,\n  },\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport { convertManifest } from \"pdiiif\";\nimport {\n  getCanvases,\n  getManifestTitle,\n} from \"mirador/dist/es/src/state/selectors\";\nimport streamSaver from \"streamsaver\";\n\n/**\n * Format bytes to human readable string\n * https://stackoverflow.com/questions/15900485/correct-way-to-convert-size-in-bytes-to-kb-mb-gb-in-javascript\n * @param {number} bytes number of bytes\n * @param {number} decimals number of decimals\n * @returns {string} human readable string\n */\nfunction formatBytes(bytes, decimals = 2) {\n  if (!+bytes) return \"0 Bytes\";\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\n/**\n * Check support for streamsaver\n * Adapted from PDIIIF web example: https://github.com/jbaiter/pdiiif/blob/main/pdiiif-web/src/util.ts\n */\nfunction checkStreamsaverSupport() {\n  try {\n    // Our usecase requires WriteableStream\n    new Response(new WritableStream());\n    if (isSecureContext && !(\"serviceWorker\" in navigator)) {\n      return false;\n    }\n  } catch (err) {\n    return false;\n  }\n  return true;\n}\n\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\n  closeDialog: () => dispatch({ type: \"CLOSE_WINDOW_DIALOG\", windowId }),\n});\n\nconst mapStateToProps = (state, { windowId }) => ({\n  open:\n    state.windowDialogs[windowId] &&\n    state.windowDialogs[windowId].openDialog === \"PDIIIF\",\n  manifestId: state.windows[windowId].manifestId,\n  manifest: state.manifests[state.windows[windowId].manifestId],\n  containerId: state.config.id,\n  estimatedSize: state.PDIIIF[windowId]?.estimatedSizeInBytes,\n  allowPdfDownload: state.PDIIIF[windowId]?.allowPdfDownload,\n  canvasIds: getCanvases(state, { windowId }).map((canvas) => canvas.id),\n  mitmPath: state.config.miradorPDIIIFPlugin?.mitmPath,\n  manifestLabel: getManifestTitle(state, { windowId }),\n  coverPageEndpoint: state.config.miradorPDIIIFPlugin?.coverPageEndpoint,\n});\n\n/**\n * createRange\n * Adapted from PDIIIF's range function\n * @param {Number} start - start of range\n * @param {Number} end  - end of range\n * @returns {Array} Array of numbers\n */\nfunction createRange(start, end) {\n  return Array.from({ length: end - start + 1 }, (_, i) => start + i);\n}\n\n/**\n * PDIIIFDialog ~\n */\nexport class PDIIIFDialog extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      savingError: null,\n      isDownloading: false,\n      supportsFilesystemAPI: typeof showSaveFilePicker === \"function\",\n      supportsStreamsaver: checkStreamsaverSupport(),\n      webWritable: null,\n      abortController: new AbortController(), // Needs to be reset if aborted\n      indexSpec: \"\",\n      pageError: false,\n      filteredCanvasIds: undefined, // Undefined will trigger all pages\n      progress: 0,\n      pdfPath: \"\"\n    };\n  }\n\n  /**\n   * Parse string from input to generate array of corresponding canvasId's\n   * Adapted from PDIIIF's parseCanvasRanges function\n   * @param {String} indexSpec String of comma separated pages and/or ranges\n   * @param {Array} canvasIds Array of all canvasId's\n   * @returns {Array|undefined} Array of corresponding canvasId's\n   */\n  parseCanvasRanges(indexSpec, canvasIds) {\n    const canvasCount = canvasIds.length;\n\n    // First find the indexes of the canvases to be included (set will remove dupes)\n    const canvasIdxs = new Set(\n      indexSpec\n        .split(\",\")\n        .filter((g) => g.length > 0)\n        .reduce((idxs, group) => {\n          let newIdxs;\n          if (group.startsWith(\"-\")) {\n            const end = Number.parseInt(group.slice(1));\n            if (end < 1 || end > canvasCount) {\n              this.setState({ pageError: true });\n            }\n            newIdxs = createRange(1, end);\n          } else if (group.endsWith(\"-\")) {\n            const start = Number.parseInt(group.slice(0, -1));\n            if (start < 1 || start > canvasCount) {\n              this.setState({ pageError: true });\n            }\n            newIdxs = createRange(start, canvasCount);\n          } else if (group.indexOf(\"-\") > 0) {\n            const parts = group.split(\"-\");\n            const [start, end] = parts.map((p) => Number.parseInt(p, 10));\n            if (\n              start < 1 ||\n              end < 1 ||\n              start > end ||\n              start > canvasCount ||\n              end > canvasCount\n            ) {\n              this.setState({ pageError: true });\n            }\n            newIdxs = createRange(\n              Number.parseInt(parts[0]),\n              Number.parseInt(parts[1])\n            );\n          } else {\n            const num = Number.parseInt(group);\n            if (num < 1 || num > canvasCount) {\n              this.setState({ pageError: true });\n            }\n            newIdxs = [num];\n          }\n          if (newIdxs.find(Number.isNaN)) {\n            this.setState({ pageError: true });\n          }\n          return idxs.concat(newIdxs);\n        }, [])\n    );\n\n    // Next filter the canvasIds to only include those from canvasIdxs\n    const out = canvasIds.filter((_, i) => canvasIdxs.has(i + 1));\n    if (out.length === 0) {\n      return undefined;\n    }\n    return out;\n  }\n\n  componentDidMount() {\n    const { mitmPath } = this.props;\n\n    // Set the streamsaver mitm path or allow default\n    streamSaver.mitm = mitmPath ?? streamSaver.mitm;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { isDownloading, webWritable } = this.state;\n    const { open } = this.props;\n\n    if (!prevProps.open && open) {\n      // Opening / closing the modal while a download is _not_ in progress is the ideal cleanup time\n      if (!isDownloading) {\n        this.setState({\n          indexSpec: \"\",\n          filteredCanvasIds: undefined,\n          pageError: false,\n        });\n\n        this.resetDownloadState();\n      }\n    }\n\n    if (\n      prevState.isDownloading !== isDownloading ||\n      prevState.webWritable !== webWritable\n    ) {\n      if (isDownloading) {\n        window.addEventListener(\"beforeunload\", this.handleBeforeUnload);\n        window.addEventListener(\"unload\", this.handleUnload, { once: true });\n      } else {\n        window.removeEventListener(\"beforeunload\", this.handleBeforeUnload);\n        window.removeEventListener(\"unload\", this.handleUnload, { once: true });\n      }\n    }\n  }\n\n  /**\n   * Handle beforeunload event\n   * @param {Event} e\n   */\n  handleBeforeUnload = (e) => {\n    const { isDownloading, supportsFilesystemAPI } = this.state;\n    // Unlike a regular download, if the user *closes* the window / tab\n    // the download will fail, which is unexpected - this is just a warning\n    // Most modern browsers also cannot show a custom message:\n    // https://stackoverflow.com/questions/38879742/is-it-possible-to-display-a-custom-message-in-the-beforeunload-popup\n    if (isDownloading && !supportsFilesystemAPI) {\n      const msg = \"Are you sure? Leaving now will interrupt the download.\";\n      e.preventDefault();\n      e.returnValue = msg;\n      return msg;\n    }\n  };\n\n  handlePageChange = (event) => {\n    const { canvasIds } = this.props;\n    this.setState({ pageError: false });\n    this.setState({ indexSpec: event.target.value });\n    this.setState({\n      filteredCanvasIds: this.parseCanvasRanges(event.target.value, canvasIds),\n    });\n  };\n\n  /**\n   * Handle unload event\n   */\n  handleUnload = () => {\n    // N.B. Despite this, browsers aren't guaranteed to fire the unload event (and often don't)\n    // The side effect of this will usually be a download that looks like it's still in progress\n    const { abortController, webWritable } = this.state;\n\n    abortController.abort();\n    webWritable?.abort();\n  };\n\n  /**\n   * Resets the download state\n   * @returns {void}\n   */\n  resetDownloadState = () => {\n    // Cancelling or aborting will always need clear up the state\n    // In particular a new AbortController needs to be created\n    this.setState({\n      webWritable: null,\n      isDownloading: false,\n      progress: 0,\n      abortController: new AbortController(),\n    });\n  };\n\n  /**\n   * Attaches an abort listener to the AbortController\n   */\n  attachAbortListener = () => {\n    const { abortController } = this.state;\n\n    abortController.signal.addEventListener(\n      \"abort\",\n      async () => {\n        try {\n          await webWritable.abort();\n        } catch {\n          // NOP\n        } finally {\n          this.resetDownloadState();\n        }\n      },\n      { once: true }\n    );\n  };\n\n  /**\n   * Updates the progress state\n   * @param {Object} status - onProgress status object from PDIIIF\n   */\n  updateProgress = (status) => {\n    const { isDownloading } = this.state;\n\n    // When cancelled, sometimes this returns one last time\n    if (isDownloading) {\n      this.setState({\n        progress: Math.round((status.pagesWritten / status.totalPages) * 100),\n      });\n    }\n  };\n\n  /**\n   * Renders the progress bar\n   * @returns {ReactElement|null}\n   */\n  renderProgress = () => {\n    const { classes } = this.props;\n    const { progress, isDownloading } = this.state;\n\n    // Cases for showing progress bar:\n    // 1. Download is in progress (but potentially at 0%)\n    // 2. Not downloading, but progress is 100% (i.e. download is complete and we want the user to see it)\n\n    if (isDownloading || progress === 100) {\n      return (\n        <div className={classes.progressContainer}>\n          <Typography variant=\"body2\" color=\"textSecondary\">\n            Download progress:\n          </Typography>\n          <Box display=\"flex\" alignItems=\"center\">\n            <Box width=\"100%\" mr={1}>\n              <LinearProgress variant=\"determinate\" value={progress} />\n            </Box>\n            <Box minWidth={35}>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {progress}%\n              </Typography>\n            </Box>\n          </Box>\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  /**\n   * Cancels the download\n   */\n  cancelDownload = () => {\n    const { abortController } = this.state;\n\n    abortController.abort();\n\n    this.resetDownloadState();\n  };\n\n  /**\n   * Downoloads the PDF using the appropriate method\n   * @returns {Promise}\n   */\n  downloadPDF = async () => {\n    const { manifestLabel } = this.props;\n    const { supportsFilesystemAPI, supportsStreamsaver } = this.state;\n\n    // This is more of a insurance against what _might_ come out of manifesto\n    // For our purposes we'd always expect a string for v2 and v3 manifests\n    let suggestedName;\n    if (typeof manifestLabel === \"string\") {\n      suggestedName = manifestLabel;\n    } else if (Array.isArray(manifestLabel)) {\n      suggestedName = manifestLabel;\n    } else {\n      const date = new Date();\n      suggestedName = `PDF Download ${date.getYear()}-${date.getMonth()}-${date.getDate()}`;\n    }\n\n    // Enforce character limit (arbitrary, 128 incl extension)\n    suggestedName = `${suggestedName.slice(0, 123)}.pdf`;\n\n    // Ensure fresh state on each download attempt\n    this.resetDownloadState();\n\n    if (supportsFilesystemAPI) {\n      return await this.downloadWithFilesystemAPI(suggestedName);\n    }\n\n    if (supportsStreamsaver) {\n      return await this.downloadWithStreamsaver(suggestedName);\n    }\n  };\n\n  /**\n   * Downoloads the PDF using the Filesystem API\n   * @returns {Promise}\n   */\n  async downloadWithFilesystemAPI(suggestedName) {\n    // Get a writable handle to a file on the user's machine\n    let handle;\n\n    // The error here will typically be a user hitting esc / cancel\n    try {\n      handle = await showSaveFilePicker({\n        suggestedName,\n        types: [\n          {\n            description: \"PDF file\",\n            accept: { \"application/pdf\": [\".pdf\"] },\n          },\n        ],\n      });\n    } catch (e) {\n      this.setState({ savingError: e.message });\n      console.error(e);\n      return Promise.reject(e);\n    }\n\n    try {\n      if ((await handle.queryPermission({ mode: \"readwrite\" })) !== \"granted\") {\n        // Throw error if permission is not granted\n        // N.B. I wasn't able to trigger this error (e.g. by choosing folder with strict permission)\n        // but it's here for completeness\n        throw new Error(\"Permission to write to file was not granted\");\n      } else {\n        // Reset the error state\n        this.setState({ savingError: null });\n        const file = await handle.getFile()\n        console.log(\"F\", file)\n        this.state.pdfPath = file.name;\n        const webWritable = await handle.createWritable();\n\n        this.setState({ webWritable: webWritable });\n\n        // Start the PDF generation\n        return await this.manifestConverter(webWritable);\n      }\n    } catch (e) {\n      // Display permission / conversion error\n      this.setState({ savingError: e.message });\n      this.resetDownloadState();\n      console.error(e);\n      return Promise.reject(e);\n    }\n  }\n\n  /**\n   * Downoloads the PDF using the Streamsaver API\n   * @param {string} label\n   * @returns {Promise}\n   */\n  async downloadWithStreamsaver(suggestedName) {\n    const webWritable = streamSaver.createWriteStream(suggestedName);\n    this.setState({ webWritable: webWritable });\n\n    // Start the PDF generation\n    return await this.manifestConverter(webWritable);\n  }\n\n  /**\n   * Call to PDIIIF convertManifest shared between download methods\n   * @param {WritableStream} webWritable Stream required by PDIIIF\n   * @returns {Promise} (implicit)\n   */\n  async manifestConverter(webWritable) {\n    const { manifest, coverPageEndpoint } = this.props;\n    const { abortController, filteredCanvasIds } = this.state;\n\n    this.attachAbortListener();\n\n    this.setState({ isDownloading: true }, async () => {\n      try {\n        await convertManifest(manifest.json, webWritable, {\n          concurrency: 4,\n          maxWidth: 1500,\n          abortController,\n          filterCanvases: filteredCanvasIds,\n          coverPageEndpoint: coverPageEndpoint ?? \"\",\n          onProgress: this.updateProgress,\n        });\n      } catch (e) {\n        this.setState({ savingError: e.message });\n        console.error(e);\n      }\n      this.setState({ isDownloading: false });\n    });\n  }\n\n  /**\n   * Returns the rendered component\n   */\n  render() {\n    const { savingError, pageError, isDownloading, progress } = this.state;\n    const {\n      classes,\n      closeDialog,\n      containerId,\n      open,\n      allowPdfDownload,\n      estimatedSize,\n      canvasIds,\n    } = this.props;\n\n    if (!open || !allowPdfDownload) null;\n\n    const fileSizeText = estimatedSize\n      ? ` and has an estimated file size of ${formatBytes(estimatedSize)}`\n      : \"\";\n\n    return (\n      <Dialog\n        container={document.querySelector(`#${containerId} .mirador-viewer`)}\n        disableEnforceFocus\n        onClose={closeDialog}\n        open={open}\n        scroll=\"paper\"\n        fullWidth\n        maxWidth=\"xs\"\n      >\n        <DialogTitle disableTypography className={classes.h2}>\n          <Typography variant=\"h2\">Download a range of images to non-searchable PDF</Typography>\n        </DialogTitle>\n        <DialogContent>\n          {savingError && (\n            <DialogContentText>{savingError.message}</DialogContentText>\n          )}\n          <DialogContentText>\n            Note: The resulting PDF will NOT be a searchable PDF. \n            <br />\n            <br />\n            {isDownloading || progress === 100 ? isDownloading ? \"Downloading \" + this.state.pdfPath  : this.state.pdfPath + \" downloaded!\":\n            (\"The resulting PDF will contain \" + canvasIds.length + \" images \" + fileSizeText + \". All images will be included by default. If you wish to only download certain images, you may provide a comma separated list of image numbers and/or ranges below.\") }\n          </DialogContentText>\n          {isDownloading || progress === 100 ? progress === 100 ? (\n          <DialogContentText>Download finished! Navigate to the location you selected on your computer to view your PDF.</DialogContentText>): this.renderProgress() : (\n          <TextField\n            id=\"pages\"\n            label=\"(Optional) Image Numbers...\"\n            margin=\"normal\"\n            variant=\"outlined\"\n            placeholder=\"1, 4, 8-12, ...\"\n            error={pageError}\n            onChange={this.handlePageChange}\n            value={this.state.indexSpec}\n            disabled={isDownloading || progress === 100}\n          />\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={isDownloading ? this.cancelDownload : this.downloadPDF}\n            className={\n              pageError || progress === 100 ? classes.disabledButton : \"\"\n            }\n            color=\"primary\"\n            disabled={pageError || progress === 100}\n          >\n            {(() => {\n              if (progress === 100) {\n                return \"Done\";\n              } else if (isDownloading) {\n                return \"Cancel\";\n              } else {\n                return \"Download\";\n              }\n            })()}\n          </Button>\n          <Button onClick={closeDialog} color=\"primary\">\n            {(() => {\n              if (progress === 100) {\n                return \"Ok\";\n              } \n              else {\n                return \"Close\";\n              }\n            })()}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nPDIIIFDialog.propTypes = {\n  canvasIds: PropTypes.arrayOf(PropTypes.string),\n  classes: PropTypes.shape({\n    h2: PropTypes.string,\n    h3: PropTypes.string,\n    disabledButton: PropTypes.string,\n  }).isRequired,\n  closeDialog: PropTypes.func.isRequired,\n  containerId: PropTypes.string.isRequired,\n  coverPageEndpoint: PropTypes.string,\n  estimatedSize: PropTypes.number,\n  manifest: PropTypes.object,\n  manifestId: PropTypes.string,\n  manifestLabel: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  allowPdfDownload: PropTypes.bool,\n  open: PropTypes.bool,\n  windowId: PropTypes.string.isRequired,\n  mitmPath: PropTypes.string,\n};\n\nPDIIIFDialog.defaultProps = {\n  open: false,\n};\n\nconst styles = () => ({\n  h2: {\n    paddingBottom: 0,\n  },\n  progressContainer: {\n    marginTop: \"10px\",\n  },\n  h3: {\n    marginTop: \"20px\",\n  },\n  disabledButton: {\n    opacity: 0.6,\n  },\n});\n\nexport default {\n  target: \"Window\",\n  mode: \"add\",\n  name: \"PDIIIFDialog\",\n  component: withStyles(styles)(PDIIIFDialog),\n  mapDispatchToProps,\n  mapStateToProps,\n};\n","import React, { Component } from 'react'\nimport PropTypes from \"prop-types\"\nimport {\n  getCanvasIndex,\n} from 'mirador/dist/es/src/state/selectors'\n\nexport class PageNumPlugin extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n     TargetComponent, targetProps\n    } = this.props;\n\n    return (\n      <TargetComponent {...targetProps} />\n    )\n  }\n}\n\nPageNumPlugin.propTypes = {\n  canvasIndex: PropTypes.number\n};\n\n/**\n * mapStateToProps - to hook up connect\n * @memberof Window\n * @private\n */\nconst mapStateToProps = (state, props) => {\n  const { windowId } = props;\n  const canvasIndex = getCanvasIndex(state, { windowId });\n  let pageNum = canvasIndex + 1\n  let queryParams = new URLSearchParams(window.location.search)\n  const queryPageNum = queryParams.get(\"pageNum\")\n  if(typeof queryPageNum !== \"undefined\" && pageNum !== parseInt(queryPageNum)) {\n    queryParams.set(\"pageNum\", pageNum)\n    history.pushState(null, null, \"?\"+queryParams.toString())\n  }\n  return {\n    canvasIndex\n  };\n};\n\n\nexport default {\n  target: 'WindowCanvasNavigationControls',\n  mode: 'wrap',\n  component: PageNumPlugin,\n  mapStateToProps\n};\n","import React, { Component } from 'react';\nimport WindowViewSettings from 'mirador/dist/es/src/containers/WindowViewSettings';\n\n/**\n */\nexport class ViewPlugin extends Component {\n  /**\n   * render\n   * @return\n   */\n  render() {\n    const {\n      handleClose, windowId\n    } = this.props;\n\n    return (\n      <WindowViewSettings windowId={windowId} handleClose={handleClose} />\n    );\n  }\n}\n\nexport default {\n  component: ViewPlugin,\n  mode: 'add',\n  name: 'ViewPlugin',\n  target: 'WindowTopBarPluginArea',\n};","import React, { Component } from 'react'\nimport PropTypes from \"prop-types\"\nimport NavigationIcon from '@material-ui/icons/NavigateNext';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport classNames from 'classnames';\nimport ns from 'mirador/dist/es/src/config/css-ns';\nimport Select from 'react-select';\nimport * as actions from 'mirador/dist/es/src/state/actions';\nimport {\n  getSequenceViewingDirection,\n  getNextCanvasGrouping,\n  getPreviousCanvasGrouping,\n  getCurrentCanvas,\n  getCanvases\n} from 'mirador/dist/es/src/state/selectors';\nimport isEqual from 'lodash/isEqual'\n\n/**\n */\nclass ViewerNavigation extends Component {\n  /**\n   * Renders things\n   */\n  render() {\n    const {\n      hasNextCanvas, hasPreviousCanvas, setNextCanvas, setPreviousCanvas, \n      viewingDirection, setCanvas, lastCanvas, firstCanvas\n    } = this.props;\n\n    let htmlDir = 'ltr';\n    let previousIconStyle = {};\n    let nextIconStyle = {};\n    switch (viewingDirection) {\n      case 'top-to-bottom':\n        previousIconStyle = { transform: 'rotate(270deg)' };\n        nextIconStyle = { transform: 'rotate(90deg)' };\n        break;\n      case 'bottom-to-top':\n        previousIconStyle = { transform: 'rotate(90deg)' };\n        nextIconStyle = { transform: 'rotate(270deg)' };\n        break;\n      case 'right-to-left':\n        htmlDir = 'rtl';\n        previousIconStyle = {};\n        nextIconStyle = { transform: 'rotate(180deg)' };\n        break;\n      default:\n        previousIconStyle = { transform: 'rotate(180deg)' };\n        nextIconStyle = {};\n    }\n\n    return (\n      <div\n        className={classNames(ns('osd-navigation-custom'))}\n        dir={htmlDir}\n      >\n        <div class=\"btn-group\" role=\"group\" aria-label=\"Basic checkbox toggle button group\">\n          <button \n            class=\"MuiButtonBase-root MuiIconButton-root mirador-first-canvas-button btn btn-outline\" \n            tabindex=\"0\" type=\"button\" \n            aria-label=\"Last Image\" \n            title=\"First Image\"\n            disabled={!hasPreviousCanvas}\n            onClick={() => { hasPreviousCanvas && setCanvas(firstCanvas); }}>\n            <SkipNextIcon style={previousIconStyle} />\n          </button>\n          <button \n            class=\"MuiButtonBase-root MuiIconButton-root mirador-previous-canvas-button btn btn-outline\" \n            tabindex=\"0\" type=\"button\" \n            aria-label=\"Previous Image\" \n            title=\"Previous Image\"\n            disabled={!hasPreviousCanvas}\n            onClick={() => { hasPreviousCanvas && setPreviousCanvas(); }}>\n            <NavigationIcon style={previousIconStyle} />\n          </button>\n          <button \n            class=\"MuiButtonBase-root MuiIconButton-root mirador-next-canvas-button btn btn-outline\" \n            tabindex=\"0\" type=\"button\" \n            aria-label=\"Next Image\" \n            title=\"Next Image\"\n            disabled={!hasNextCanvas}\n            onClick={() => { hasNextCanvas && setNextCanvas(); }}>\n            <NavigationIcon style={nextIconStyle} />\n          </button>\n          <button \n            class=\"MuiButtonBase-root MuiIconButton-root mirador-last-canvas-button btn btn-outline\" \n            tabindex=\"0\" type=\"button\" \n            aria-label=\"Last Image\" \n            title=\"Last Image\"\n            disabled={!hasNextCanvas}\n            onClick={() => { hasNextCanvas && setCanvas(lastCanvas); }}>\n            <SkipNextIcon style={nextIconStyle} />\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nViewerNavigation.propTypes = {\n  hasNextCanvas: PropTypes.bool,\n  hasPreviousCanvas: PropTypes.bool,\n  setNextCanvas: PropTypes.func,\n  setPreviousCanvas: PropTypes.func,\n  setCanvas: PropTypes.func,\n  t: PropTypes.func.isRequired,\n  viewingDirection: PropTypes.string,\n  firstCanvas: PropTypes.string,\n  lastCanvas: PropTypes.string,\n};\n\nexport class NavControlsPlugin extends Component {\n  state = {\n    firstCanvas: \"\",\n    lastCanvas: \"\",\n    selectOptions: [],\n    selectedOption: null\n  }\n\n  constructor(props) {\n    super(props);\n    this.state.selectOptions = this.props.canvases?.map((canvas, index) => {\n      return {\n        value: canvas.id,\n        label: `Image ${index+1}`\n      }\n    })\n    this.state.selectedOption =  this.state.selectOptions?.[0]\n    this.state.canvasIds = this.props.canvases?.map((canvas) => canvas.id)\n    this.state.firstCanvas = this.state.canvasIds?.[0]\n    this.state.lastCanvas = this.state.canvasIds?.pop()\n  }\n\n  handleChange = (selectedOption) => {\n    this.setState({ selectedOption }, () =>\n      this.props.setCanvas(selectedOption.value)\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log(this.props.currentCanvas, prevProps.currentCanvas)\n    if(this.props.currentCanvas.id !== prevProps.currentCanvas?.id) {\n      let index = 0\n      for(let canvas of this.props.canvases) {\n        if (canvas['id'] === this.props.currentCanvas.id) break\n        index++\n      }\n      this.state.selectedOption = {\n        value: this.props.currentCanvas.id,\n        label: `Image ${index+1}`\n      }\n      this.forceUpdate()\n    }\n    if (this.props.canvases && !isEqual(this.props.canvases, prevProps.canvases)) {\n      this.state.selectOptions = this.props.canvases.map((canvas, index) => {\n        return {\n          value: canvas.id,\n          label: `Image ${index+1}`\n        }\n      })\n      this.state.selectedOption = this.state.selectOptions[0]\n      this.state.canvasIds = this.props.canvases.map((canvas) => canvas.id)\n      this.state.firstCanvas = this.state.canvasIds[0]\n      this.state.lastCanvas = this.state.canvasIds.pop()\n      this.forceUpdate()\n    }\n  }\n\n  render() {\n    const { windowId, hasNextCanvas, hasPreviousCanvas, viewingDirection, setNextCanvas, setPreviousCanvas, setCanvas } = this.props\n    const { firstCanvas, lastCanvas, selectOptions, selectedOption } = this.state\n    return (\n      <div  style={{zIndex: 1000000, position: \"absolute\", top: \"0.6rem\", left: \"1rem\", display: \"flex\", alignItems: \"baseline\"}}> \n        <Select\n          value={selectedOption}\n          onChange={this.handleChange}\n          options={selectOptions}\n        />\n        <ViewerNavigation \n          windowId={windowId}\n          hasNextCanvas={hasNextCanvas}\n          hasPreviousCanvas={hasPreviousCanvas}\n          viewingDirection={viewingDirection}\n          setNextCanvas={setNextCanvas}\n          setPreviousCanvas={setPreviousCanvas}\n          setCanvas={setCanvas}\n          lastCanvas={lastCanvas}\n          firstCanvas={firstCanvas}\n         />\n      </div>\n    )\n  }\n}\n\n/** */\nconst mapStateToProps = (state, { windowId }) => ({\n  hasNextCanvas: !!getNextCanvasGrouping(state, { windowId }),\n  hasPreviousCanvas: !!getPreviousCanvasGrouping(state, { windowId }),\n  viewingDirection: getSequenceViewingDirection(state, { windowId }),\n  currentCanvas: getCurrentCanvas(state, { windowId }),\n  canvases: getCanvases(state, { windowId })\n});\n\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\n  setNextCanvas: (...args) => dispatch(actions.setNextCanvas(windowId)),\n  setPreviousCanvas: (...args) => dispatch(actions.setPreviousCanvas(windowId)),\n  setCanvas: (canvasId) => {\n    return dispatch(actions.setCanvas(windowId, canvasId))\n  },\n});\n\nexport default {\n  component: NavControlsPlugin,\n  mode: 'add',\n  name: 'NavControlsPlugin',\n  target: 'WindowTopBarPluginArea',\n  mapStateToProps,\n  mapDispatchToProps\n};\n","import React, { Component } from 'react'\nimport * as actions from 'mirador/dist/es/src/state/actions';\nimport {\n  getCanvases\n} from 'mirador/dist/es/src/state/selectors';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ClearIcon from '@material-ui/icons/Clear';\n\nexport class LegacySearchPlugin extends Component {\n\n  state = {\n    query: '',\n    results: [],\n    currentResultIndex: 0,\n    currentCanvasIndex: 0,\n    resultsListOpen: false,\n    resultsMenuOpen: false,\n  }\n\n  constructor(props) {\n    super(props);\n    const queryString = window.location.search\n    const urlParams = new URLSearchParams(queryString)\n    const query = urlParams.get('q') \n    this.state.query = query ? query : \"\"\n  }\n\n\n  handleClear = () => {\n    document.getElementById(\"pvSearch\").value = \"\"\n    this.state.query = \"\"\n    this.state.results = []\n    this.state.currentResultIndex = 0\n    this.state.resultsListOpen = false\n    this.state.resultsMenuOpen = false\n    this.forceUpdate()\n  }\n\n  handleSearch = () => {\n    if(this.state.query.length) {\n      fetch('/legacy/84056?' + new URLSearchParams({\n          q: this.state.query\n      })).then(response => {\n        response.json().then(content => {\n          this.state.results = content\n          this.state.resultsListOpen = true\n          this.forceUpdate()\n        })\n      })\n    } else this.handleClear()\n  }\n  \n  render() {\n    const { windowId, canvases, setCanvas } = this.props\n    return (\n      <div className={this.state.resultsListOpen ? \"fullscreen\" : \"\"} style={{zIndex: 10000000, position: \"absolute\", top: \"-3.5rem\", left: \"0\", padding:\"0.5rem 1rem\", right:\"0\", background: \"white\", borderBottom: \"1px solid #dbdbdb\"}}> \n        <div id=\"pvToolbarTop\" aria-label=\"Viewer controls\">\n            <input \n            id=\"pvSearch\" \n            class=\"DocSearch-Input search-q q form-control\"\n            aria-autocomplete=\"both\" \n            aria-labelledby=\"docsearch-label\" \n            autocomplete=\"off\" \n            autocorrect=\"off\" \n            autocapitalize=\"off\" \n            enterkeyhint=\"search\" \n            spellcheck=\"false\" \n            placeholder=\"Search within images...\"\n            type=\"search\"\n            name=\"q\"\n            defaultValue={this.state.query}\n            onChange={(e) => { \n              console.log(e)\n              this.state.query = e.target.value\n            }}/>\n            <button \n              onClick={this.handleSearch}\n              type=\"submit\" \n              id=\"item-search-submit\" \n              class=\"btn btn-primary\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" aria-hidden=\"true\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path>\n                </svg>\n            </button>\n            { \n              this.state.resultsListOpen || this.state.resultsMenuOpen ? (\n              <Button \n                onClick={this.handleClear}\n                className=\"btn-ghost\"\n                id=\"item-search-clear\">\n                  <ClearIcon />\n              </Button> ) : (\"\")\n            }\n        </div>\n        <div class=\"container-fluid container-flex card-section\">\n          { this.state.resultsListOpen ? this.state.results.map((result, index) => (\n            <Card className='mui-card clickable' onClick={() => {\n              this.state.currentCanvasIndex = result\n              this.state.currentResultIndex = index\n              this.state.resultsListOpen = false\n              this.state.resultsMenuOpen = true\n              console.log(windowId, canvases[result-1].id)\n              setCanvas(canvases[result-1].id)\n              this.forceUpdate()\n            }}>\n              <CardHeader\n                title={\"Image \" + result}\n              />\n              <CardMedia\n                image={canvases[result-1].__jsonld.items[0].items[0].body.id}\n                height=\"390px\"\n                title=\"Paella dish\"\n              />\n            </Card>\n          )) : this.state.resultsMenuOpen ?\n            <div className=\"legacy-search-menu\">\n              <div style={{display : \"flex\", justifyContent: \"flex-start\", alignItems: \"center\"}}>\n                <Button variant=\"contained\" color=\"primary\" onClick={() => {\n                  this.state.resultsListOpen = true\n                  this.state.resultsMenuOpen = false\n                  this.forceUpdate()\n                }}\n                  className=\"btn-ghost btn-icon\"\n                  style={{marginLeft: \"1rem\"}}>\n                  <ArrowBackIcon />\n                  All results\n                </Button>\n              </div>\n              <div style={{display : \"flex\", justifyContent: \"center\", alignItems: \"center\", color: \"#666\"}} className=\"MuiTypography-caption\">\n                <span style={{paddingRight : \"0.6rem\", borderRight: \"1px solid #dbdbdb\"}}>\n                  Image {this.state.currentCanvasIndex}\n                </span>\n                <span style={{marginLeft: \"0.5rem\"}}>\n                  Result {this.state.currentResultIndex+1} of {this.state.results.length}\n                </span>\n              </div>\n              <div style={{display : \"flex\", justifyContent: \"flex-end\", alignItems: \"center\"}}>\n                <Button disabled={this.state.currentResultIndex === 0} variant=\"contained\" className=\"btn-ghost\" onClick={() => {\n                  if(this.state.currentResultIndex > 0) {\n                    this.state.currentResultIndex -= 1\n                    this.state.currentCanvasIndex = this.state.results[this.state.currentResultIndex]-1\n                    setCanvas(canvases[this.state.currentCanvasIndex].id)\n                    this.forceUpdate()\n                  }\n                }}>\n                  previous result\n                </Button>\n                <Button disabled={this.state.currentResultIndex === this.state.results.length-1} variant=\"contained\" className=\"btn-ghost\" onClick={() => {\n                  if(this.state.currentResultIndex < this.state.results.length-1) {\n                    this.state.currentResultIndex += 1\n                    this.state.currentCanvasIndex = this.state.results[this.state.currentResultIndex]-1\n                    setCanvas(canvases[this.state.currentCanvasIndex].id)\n                    this.forceUpdate()\n                  }\n                }}>\n                  next result\n                </Button>\n              </div>\n            </div> \n            : \"\"\n          }\n        </div>\n\n        \n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, { windowId }) => ({\n  canvases: getCanvases(state, { windowId })\n});\n\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\n  setCanvas: (canvasId) => {\n    return dispatch(actions.setCanvas(windowId, canvasId))\n  },\n});\n\nexport default {\n  component: LegacySearchPlugin,\n  mode: 'add',\n  name: 'LegacySearchPlugin',\n  target: 'WindowTopBarPluginArea',\n  mapStateToProps,\n  mapDispatchToProps\n};\n","import Mirador from 'mirador/dist/es/src/index.js'\nimport miradorImageToolsPlugin from '../plugins/mirador-image-tools/miradorImageToolsPlugin.js'\nimport miradorShareDialogPlugin from 'mirador-share-plugin/es/MiradorShareDialog.js'\nimport fullResDownloadPlugin from '../plugins/fullResDownloadPlugin.js'\nimport pdfDownloadPlugin from '../plugins/pdfDownloadPlugin.js'\nimport fullPdfDownloadPlugin from '../plugins/fullPdfDownloadPlugin.js'\nimport miradorDownloadPlugin from '../plugins/mirador-downloads/miradorDownloadPlugin.js'\nimport miradorDownloadDialogPlugin from '../plugins/mirador-downloads/MiradorDownloadDialog.js'\nimport downloadMenuPlugin from '../plugins/downloadMenuPlugin.jsx'\nimport miradorPDIIIFMenuItemPlugin from '../plugins/miradorPDIIIFMenuItem.js'\nimport miradorPDIIIFDialogPlugin from '../plugins/miradorPDIIIFDialog.js'\nimport pageNumPlugin from '../plugins/pageNumPlugin.jsx'\nimport miradorViewPlugin from '../plugins/miradorViewPlugin.jsx'\nimport navControlsPlugin from '../plugins/navControls.jsx'\nimport legacySearchPlugin from '../plugins/legacySearchPlugin.jsx'\n//import textOverlayPlugin from 'mirador-textoverlay/es';\n\nexport default {\n  init: function() {\n        console.log(Mirador)\n        //let searchInput = document.getElementById(\"pvSearch\")\n        //let resetButton = document.getElementById(\"pvSearchReset\")\n\n        //console.log(\"rb\", resetButton)\n        let pageViewer = document.getElementById(\"page-viewer\")\n        if(!pageViewer) return\n    \n        const documentId = pageViewer.getAttribute(\"data-docid\")\n        let canvasIndex = 0\n        const params = new URLSearchParams(window.location.search)\n        if(params.has(\"pageNum\")) canvasIndex = parseInt(params.get(\"pageNum\")-1)\n    \n        let apiPrefix =  \"https://www.canadiana.ca/iiif/oocihm.\"\n        if(documentId.includes(\"ooga\")) apiPrefix =  \"https://nrcan.canadiana.ca/iiif/\"\n        let manifest = apiPrefix+documentId+\"/manifest\"\n        \n        let mplugins = [\n          //miradorZoomBugPlugin,\n          miradorViewPlugin,\n          downloadMenuPlugin,\n          {\n            ...fullResDownloadPlugin,\n            target: 'WindowTopBarShareMenu',\n          },\n          {\n            ...miradorDownloadPlugin,\n            target: 'WindowTopBarShareMenu',\n          },\n          {\n            ...pdfDownloadPlugin,\n            target: 'WindowTopBarShareMenu',\n          },\n          {\n            ...fullPdfDownloadPlugin,\n            target: 'WindowTopBarShareMenu',\n          },\n          miradorPDIIIFMenuItemPlugin,\n          miradorPDIIIFDialogPlugin,\n          miradorShareDialogPlugin,\n          miradorDownloadDialogPlugin,\n          ...miradorImageToolsPlugin,\n          pageNumPlugin,\n          navControlsPlugin,\n          legacySearchPlugin,\n          //textOverlayPlugin\n        ]\n    \n        //https://github.com/ProjectMirador/mirador/blob/master/src/config/settings.js\n        let mconfig = {\n    \n          id: 'page-viewer', // id selector where Mirador should be instantiated\n    \n          canvasNavigation: {\n    \n            // Set the height and width of canvas thumbnails in the  CanvasNavigation companion window\n    \n            height: 50,\n    \n            width: 50\n    \n          },\n    \n          selectedTheme: \"light\", // dark also available\n    \n          themes: {\n    \n            dark: {\n    \n              palette: {\n    \n                type: \"dark\",\n    \n                primary: {\n    \n                  main: \"#4db6ac\"\n    \n                },\n    \n                secondary: {\n    \n                  main: \"#4db6ac\"\n    \n                },\n    \n                shades: {\n    \n                  dark: \"#000000\",\n    \n                  main: \"#424242\",\n    \n                  light: \"#616161\"\n    \n                }\n    \n              }\n    \n            },\n    \n            light: {\n    \n              palette: {\n    \n                type: \"light\"\n    \n              }\n    \n            }\n    \n          },\n    \n          theme: {\n    \n            // Sets up a MaterialUI theme. See https://material-ui.com/customization/default-theme/\n    \n            palette: {\n    \n              type: \"light\",\n    \n              primary: {\n    \n                main: \"#155e66\" // Controls the color of the Add button and current window indicator\n    \n              },\n    \n              secondary: {\n    \n                main: \"#155e66\" // Controls the color of Selects and FormControls\n    \n              },\n    \n              shades: {\n    \n                // Shades that can be used to offset color areas of the Workspace / Window\n    \n                dark: \"#eeeeee\",\n    \n                main: \"#ffffff\",\n    \n                light: \"#f5f5f5\"\n    \n              },\n    \n              error: {\n    \n                main: \"#b00020\"\n    \n              },\n    \n              notification: {\n    \n                // Color used in MUI Badge dots\n    \n                main: \"#ffa224\"\n    \n              },\n    \n              hitCounter: {\n    \n                default: \"#bdbdbd\"\n    \n              },\n    \n              highlights: {\n    \n                primary: \"#ffff00\",\n    \n                secondary: \"#00BFFF\"\n    \n              },\n    \n              section_divider: \"rgba(0, 0, 0, 0.25)\",\n    \n              annotations: {\n    \n                hidden: { globalAlpha: 0 },\n    \n                default: { strokeStyle: \"#00BFFF\", globalAlpha: 1 },\n    \n                hovered: { strokeStyle: \"#BF00FF\", globalAlpha: 1 },\n    \n                selected: { strokeStyle: \"#ffff00\", globalAlpha: 1 }\n    \n              },\n    \n              search: {\n    \n                default: { fillStyle: \"#00BFFF\", globalAlpha: 0.3 },\n    \n                hovered: { fillStyle: \"#00FFFF\", globalAlpha: 0.3 },\n    \n                selected: { fillStyle: \"#ffff00\", globalAlpha: 0.3 }\n    \n              }\n    \n            },\n    \n            typography: {\n    \n              body1: {\n    \n                fontSize: \"1rem\",\n    \n                letterSpacing: \"0em\",\n    \n                lineHeight: \"1.6em\"\n    \n              },\n    \n              body2: {\n    \n                fontSize: \"0.878rem\",\n    \n                letterSpacing: \"0.015em\",\n    \n                lineHeight: \"1.6em\"\n    \n              },\n    \n              button: {\n    \n                fontSize: \"0.878rem\",\n    \n                letterSpacing: \"0.09em\",\n    \n                lineHeight: \"2.25rem\",\n    \n                textTransform: \"uppercase\"\n    \n              },\n    \n              caption: {\n    \n                fontSize: \"0.772rem\",\n    \n                letterSpacing: \"0.033em\",\n    \n                lineHeight: \"1.6rem\"\n    \n              },\n    \n              body1Next: {\n    \n                fontSize: \"1rem\",\n    \n                letterSpacing: \"0em\",\n    \n                lineHeight: \"1.6em\"\n    \n              },\n    \n              body2Next: {\n    \n                fontSize: \"0.878rem\",\n    \n                letterSpacing: \"0.015em\",\n    \n                lineHeight: \"1.6em\"\n    \n              },\n    \n              buttonNext: {\n    \n                fontSize: \"0.878rem\",\n    \n                letterSpacing: \"0.09em\",\n    \n                lineHeight: \"2.25rem\"\n    \n              },\n    \n              captionNext: {\n    \n                fontSize: \"0.772rem\",\n    \n                letterSpacing: \"0.33em\",\n    \n                lineHeight: \"1.6rem\"\n    \n              },\n    \n              overline: {\n    \n                fontSize: \"0.678rem\",\n    \n                fontWeight: 500,\n    \n                letterSpacing: \"0.166em\",\n    \n                lineHeight: \"2em\",\n    \n                textTransform: \"uppercase\"\n    \n              },\n    \n              h1: {\n    \n                fontSize: \"2.822rem\",\n    \n                letterSpacing: \"-0.015em\",\n    \n                lineHeight: \"1.2em\"\n    \n              },\n    \n              h2: {\n    \n                fontSize: \"1.575rem\",\n    \n                letterSpacing: \"0em\",\n    \n                lineHeight: \"1.33em\"\n    \n              },\n    \n              h3: {\n    \n                fontSize: \"1.383rem\",\n    \n                fontWeight: 300,\n    \n                letterSpacing: \"0em\",\n    \n                lineHeight: \"1.33em\"\n    \n              },\n    \n              h4: {\n    \n                fontSize: \"1rem\",\n    \n                letterSpacing: \"0.007em\",\n    \n                lineHeight: \"1.45em\"\n    \n              },\n    \n              h5: {\n    \n                fontSize: \"1rem\",\n    \n                letterSpacing: \"0.005em\",\n    \n                lineHeight: \"1.55em\"\n    \n              },\n    \n              h6: {\n    \n                fontSize: \"1rem\",\n    \n                fontWeight: 400,\n    \n                letterSpacing: \"0.01em\",\n    \n                lineHeight: \"1.6em\"\n    \n              },\n    \n              subtitle1: {\n    \n                fontSize: \"0.937rem\",\n    \n                letterSpacing: \"0.015em\",\n    \n                lineHeight: \"1.6em\",\n    \n                fontWeight: 300\n    \n              },\n    \n              subtitle2: {\n    \n                fontSize: \"0.878rem\",\n    \n                fontWeight: 500,\n    \n                letterSpacing: \"0.02em\",\n    \n                lineHeight: \"1.75em\"\n    \n              },\n    \n              useNextVariants: true // set so that console deprecation warning is removed\n    \n            },\n    \n            overrides: {\n    \n              MuiListSubheader: {\n    \n                root: {\n    \n                  '&[role=\"presentation\"]:focus': {\n    \n                    outline: 0\n    \n                  }\n    \n                }\n    \n              },\n    \n              MuiTooltip: {\n    \n                // Overridden from https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/Tooltip/Tooltip.js#L40-L70\n    \n                tooltipPlacementLeft: {\n    \n                  [\"@media (min-width:600px)\"]: {\n    \n                    margin: 0\n    \n                  }\n    \n                },\n    \n                tooltipPlacementRight: {\n    \n                  [\"@media (min-width:600px)\"]: {\n    \n                    margin: 0\n    \n                  }\n    \n                },\n    \n                tooltipPlacementTop: {\n    \n                  [\"@media (min-width:600px)\"]: {\n    \n                    margin: 0\n    \n                  }\n    \n                },\n    \n                tooltipPlacementBottom: {\n    \n                  [\"@media (min-width:600px)\"]: {\n    \n                    margin: 0\n    \n                  }\n    \n                }\n    \n              },\n    \n              MuiTouchRipple: {\n    \n                childPulsate: {\n    \n                  animation: \"none\"\n    \n                },\n    \n                rippleVisible: {\n    \n                  animation: \"none\"\n    \n                }\n    \n              }\n    \n            },\n    \n            props: {\n    \n              MuiButtonBase: {\n    \n                disableTouchRipple: true\n    \n              },\n    \n              MuiLink: {\n    \n                underline: \"always\"\n    \n              }\n    \n            }\n    \n          },\n    \n          language: \"en\", // The default language set in the application\n    \n          availableLanguages: {\n    \n            // All the languages available in the language switcher\n    \n            ar: \"العربية\",\n    \n            de: \"Deutsch\",\n    \n            en: \"English\",\n    \n            fa: \"فارسی\",\n    \n            fr: \"Français\",\n    \n            ja: \"日本語\",\n    \n            kr: \"한국어\",\n    \n            lt: \"Lietuvių\",\n    \n            nl: \"Nederlands\",\n    \n            \"nb-NO\": \"Norwegian Bokmål\",\n    \n            pl: \"Polski\",\n    \n            \"pt-BR\": \"Português do Brasil\",\n    \n            vi: \"Tiếng Việt\",\n    \n            \"zh-CN\": \"中文(简体)\",\n    \n            \"zh-TW\": \"中文(繁體)\",\n    \n            it: \"Italiano\",\n    \n            sr: \"Српски\",\n    \n            sv: \"Svenska\",\n    \n            bg: \"Български\"\n    \n          },\n    \n          annotations: {\n    \n            htmlSanitizationRuleSet: \"iiif\", // See src/lib/htmlRules.js for acceptable values\n    \n            filteredMotivations: [\n    \n              \"oa:commenting\",\n    \n              \"oa:tagging\",\n    \n              \"sc:painting\",\n    \n              \"commenting\",\n    \n              \"tagging\"\n    \n            ]\n    \n          },\n    \n          createGenerateClassNameOptions: {\n    \n            // Options passed directly to createGenerateClassName in Material-UI https://material-ui.com/styles/api/#creategenerateclassname-options-class-name-generator\n    \n            productionPrefix: \"mirador\"\n    \n          },\n    \n          requests: {\n    \n            preprocessors: [\n    \n              // Functions that receive HTTP requests and manipulate them (e.g. to add headers)\n    \n              // (url, options) => (url.match('info.json') && { ...options, myCustomThing: 'blah' })\n    \n            ],\n    \n            postprocessors: [\n    \n              // Functions that receive HTTP responses and manipulates them before adding to store\n    \n              // An example of manipulating the response for an annotation request\n    \n              // (url, action) => {\n    \n              //   if (action.annotationId) {\n    \n              //     action.annotationJson = {}\n    \n              //   }\n    \n              // }\n    \n            ]\n    \n          },\n    \n          translations: {\n    \n            // Translations can be added to inject new languages or override existing labels\n            en: { \n              \"currentItem\": \"Current image\",\n              \"currentItem_1/1\": \"Current image\",\n              \"resource\": \"Item Title\",\n            }\n    \n          },\n    \n    \n          view: \"catalogueView\",\n    \n          window: {\n\n            imageToolsOpen: false,\n    \n            //global window defaults\n    \n            allowClose: false, // Configure if windows can be closed or not\n    \n            allowFullscreen: false, // Configure to show a \"fullscreen\" button in the WindowTopBar\n    \n            allowMaximize: false, // Configure if windows can be maximized or not\n    \n            allowTopMenuButton: false, // Configure if window view and thumbnail display menu are visible or not\n    \n            allowWindowSideBar: false, // Configure if side bar menu is visible or not\n    \n            authNewWindowCenter: \"parent\", // Configure how to center a new window created by the authentication flow. Options: parent, screen\n    \n            sideBarPanel: \"info\", // Configure which sidebar is selected by default. Options: info, attribution, canvas, annotations, search\n    \n            defaultSidebarPanelHeight: 201, // Configure default sidebar height in pixels\n    \n            defaultSidebarPanelWidth: 235, // Configure default sidebar width in pixels\n    \n            defaultView: \"single\", // Configure which viewing mode (e.g. single, book, gallery) for windows to be opened in\n    \n            forceDrawAnnotations: false,\n    \n            hideWindowTitle: false, // Configure if the window title is shown in the window title bar or not\n    \n            highlightAllAnnotations: false, // Configure whether to display annotations on the canvas by default\n    \n            showLocalePicker: false, // Configure locale picker for multi-lingual metadata\n    \n            sideBarOpen:  false, // Configure if the sidebar (and its content panel) is open by default\n    \n            switchCanvasOnSearch: true, // Configure if Mirador should automatically switch to the canvas of the first search result\n    \n            panels: {\n    \n              // Configure which panels are visible in WindowSideBarButtons\n    \n              info: false,\n    \n              attribution: false,\n    \n              canvas: false,\n    \n              annotations: false,\n    \n              search: false,\n    \n              layers: false\n    \n            },\n    \n            views: [\n    \n              { key: \"single\", behaviors: [\"individuals\"] },\n    \n              { key: \"book\", behaviors: [\"paged\"] },\n    \n              { key: \"scroll\", behaviors: [\"continuous\"] },\n    \n              { key: \"gallery\" }\n    \n            ],\n    \n            elastic: {\n    \n              height: 400,\n    \n              width: 480\n    \n            }\n    \n          },\n          \n          windows: [{\n            manifestId: manifest,\n            //view: 'single',\n            canvasIndex,\n          }],\n    \n          thumbnails: {\n    \n            preferredFormats: [\"jpg\", \"png\", \"webp\", \"tif\"]\n    \n          },\n    \n          thumbnailNavigation: {\n    \n            defaultPosition: \"off\", // Which position for the thumbnail navigation to be be displayed. Other possible values are \"far-bottom\" or \"far-right\"\n    \n            displaySettings: false, // Display the settings for this in WindowTopMenu\n    \n            height: 130, // height of entire ThumbnailNavigation area when position is \"far-bottom\"\n    \n            width: 100 // width of one canvas (doubled for book view) in ThumbnailNavigation area when position is \"far-right\"\n    \n          },\n    \n          \n          workspace: {\n    \n            draggingEnabled: false,\n    \n            allowNewWindows: true,\n    \n            isWorkspaceAddVisible: false, // Catalog/Workspace add window feature visible by default\n    \n            exposeModeOn: false, // unused?\n    \n            height: 5000, // height of the elastic mode's virtual canvas\n    \n            showZoomControls: false, // Configure if zoom controls should be displayed by default\n    \n            type: \"mosaic\", // Which workspace type to load by default. Other possible values are \"elastic\". If \"mosaic\" or \"elastic\" are not selected no worksapce type will be used.\n    \n            viewportPosition: {\n    \n              // center coordinates for the elastic mode workspace\n    \n              x: 0,\n    \n              y: 0\n    \n            },\n    \n            width: 5000 // width of the elastic mode's virtual canvas\n    \n          },\n    \n          workspaceControlPanel: {\n    \n            enabled: false // Configure if the control panel should be rendered.  Useful if you want to lock the viewer down to only the configured manifests\n    \n          },\n    \n          galleryView: {\n    \n            height: 120, // height of gallery view thumbnails\n    \n            width: null // width of gallery view thumbnails (or null, to auto-calculate an aspect-ratio appropriate size)\n    \n          },\n    \n          osdConfig: {\n    \n            // Default config used for OpenSeadragon https://openseadragon.github.io/docs/OpenSeadragon.html#.Options\n    \n            alwaysBlend: false,\n    \n            blendTime: 0.1,\n    \n            preserveImageSizeOnResize: true,\n    \n            preserveViewport: true,\n    \n    \n            zoomPerScroll: 1,\n    \n            gestureSettingsMouse: {\n              scrollToZoom: false,\n              clickToZoom: false,\n              dblClickToZoom: false\n            },\n    \n            gestureSettingsTouch: {\n              scrollToZoom: false,\n              dragToPan: false\n            },\n\n            minScrollDeltaTime: 0,\n            clickTimeThreshold: 0,\n            zoomPerSecond: 1.2,\n            showNavigator: true,\n            autoHideControls: false,\n            showNavigationControl: true,\n            navigatorPosition: \"BOTTOM_RIGHT\",\n            showFullPageControl: true\n          },\n    \n          export: {\n    \n            catalog: true,\n    \n            companionWindows: true,\n    \n            config: true,\n    \n            elasticLayout: true,\n    \n            layers: true,\n    \n            // filter out anything re-retrievable:\n    \n            manifests: { filter: ([id, value]) => !id.startsWith(\"http\") },\n    \n            viewers: true,\n    \n            windows: true,\n    \n            workspace: true\n    \n          },\n    \n          audioOptions: {\n    \n            // Additional props passed to <audio> element\n    \n            controls: true,\n    \n            crossOrigin: \"anonymous\"\n    \n          },\n    \n          videoOptions: {\n    \n            // Additional props passed to <audio> element\n    \n            controls: true,\n    \n            crossOrigin: \"anonymous\"\n    \n          }\n    \n        }\n\n        let miradorInstance = Mirador.viewer(mconfig, mplugins)\n        console.log(miradorInstance)\n\n        miradorInstance.store.subscribe(() => {\n          /*Enable keyboard nav of canvas controls*/\n          let zoomIns = document.querySelectorAll('[title=\"Zoom in\"]')\n          //console.log(zoomIns)\n          if(zoomIns.length) {\n            zoomIns[0].setAttribute(\"tabindex\", \"0\")\n          }\n          let zoomOuts = document.querySelectorAll('[title=\"Zoom out\"]')\n          //console.log(zoomOuts)\n          if(zoomOuts.length) {\n            zoomOuts[0].setAttribute(\"tabindex\", \"0\")\n          }\n          let resets = document.querySelectorAll('[title=\"Go home\"]')\n          //console.log(resets)\n          if(resets.length) {\n            resets[0].setAttribute(\"tabindex\", \"0\")\n          }\n          let fullscreens = document.querySelectorAll('[title=\"Toggle full page\"]')\n          //console.log(fullscreens)\n          if(fullscreens.length) {\n            fullscreens[0].setAttribute(\"tabindex\", \"0\")\n          }\n        })\n     \n  }\n}\n","import M3Viewer from \"../src/modules/m3_viewer.js\";\nM3Viewer.init();\n"],"names":["ImageTool","_Component","props","_this","_classCallCheck","_callSuper","state","open","handleChange","bind","_assertThisInitialized","handleClick","_inherits","key","value","_this$props","this","variant","setState","e","val","onChange","bubbleBg","_this$props2","children","containerId","label","max","min","type","windowId","foregroundColor","classes","width","toggled","id","concat","fade","React","style","display","MiradorMenuButton","onClick","backgroundColor","className","slider","Slider","orientation","indexOf","Component","defaultProps","compose","withStyles","_ref","palette","breakpoints","shades","main","borderRadius","top","marginTop","position","height","zIndex","marginLeft","padding","down","right","marginBottom","withWidth","ImageRotation","arguments","otherProps","_objectWithoutProperties","_excluded","Object","assign","RotateLeftIcon","RotateRightIcon","ImageFlip","flipped","SwapHorizIcon","color","MiradorImageTools","toggleState","toggleRotate","toggleFlip","handleReset","viewer","applyFilters","prevProps","viewConfig","param","updateViewport","_defineProperty","_this$props3","rotation","flip","brightness","contrast","saturate","grayscale","invert","_this$props4","_this$props4$viewConf","_this$props4$viewConf2","_this$props4$viewConf3","_this$props4$viewConf4","_this$props4$viewConf5","_this$props4$viewConf6","canvas","controlledFilters","newFilters","filter","split","some","includes","push","join","_this$props5","updateWindow","imageToolsOpen","_this$props6","_this$props6$viewConf","_this$props6$viewConf2","_this$props6$viewConf3","_this$props7","_this$props7$viewConf","_this2","_this$props8","enabled","theme","_this$props8$viewConf","_this$props8$viewConf2","_this$props8$viewConf3","_this$props8$viewConf4","_this$props8$viewConf5","_this$props8$viewConf6","_this$props8$viewConf7","t","getContrastText","isSmallDisplay","toggleButton","borderContainer","context","CloseSharpIcon","TuneSharpIcon","toggleButtonLabel","root","BrightnessIcon","ContrastIcon","transform","GradientIcon","TonalityIcon","InvertColorsIcon","ReplaySharpIcon","undefined","border","borderImageRight","borderImageBottom","replace","flexDirection","borderRight","borderImageSlice","borderImageSource","borderBottom","fontSize","MiradorImageToolsMenuItem","handleClose","MenuItem","imageToolsEnabled","ListItemIcon","ListItemText","primaryTypographyProps","de","collapse_open","collapse_close","greyscale","hide","revert","rotateLeft","rotateRight","saturation","show","en","it","fr","ja","sr","target","mapDispatchToProps","actions","mapStateToProps","getContainerId","getWindowConfig","getViewer","mode","component","withTheme","config","translations","_ref2","FullResDownload","canvasIndex","manifestId","console","log","url","filename","page","__jsonld","items","body","fetch","method","then","response","blob","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","remove","downloadAndCloseMenu","DownloadIcon","name","getCanvasIndex","getCurrentCanvas","windows","PDFDownload","FullPDFDownload","MiradorDownload","openDownloadDialog","openDialogAndCloseMenu","dispatch","dialogType","reducers","windowDialogs","length","action","_objectSpread","openDialog","RenderingDownloadLink","rendering","ListItem","disableGutters","divider","Link","rel","getLabel","getValue","getFormat","CanvasDownloadLinks","bounds","currentBounds","Math","floor","getWidth","getHeight","boundsUrl","getCanonicalImageUri","x","y","size","OSDReferences","get","current","viewport","osdViewport","getBounds","keys","reduce","object","ceil","infoResponse","json","_infoResponse$json","definedSizes","restrictDownloadOnSizeDefinition","viewType","definedSizesRestrictsDownload","sizes","uniqBy","fullImageUrl","fullImageLabel","thousandPixelWideImage","smallImageLabel","map","imageUrlForSize","canvasLabel","Typography","noWrap","h3","List","displayCurrentZoomLink","zoomedImageUrl","zoomedImageLabel","fullImageLink","thousandPixelWideLink","linksForDefinedSizes","getRenderings","ManifestDownloadLinks","renderings","MiradorDownloadDialog","manifest","getSequences","canvases","closeDialog","Dialog","container","querySelector","disableEnforceFocus","onClose","scroll","fullWidth","maxWidth","DialogTitle","disableTypography","h2","ScrollIndicatedDialogContent","DialogActions","Button","paddingBottom","getVisibleCanvases","canvasId","getCanvasLabel","selectInfoResponse","getManifestoInstance","miradorDownloadPlugin","getWindowViewType","DownloadWindowTopBarPluginMenu","anchorEl","handleMenuClick","handleMenuClose","event","currentTarget","PluginComponents","menuIcon","_this$state","windowPluginMenuId","selected","alignItems","justifyContent","Menu","anchorOrigin","horizontal","vertical","transformOrigin","PluginHook","MoreVertIcon","ctrlBtnSelected","withPlugins","_regeneratorRuntime","r","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","arg","call","h","l","f","s","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","callInvokeWithMethodAndArg","Error","done","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","_defineProperties","descriptor","_toPropertyKey","_getPrototypeOf","self","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","apply","Boolean","valueOf","ReferenceError","_setPrototypeOf","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptor","getOwnPropertyDescriptors","defineProperties","obj","toPrimitive","String","Number","_toPrimitive","asyncGeneratorStep","gen","reject","_next","_throw","info","error","_asyncToGenerator","fn","args","err","checkStreamsaverSupport","Response","WritableStream","isSecureContext","navigator","checkImageApiHasCors","_checkImageApiHasCors","_callee2","_images$0$Id","testImgResp","testImgData","_context2","images","t0","Uint8Array","arrayBuffer","t1","t2","PDIIIFMenuItem","instance","Constructor","hasChecked","allowPdfDownload","supportsFilesystemAPI","showSaveFilePicker","supportsStreamsaver","imageApiHasCors","protoProps","staticProps","_componentDidMount","subClass","superClass","_callee","canvasGroupings","setAllowPdfDownload","setEstimatedSize","estimatedSizeInBytes","_context","estimatePdfSize","disabled","renderMenuItemText","CircularProgress","progress","openPDIIIFDialog","_state$PDIIIF$windowI","_state$PDIIIF$windowI2","manifests","getCanvasGroupings","PDIIIF","PDFDownloadEnabled","Array","isArray","createRange","start","end","from","_","PDIIIFDialog","isDownloading","msg","preventDefault","returnValue","canvasIds","pageError","indexSpec","filteredCanvasIds","parseCanvasRanges","_this$state2","abortController","webWritable","abort","AbortController","signal","addEventListener","resetDownloadState","once","status","round","pagesWritten","totalPages","_this$state3","progressContainer","Box","mr","LinearProgress","minWidth","manifestLabel","_this$state4","suggestedName","date","Date","getYear","getMonth","getDate","downloadWithFilesystemAPI","downloadWithStreamsaver","savingError","pdfPath","_manifestConverter","_downloadWithStreamsaver","_downloadWithFilesystemAPI","canvasCount","canvasIdxs","Set","idxs","group","newIdxs","startsWith","parseInt","endsWith","parts","_parts$map2","_slicedToArray","num","find","out","has","mitmPath","streamSaver","prevState","_this$state5","handleBeforeUnload","handleUnload","removeEventListener","_callee3","file","_webWritable","_context3","types","description","accept","message","queryPermission","getFile","createWritable","manifestConverter","_x","_callee4","_context4","_x2","_callee6","coverPageEndpoint","_this$state6","_this3","_context6","attachAbortListener","_callee5","_context5","convertManifest","concurrency","filterCanvases","onProgress","updateProgress","_x3","_this$state7","estimatedSize","fileSizeText","bytes","decimals","dm","parseFloat","pow","toFixed","formatBytes","DialogContent","DialogContentText","renderProgress","TextField","margin","placeholder","handlePageChange","cancelDownload","downloadPDF","disabledButton","opacity","_state$config$mirador","_state$config$mirador2","getCanvases","miradorPDIIIFPlugin","getManifestTitle","PageNumPlugin","TargetComponent","targetProps","pageNum","queryParams","URLSearchParams","location","search","queryPageNum","set","history","pushState","toString","ViewPlugin","WindowViewSettings","ViewerNavigation","_createClass","hasNextCanvas","hasPreviousCanvas","setNextCanvas","setPreviousCanvas","viewingDirection","setCanvas","lastCanvas","firstCanvas","htmlDir","previousIconStyle","nextIconStyle","classNames","ns","dir","class","role","tabindex","title","SkipNextIcon","NavigationIcon","NavControlsPlugin","_Component2","_this$props$canvases","_this$state$selectOpt","_this$props$canvases2","_this$state$canvasIds","_this$state$canvasIds2","selectOptions","selectedOption","index","_prevProps$currentCan","currentCanvas","_step","_iterator","_createForOfIteratorHelper","forceUpdate","isEqual","left","Select","options","getNextCanvasGrouping","getPreviousCanvasGrouping","getSequenceViewingDirection","LegacySearchPlugin","query","results","currentResultIndex","currentCanvasIndex","resultsListOpen","resultsMenuOpen","getElementById","q","content","handleClear","queryString","background","autocomplete","autocorrect","autocapitalize","enterkeyhint","spellcheck","defaultValue","handleSearch","xmlns","fill","viewBox","ClearIcon","result","Card","CardHeader","CardMedia","image","ArrowBackIcon","paddingRight","Mirador","pageViewer","documentId","getAttribute","params","apiPrefix","mplugins","miradorViewPlugin","downloadMenuPlugin","fullResDownloadPlugin","pdfDownloadPlugin","fullPdfDownloadPlugin","miradorPDIIIFMenuItemPlugin","miradorPDIIIFDialogPlugin","miradorShareDialogPlugin","miradorDownloadDialogPlugin","_toConsumableArray","miradorImageToolsPlugin","pageNumPlugin","navControlsPlugin","legacySearchPlugin","mconfig","canvasNavigation","selectedTheme","themes","dark","primary","secondary","light","notification","hitCounter","default","highlights","section_divider","annotations","hidden","globalAlpha","strokeStyle","hovered","fillStyle","typography","body1","letterSpacing","lineHeight","body2","button","textTransform","caption","body1Next","body2Next","buttonNext","captionNext","overline","fontWeight","h1","h4","h5","h6","subtitle1","subtitle2","useNextVariants","overrides","MuiListSubheader","outline","MuiTooltip","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","MuiTouchRipple","childPulsate","animation","rippleVisible","MuiButtonBase","disableTouchRipple","MuiLink","underline","language","availableLanguages","ar","fa","kr","lt","nl","pl","vi","sv","bg","htmlSanitizationRuleSet","filteredMotivations","createGenerateClassNameOptions","productionPrefix","requests","preprocessors","postprocessors","view","allowClose","allowFullscreen","allowMaximize","allowTopMenuButton","allowWindowSideBar","authNewWindowCenter","sideBarPanel","defaultSidebarPanelHeight","defaultSidebarPanelWidth","defaultView","forceDrawAnnotations","hideWindowTitle","highlightAllAnnotations","showLocalePicker","sideBarOpen","switchCanvasOnSearch","panels","attribution","layers","views","behaviors","elastic","thumbnails","preferredFormats","thumbnailNavigation","defaultPosition","displaySettings","workspace","draggingEnabled","allowNewWindows","isWorkspaceAddVisible","exposeModeOn","showZoomControls","viewportPosition","workspaceControlPanel","galleryView","osdConfig","alwaysBlend","blendTime","preserveImageSizeOnResize","preserveViewport","zoomPerScroll","gestureSettingsMouse","scrollToZoom","clickToZoom","dblClickToZoom","gestureSettingsTouch","dragToPan","minScrollDeltaTime","clickTimeThreshold","zoomPerSecond","showNavigator","autoHideControls","showNavigationControl","navigatorPosition","showFullPageControl","export","catalog","companionWindows","elasticLayout","viewers","audioOptions","controls","crossOrigin","videoOptions","miradorInstance","store","subscribe","zoomIns","querySelectorAll","setAttribute","zoomOuts","resets","fullscreens","M3Viewer"],"sourceRoot":""}