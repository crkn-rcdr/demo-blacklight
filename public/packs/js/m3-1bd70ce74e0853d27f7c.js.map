{"version":3,"file":"js/m3-1bd70ce74e0853d27f7c.js","mappings":"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","sources":["webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/ImageTool.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/ImageRotation.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/ImageFlip.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/MiradorImageTools.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/MiradorImageToolsMenuItem.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/translations.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-image-tools/miradorImageToolsPlugin.js","webpack://demo-blacklight/./app/javascript/src/plugins/miradorPDIIIFMenuItem.js","webpack://demo-blacklight/./app/javascript/src/plugins/downloadMenu.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/downloadMenuPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/pageNumPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-window-view-settings/windowViewSettingsComponent.js","webpack://demo-blacklight/./app/javascript/src/plugins/mirador-window-view-settings/windowViewSettingsContainer.js","webpack://demo-blacklight/./app/javascript/src/plugins/miradorViewPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/navControls.jsx","webpack://demo-blacklight/./app/javascript/src/plugins/legacySearchPlugin.jsx","webpack://demo-blacklight/./app/javascript/src/modules/m3_viewer.js","webpack://demo-blacklight/./app/javascript/packs/m3.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport compose from 'lodash/flowRight';\r\nimport PropTypes from 'prop-types';\r\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\n/** Styles for withStyles HOC */\r\nconst styles = ({ palette, breakpoints }) => ({\r\n  slider: {\r\n    backgroundColor: fade(palette.shades.main, 0.8),\r\n    borderRadius: 25,\r\n    top: 48,\r\n    marginTop: 2,\r\n    position: 'absolute',\r\n    height: 150,\r\n    zIndex: 100,\r\n    marginLeft: 2,\r\n    padding: [[2, 7, 2, 7]],\r\n    [breakpoints.down('sm')]: {\r\n      top: 'auto',\r\n      right: 48,\r\n      width: 150,\r\n      height: 'auto',\r\n      marginTop: -46,\r\n      marginBottom: 2,\r\n      padding: [[4, 2, 4, 2]],\r\n    },\r\n  },\r\n});\r\n\r\nclass ImageTool extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: props.open,\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick() {\r\n    const { value, variant } = this.props;\r\n    switch (variant) {\r\n      case 'toggle':\r\n        this.handleChange({}, value === 0 ? 100 : 0);\r\n        break;\r\n      default:\r\n        this.setState((state) => ({\r\n          open: !state.open,\r\n        }));\r\n    }\r\n  }\r\n\r\n  handleChange(e, val) {\r\n    const { onChange } = this.props;\r\n    onChange(val);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      children, containerId, label, max, min, value, type, variant, windowId,\r\n      foregroundColor, classes, width,\r\n    } = this.props;\r\n    const { open } = this.state;\r\n\r\n    const toggled = variant === 'toggle' && value > 0;\r\n\r\n    const id = `${windowId}-${type}`;\r\n\r\n    let bubbleBg;\r\n    if (open || toggled) {\r\n      bubbleBg = fade(foregroundColor, open ? 0.1 : 0.25);\r\n    }\r\n\r\n    return (\r\n      <div style={{ display: 'inline-block' }}>\r\n        <MiradorMenuButton\r\n          id={`${id}-label`}\r\n          aria-label={label}\r\n          containerId={containerId}\r\n          onClick={this.handleClick}\r\n          aria-expanded={open}\r\n          aria-controls={id}\r\n          style={{ backgroundColor: bubbleBg }}\r\n        >\r\n          {children}\r\n        </MiradorMenuButton>\r\n\r\n        {open && (\r\n        <div\r\n          id={id}\r\n          aria-labelledby={`${id}-label`}\r\n          className={`MuiPaper-elevation4 ${classes.slider}`}\r\n        >\r\n          <Slider\r\n            orientation={['xs', 'sm'].indexOf(width) >= 0 ? 'horizontal' : 'vertical'}\r\n            min={min}\r\n            max={max}\r\n            value={value}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nImageTool.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  classes: PropTypes.object.isRequired,\r\n  containerId: PropTypes.string.isRequired,\r\n  foregroundColor: PropTypes.string,\r\n  label: PropTypes.string.isRequired,\r\n  min: PropTypes.number,\r\n  max: PropTypes.number,\r\n  onChange: PropTypes.func.isRequired,\r\n  open: PropTypes.bool,\r\n  type: PropTypes.string.isRequired,\r\n  value: PropTypes.number.isRequired,\r\n  variant: PropTypes.string,\r\n  windowId: PropTypes.string.isRequired,\r\n  width: PropTypes.oneOf(['lg', 'md', 'sm', 'xl', 'xs']).isRequired,\r\n};\r\n\r\nImageTool.defaultProps = {\r\n  foregroundColor: 'rgb(0, 0, 0)',\r\n  min: 0,\r\n  max: 100,\r\n  open: false,\r\n  variant: 'slider',\r\n};\r\n\r\nexport default compose(withStyles(styles), withWidth())(ImageTool);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\r\nimport RotateRightIcon from '@material-ui/icons/RotateRight';\r\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\r\n\r\nexport default class ImageRotation extends Component {\r\n  render() {\r\n    const { label, variant, ...otherProps } = this.props;\r\n    return (\r\n      <MiradorMenuButton\r\n        aria-label={label}\r\n        {...otherProps}\r\n      >\r\n        { variant === 'left' ? <RotateLeftIcon /> : <RotateRightIcon /> }\r\n      </MiradorMenuButton>\r\n    );\r\n  }\r\n}\r\n\r\nImageRotation.propTypes = {\r\n  containerId: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  variant: PropTypes.string.isRequired,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\r\nimport SwapHorizIcon from '@material-ui/icons/SwapHoriz';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\nexport default class ImageFlip extends Component {\r\n  render() {\r\n    const {\r\n      flipped, label, backgroundColor, foregroundColor, ...otherProps\r\n    } = this.props;\r\n\r\n    return (\r\n      <MiradorMenuButton\r\n        aria-label={label}\r\n        style={{ backgroundColor: flipped && fade(foregroundColor, 0.25) }}\r\n        {...otherProps}\r\n      >\r\n        <SwapHorizIcon style={{ color: flipped && backgroundColor }} />\r\n      </MiradorMenuButton>\r\n    );\r\n  }\r\n}\r\n\r\nImageFlip.propTypes = {\r\n  backgroundColor: PropTypes.string,\r\n  containerId: PropTypes.string.isRequired,\r\n  foregroundColor: PropTypes.string,\r\n  flipped: PropTypes.bool.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n};\r\n\r\nImageFlip.defaultProps = {\r\n  backgroundColor: 'rgb(255, 255, 255)',\r\n  foregroundColor: 'rgb(0, 0, 0)',\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport compose from 'lodash/flowRight';\r\nimport BrightnessIcon from '@material-ui/icons/Brightness5';\r\nimport TonalityIcon from '@material-ui/icons/Tonality';\r\nimport GradientIcon from '@material-ui/icons/Gradient';\r\nimport ContrastIcon from '@material-ui/icons/ExposureSharp';\r\nimport InvertColorsIcon from '@material-ui/icons/InvertColors';\r\nimport TuneSharpIcon from '@material-ui/icons/TuneSharp';\r\nimport CloseSharpIcon from '@material-ui/icons/CloseSharp';\r\nimport ReplaySharpIcon from '@material-ui/icons/ReplaySharp';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport withWidth from '@material-ui/core/withWidth';\r\nimport { MiradorMenuButton } from 'mirador/dist/es/src/components/MiradorMenuButton';\r\nimport ImageTool from './ImageTool';\r\nimport ImageRotation from './ImageRotation';\r\nimport ImageFlip from './ImageFlip';\r\n\r\n/** Styles for withStyles HOC */\r\nconst styles = ({ breakpoints, palette }) => {\r\n  const backgroundColor = palette.shades.main;\r\n  const foregroundColor = palette.getContrastText(backgroundColor);\r\n  const border = `1px solid ${fade(foregroundColor, 0.2)}`;\r\n  const borderImageRight = 'linear-gradient('\r\n    + 'to bottom, '\r\n    + `${fade(foregroundColor, 0)} 20%, `\r\n    + `${fade(foregroundColor, 0.2)} 20% 80%, `\r\n    + `${fade(foregroundColor, 0)} 80% )`;\r\n  const borderImageBottom = borderImageRight.replace('to bottom', 'to right');\r\n  return {\r\n    root: {\r\n      backgroundColor: fade(backgroundColor, 0.8),\r\n      borderRadius: 25,\r\n      position: 'absolute',\r\n      top: 8,\r\n      right: 8,\r\n      zIndex: 999,\r\n      display: 'flex',\r\n      flexDirection: 'row',\r\n      [breakpoints.down('sm')]: {\r\n        flexDirection: 'column',\r\n      },\r\n    },\r\n    borderContainer: {\r\n      border: 0,\r\n      borderRight: border,\r\n      borderImageSlice: 1,\r\n      borderImageSource: borderImageRight,\r\n      display: 'flex',\r\n      flexDirection: 'row',\r\n      [breakpoints.down('sm')]: {\r\n        flexDirection: 'column',\r\n        borderBottom: border,\r\n        borderRight: 'none',\r\n        borderImageSource: borderImageBottom,\r\n      },\r\n    },\r\n    toggleButtonLabel : {\r\n      fontSize: '0.8rem'\r\n    }\r\n  };\r\n};\r\n\r\nclass MiradorImageTools extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.toggleState = this.toggleState.bind(this);\r\n    this.toggleRotate = this.toggleRotate.bind(this);\r\n    this.toggleFlip = this.toggleFlip.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleReset = this.handleReset.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { viewer } = this.props;\r\n    if (viewer) this.applyFilters();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { viewConfig, viewer } = this.props;\r\n    if (viewer && viewConfig !== prevProps.viewConfig) this.applyFilters();\r\n  }\r\n\r\n  handleChange(param) {\r\n    const { updateViewport, windowId } = this.props;\r\n    return (value) => updateViewport(windowId, { [param]: value });\r\n  }\r\n\r\n  handleReset() {\r\n    const { updateViewport, windowId } = this.props;\r\n    const viewConfig = {\r\n      rotation: 0,\r\n      flip: false,\r\n      brightness: 100,\r\n      contrast: 100,\r\n      saturate: 100,\r\n      grayscale: 0,\r\n      invert: 0,\r\n    };\r\n\r\n    updateViewport(windowId, viewConfig);\r\n  }\r\n\r\n  applyFilters() {\r\n    const {\r\n      viewConfig: {\r\n        brightness = 100,\r\n        contrast = 100,\r\n        saturate = 100,\r\n        grayscale = 0,\r\n        invert = 0,\r\n      },\r\n      viewer: { canvas },\r\n    } = this.props;\r\n\r\n    if (!canvas) return;\r\n\r\n    const controlledFilters = ['brightness', 'contrast', 'saturate', 'grayscale', 'invert'];\r\n\r\n    const currentFilters = canvas.style.filter.split(' ');\r\n    const newFilters = currentFilters.filter(\r\n      (filter) => !controlledFilters.some((type) => filter.includes(type)),\r\n    );\r\n    newFilters.push(`brightness(${brightness}%)`);\r\n    newFilters.push(`contrast(${contrast}%)`);\r\n    newFilters.push(`saturate(${saturate}%)`);\r\n    newFilters.push(`grayscale(${grayscale}%)`);\r\n    newFilters.push(`invert(${invert}%)`);\r\n    canvas.style.filter = newFilters.join(' ');\r\n  }\r\n\r\n  toggleState() {\r\n    const { open, updateWindow, windowId } = this.props;\r\n\r\n    updateWindow(windowId, { imageToolsOpen: !open });\r\n  }\r\n\r\n  toggleRotate(value) {\r\n    const { updateViewport, viewConfig: { flip = false, rotation = 0 }, windowId } = this.props;\r\n\r\n    const offset = flip ? -1 * value : value;\r\n\r\n    updateViewport(windowId, { rotation: (rotation + offset) % 360 });\r\n  }\r\n\r\n  toggleFlip() {\r\n    const { updateViewport, viewConfig: { flip = false }, windowId } = this.props;\r\n\r\n    updateViewport(windowId, { flip: !flip });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      classes, containerId, enabled, open, viewer, windowId, width,\r\n      theme: { palette },\r\n      viewConfig: {\r\n        flip = false,\r\n        brightness = 100,\r\n        contrast = 100,\r\n        saturate = 100,\r\n        grayscale = 0,\r\n        invert = 0,\r\n      },\r\n      t,\r\n    } = this.props;\r\n\r\n    if (!viewer || !enabled) return null;\r\n\r\n    const backgroundColor = palette.shades.main;\r\n    const foregroundColor = palette.getContrastText(backgroundColor);\r\n    const isSmallDisplay = ['xs', 'sm'].indexOf(width) >= 0;\r\n\r\n    /** Button for toggling the menu */\r\n    const toggleButton = (\r\n      <div className={(isSmallDisplay && open) ? classes.borderContainer : ''}>\r\n        <MiradorMenuButton\r\n          aria-expanded={open}\r\n          aria-haspopup\r\n          aria-label={t('collapse', { context: open ? 'open' : 'close' })}\r\n          containerId={containerId}\r\n          onClick={this.toggleState}\r\n        >\r\n          { open ? <CloseSharpIcon /> : <TuneSharpIcon /> }\r\n          { open ? \"\" : <label className={classes.toggleButtonLabel}>Image Tools</label> }\r\n          \r\n        </MiradorMenuButton>\r\n      </div>\r\n    );\r\n    return (\r\n      <div className={`MuiPaper-elevation4 ${classes.root}`}>\r\n        {isSmallDisplay && toggleButton}\r\n        {open\r\n        && (\r\n        <React.Fragment>\r\n          <div className={classes.borderContainer}>\r\n            <ImageRotation\r\n              containerId={containerId}\r\n              label={t('rotateRight')}\r\n              onClick={() => this.toggleRotate(90)}\r\n              variant=\"right\"\r\n            />\r\n            <ImageRotation\r\n              containerId={containerId}\r\n              label={t('rotateLeft')}\r\n              onClick={() => this.toggleRotate(-90)}\r\n              variant=\"left\"\r\n            />\r\n            <ImageFlip\r\n              label={t('flip')}\r\n              onClick={this.toggleFlip}\r\n              flipped={flip}\r\n              containerId={containerId}\r\n            />\r\n          </div>\r\n          <div className={classes.borderContainer}>\r\n            <ImageTool\r\n              type=\"brightness\"\r\n              label={t('brightness')}\r\n              max={200}\r\n              windowId={windowId}\r\n              value={brightness}\r\n              foregroundColor={foregroundColor}\r\n              containerId={containerId}\r\n              onChange={this.handleChange('brightness')}\r\n            >\r\n              <BrightnessIcon />\r\n            </ImageTool>\r\n            <ImageTool\r\n              type=\"contrast\"\r\n              label={t('contrast')}\r\n              max={200}\r\n              windowId={windowId}\r\n              value={contrast}\r\n              foregroundColor={foregroundColor}\r\n              containerId={containerId}\r\n              onChange={this.handleChange('contrast')}\r\n            >\r\n              <ContrastIcon style={{ transform: 'rotate(180deg)' }} />\r\n            </ImageTool>\r\n            <ImageTool\r\n              type=\"saturate\"\r\n              label={t('saturation')}\r\n              max={200}\r\n              windowId={windowId}\r\n              value={saturate}\r\n              foregroundColor={foregroundColor}\r\n              containerId={containerId}\r\n              onChange={this.handleChange('saturate')}\r\n            >\r\n              <GradientIcon />\r\n            </ImageTool>\r\n            <ImageTool\r\n              type=\"grayscale\"\r\n              variant=\"toggle\"\r\n              label={t('greyscale')}\r\n              windowId={windowId}\r\n              value={grayscale}\r\n              backgroundColor={backgroundColor}\r\n              foregroundColor={foregroundColor}\r\n              containerId={containerId}\r\n              onChange={this.handleChange('grayscale')}\r\n            >\r\n              <TonalityIcon />\r\n            </ImageTool>\r\n            <ImageTool\r\n              type=\"invert\"\r\n              variant=\"toggle\"\r\n              label={t('invert')}\r\n              windowId={windowId}\r\n              value={invert}\r\n              foregroundColor={foregroundColor}\r\n              containerId={containerId}\r\n              onChange={this.handleChange('invert')}\r\n            >\r\n              <InvertColorsIcon />\r\n            </ImageTool>\r\n          </div>\r\n          <div className={isSmallDisplay ? '' : classes.borderContainer}>\r\n            <MiradorMenuButton\r\n              aria-label={t('revert')}\r\n              containerId={containerId}\r\n              onClick={this.handleReset}\r\n            >\r\n              <ReplaySharpIcon />\r\n            </MiradorMenuButton>\r\n          </div>\r\n        </React.Fragment>\r\n        )}\r\n        {!isSmallDisplay && toggleButton}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMiradorImageTools.propTypes = {\r\n  classes: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\r\n  containerId: PropTypes.string.isRequired,\r\n  enabled: PropTypes.bool,\r\n  open: PropTypes.bool,\r\n  t: PropTypes.func.isRequired,\r\n  theme: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\r\n  updateViewport: PropTypes.func.isRequired,\r\n  updateWindow: PropTypes.func.isRequired,\r\n  viewer: PropTypes.object, // eslint-disable-line react/forbid-prop-types\r\n  viewConfig: PropTypes.object, // eslint-disable-line react/forbid-prop-types\r\n  windowId: PropTypes.string.isRequired,\r\n  width: PropTypes.oneOf(['lg', 'md', 'sm', 'xl', 'xs']).isRequired,\r\n};\r\n\r\nMiradorImageTools.defaultProps = {\r\n  enabled: true,\r\n  open: true,\r\n  viewer: undefined,\r\n  viewConfig: {},\r\n};\r\n\r\n// Export without wrapping HOC for testing.\r\nexport const TestableImageTools = MiradorImageTools;\r\n\r\nexport default compose(withStyles(styles), withWidth())(MiradorImageTools);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport TuneSharpIcon from '@material-ui/icons/TuneSharp';\r\n\r\nconst MiradorImageToolsMenuItem = ({\r\n  enabled, handleClose, t, updateWindow, windowId,\r\n}) => {\r\n  const handleClickOpen = () => {\r\n    handleClose();\r\n    updateWindow(windowId, { imageToolsEnabled: !enabled });\r\n  };\r\n\r\n  return (\r\n    <MenuItem onClick={handleClickOpen}>\r\n      <ListItemIcon>\r\n        <TuneSharpIcon />\r\n      </ListItemIcon>\r\n      <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\r\n        { enabled ? t('hide') : t('show') }\r\n      </ListItemText>\r\n    </MenuItem>\r\n  );\r\n};\r\n\r\nMiradorImageToolsMenuItem.propTypes = {\r\n  enabled: PropTypes.bool,\r\n  handleClose: PropTypes.func.isRequired,\r\n  t: PropTypes.func.isRequired,\r\n  updateWindow: PropTypes.func.isRequired,\r\n  windowId: PropTypes.string.isRequired,\r\n};\r\n\r\nMiradorImageToolsMenuItem.defaultProps = {\r\n  enabled: true,\r\n};\r\n\r\nexport default MiradorImageToolsMenuItem;\r\n","const translations = {\r\n  de: {\r\n    brightness: 'Helligkeit',\r\n    collapse_open: 'Bildbearbeitung ausblenden',\r\n    collapse_close: 'Bildbearbeitung einblenden',\r\n    contrast: 'Kontrast',\r\n    flip: 'Spiegeln',\r\n    greyscale: 'Darstellung in Graustufen',\r\n    hide: 'Bildbearbeitung verbergen',\r\n    invert: 'Umkehrung der Farben',\r\n    revert: 'Einstellungen zurcksetzen',\r\n    rotateLeft: 'Rotation links',\r\n    rotateRight: 'Rotation rechts',\r\n    saturation: 'Sttigung',\r\n    show: 'Bildbearbeitung anzeigen',\r\n  },\r\n  en: {\r\n    brightness: 'Brightness',\r\n    collapse_open: 'Collapse image tools',\r\n    collapse_close: 'Expand image tools',\r\n    contrast: 'Contrast',\r\n    flip: 'Flip',\r\n    greyscale: 'Greyscale',\r\n    hide: 'Hide image tools',\r\n    invert: 'Invert colors',\r\n    revert: 'Revert image',\r\n    rotateLeft: 'Rotate left',\r\n    rotateRight: 'Rotate right',\r\n    saturation: 'Saturation',\r\n    show: 'Show image tools',\r\n  },\r\n  it: {\r\n    brightness: 'Luminosit',\r\n    collapse_open: 'Chiudere gli strumenti dell\\'immagine',\r\n    collapse_close: 'Espandi gli strumenti dell\\'immagine',\r\n    contrast: 'Contrasto',\r\n    flip: 'Inverti',\r\n    greyscale: 'Scala di grigio',\r\n    hide: 'Nascondi gli strumenti dell\\'immagine',\r\n    invert: 'Inverti colori',\r\n    revert: 'Ripristinare l\\'immagine',\r\n    rotateLeft: 'Ruota a sinistra',\r\n    rotateRight: 'Ruota a destra',\r\n    saturation: 'Saturazione',\r\n    show: 'Mostra gli strumenti dell\\'immagine',\r\n  },\r\n  fr: {\r\n    brightness: 'Luminosit',\r\n    collapse_open: 'Fermer les outils d\\'image',\r\n    collapse_close: 'Ouvrir les outils d\\'image',\r\n    contrast: 'Contraste',\r\n    flip: 'Miroir',\r\n    greyscale: 'Niveaux de gris',\r\n    hide: 'Masquer les outils d\\'image',\r\n    invert: 'Inverser les couleurs',\r\n    revert: 'Rinitialiser les rglages',\r\n    rotateLeft: 'Rotation vers la gauche',\r\n    rotateRight: 'Rotation vers la droite',\r\n    saturation: 'Saturation',\r\n    show: 'Afficher les outils d\\'image',\r\n  },\r\n  ja: {\r\n    brightness: '',\r\n    collapse_open: '',\r\n    collapse_close: '',\r\n    contrast: '',\r\n    flip: '',\r\n    greyscale: '',\r\n    hide: '',\r\n    invert: '',\r\n    revert: '',\r\n    rotateLeft: '',\r\n    rotateRight: '',\r\n    saturation: '',\r\n    show: '',\r\n  },\r\n  sr: {\r\n    brightness: '',\r\n    collapse_open: ' ',\r\n    collapse_close: ' ',\r\n    contrast: '',\r\n    flip: '',\r\n    greyscale: '',\r\n    hide: ' ',\r\n    invert: ' ',\r\n    revert: ' ',\r\n    rotateLeft: ' ',\r\n    rotateRight: ' ',\r\n    saturation: '',\r\n    show: ' ',\r\n  },\r\n  'zh-CN': {\r\n    brightness: '',\r\n    collapse_open: '',\r\n    collapse_close: '',\r\n    contrast: '',\r\n    flip: '',\r\n    greyscale: '',\r\n    hide: '',\r\n    invert: '',\r\n    revert: '',\r\n    rotateLeft: '',\r\n    rotateRight: '',\r\n    saturation: '',\r\n    show: '',\r\n  },\r\n  'zh-TW': {\r\n    brightness: '',\r\n    collapse_open: '',\r\n    collapse_close: '',\r\n    contrast: '',\r\n    flip: '',\r\n    greyscale: '',\r\n    hide: '',\r\n    invert: '',\r\n    revert: '',\r\n    rotateLeft: '',\r\n    rotateRight: '',\r\n    saturation: '',\r\n    show: '',\r\n  },\r\n};\r\n\r\nexport default translations;\r\n","import withTheme from '@material-ui/core/styles/withTheme';\r\nimport * as actions from 'mirador/dist/es/src/state/actions';\r\nimport { getWindowConfig, getViewer, getContainerId } from 'mirador/dist/es/src/state/selectors';\r\nimport MiradorImageTools from './MiradorImageTools';\r\nimport MiradorImageToolsMenuItem from './MiradorImageToolsMenuItem';\r\nimport translations from './translations';\r\n\r\nexport default [\r\n  {\r\n    target: 'OpenSeadragonViewer',\r\n    mapDispatchToProps: {\r\n      updateWindow: actions.updateWindow,\r\n      updateViewport: actions.updateViewport,\r\n    },\r\n    mapStateToProps: (state, { windowId }) => ({\r\n      containerId: getContainerId(state),\r\n      enabled: getWindowConfig(state, { windowId }).imageToolsEnabled || true,\r\n      open: getWindowConfig(state, { windowId }).imageToolsOpen || false,\r\n      viewConfig: getViewer(state, { windowId }) || {},\r\n    }),\r\n    mode: 'add',\r\n    component: withTheme(MiradorImageTools),\r\n    config: {\r\n      translations,\r\n    },\r\n  },\r\n  {\r\n    target: 'WindowTopBarPluginMenu',\r\n    component: MiradorImageToolsMenuItem,\r\n    mode: 'add',\r\n    mapDispatchToProps: {\r\n      updateWindow: actions.updateWindow,\r\n    },\r\n    mapStateToProps: (state, { windowId }) => ({\r\n      enabled: getWindowConfig(state, { windowId }).imageToolsEnabled || false,\r\n    }),\r\n  },\r\n];\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { getCanvasGroupings } from \"mirador/dist/es/src/state/selectors\";\r\nimport { estimatePdfSize } from \"pdiiif\";\r\n\r\n/**\r\n * Check support for streamsaver\r\n * Adapted from PDIIIF web example: https://github.com/jbaiter/pdiiif/blob/main/pdiiif-web/src/util.ts\r\n */\r\nfunction checkStreamsaverSupport() {\r\n  try {\r\n    // Our usecase requires WriteableStream\r\n    new Response(new WritableStream());\r\n    if (isSecureContext && !(\"serviceWorker\" in navigator)) {\r\n      return false;\r\n    }\r\n  } catch (err) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * Check image API has CORS\r\n * Adapted from PDIIIF web example: https://github.com/jbaiter/pdiiif/blob/main/pdiiif-web/src/iiif.ts\r\n * @returns {boolean} true if image API has CORS\r\n */\r\nasync function checkImageApiHasCors() {\r\n  try {\r\n    let testImgResp = await fetch(images[0][\"@id\"] ?? images[0].id);\r\n    let testImgData = new Uint8Array(await testImgResp.arrayBuffer());\r\n    return testImgData[0] !== undefined ? true : false;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\n// select an icon from material icons to import and use: https://v4.mui.com/components/material-icons/\r\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\r\n\r\nconst dialogReducer = (state = {}, action) => {\r\n  if (action.type === \"OPEN_WINDOW_DIALOG\") {\r\n    return {\r\n      ...state,\r\n      [action.windowId]: {\r\n        openDialog: action.dialogType,\r\n      },\r\n    };\r\n  }\r\n\r\n  if (action.type === \"CLOSE_WINDOW_DIALOG\") {\r\n    return {\r\n      ...state,\r\n      [action.windowId]: {\r\n        openDialog: null,\r\n      },\r\n    };\r\n  }\r\n  return state;\r\n};\r\n\r\nconst PDIIIFReducer = (state = {}, action) => {\r\n  if (action.type === \"PDIIIF/ALLOW_PDF_DOWNLOAD\") {\r\n    return {\r\n      ...state,\r\n      [action.windowId]: {\r\n        ...state[action.windowId],\r\n        PDFDownloadEnabled: true,\r\n      },\r\n    };\r\n  }\r\n  if (action.type === \"PDIIIF/SET_ESTIMATED_SIZE\") {\r\n    var estimatedSizeInBytes = action.size;\r\n    if (\r\n      typeof action.size === 'object' &&\r\n      !Array.isArray(action.size) &&\r\n      action.size !== null\r\n    ) {\r\n        if ('size' in action.size) {\r\n          estimatedSizeInBytes = action.size.size;\r\n        }\r\n    }\r\n    return {\r\n      ...state,\r\n      [action.windowId]: {\r\n        ...state[action.windowId],\r\n        estimatedSizeInBytes: estimatedSizeInBytes,\r\n      },\r\n    };\r\n  }\r\n  return state;\r\n};\r\n\r\nconst mapStateToProps = (state, { windowId }) => ({\r\n  manifest: state.manifests[state.windows[windowId].manifestId],\r\n  canvasGroupings: getCanvasGroupings(state, { windowId }),\r\n  allowPdfDownload: state.PDIIIF[windowId]?.PDFDownloadEnabled ?? false,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\r\n  setAllowPdfDownload: () =>\r\n    dispatch({ type: \"PDIIIF/ALLOW_PDF_DOWNLOAD\", windowId }),\r\n  setEstimatedSize: (size) =>\r\n    dispatch({ type: \"PDIIIF/SET_ESTIMATED_SIZE\", windowId, size }),\r\n  openDialog: () =>\r\n    dispatch({ type: \"OPEN_WINDOW_DIALOG\", windowId, dialogType: \"PDIIIF\" }),\r\n});\r\n\r\nclass PDIIIFMenuItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasChecked: false,\r\n      supportsFilesystemAPI: typeof showSaveFilePicker === \"function\",\r\n      supportsStreamsaver: checkStreamsaverSupport(),\r\n      imageApiHasCors: checkImageApiHasCors(),\r\n    };\r\n  }\r\n\r\n  openDialogAndCloseMenu() {\r\n    const { handleClose, openDialog } = this.props;\r\n\r\n    openDialog();\r\n    handleClose();\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const {\r\n      manifest,\r\n      canvasGroupings,\r\n      setAllowPdfDownload,\r\n      allowPdfDownload,\r\n      setEstimatedSize,\r\n    } = this.props;\r\n    const { supportsFilesystemAPI, supportsStreamsaver, imageApiHasCors } =\r\n      this.state;\r\n\r\n    // If already allowed, don't check again\r\n    // Don't allow PDF download if neither Filesystem API or Streamsaver are supported\r\n    // Or if image API doesn't have CORS headers\r\n    if (\r\n      allowPdfDownload ||\r\n      (!supportsFilesystemAPI && !supportsStreamsaver) ||\r\n      !imageApiHasCors\r\n    ) {\r\n      this.setState({ hasChecked: true });\r\n      return;\r\n    }\r\n\r\n    if (!manifest?.error && manifest?.json) {\r\n      // Only show PDF's for PTO's\r\n      if (canvasGroupings.length > 1) {\r\n        // Check size can be estimated\r\n        const estimatedSizeInBytes = await estimatePdfSize({\r\n          manifest: manifest.json,\r\n          maxWidth: 1500,\r\n        });\r\n\r\n        // Estimated size, or 0\r\n        // N.B. Sometimes this is NaN, but not sure what triggers this\r\n        // it seems to be be caused bug in PDIIIIF trying to divide 0 by 0\r\n        if (estimatedSizeInBytes !== 0) {\r\n          setAllowPdfDownload();\r\n          setEstimatedSize(estimatedSizeInBytes);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.setState({ hasChecked: true });\r\n  }\r\n\r\n  renderMenuItemText = () => {\r\n    const { hasChecked } = this.state;\r\n    const { allowPdfDownload } = this.props;\r\n\r\n    if (!hasChecked) {\r\n      return \"Loading non-searchable PDF options\";\r\n    }\r\n\r\n    if (allowPdfDownload) {\r\n      return \"Range of images in a non-searchable PDF\";\r\n    }\r\n\r\n    return \"Non-searchable PDF Unavailable\";\r\n  };\r\n\r\n  render() {\r\n    const { classes, allowPdfDownload } = this.props;\r\n    const { hasChecked } = this.state;\r\n    return (\r\n      <div>\r\n        <MenuItem \r\n          tabIndex=\"0\"\r\n          disabled={!hasChecked || !allowPdfDownload}\r\n          onClick={() => this.openDialogAndCloseMenu()}\r\n        >\r\n          <ListItemIcon>\r\n            <DownloadIcon />\r\n          </ListItemIcon>\r\n          <ListItemText primaryTypographyProps={{ variant: \"body1\" }}>\r\n            {this.renderMenuItemText()}\r\n          </ListItemText>\r\n          {!hasChecked && (\r\n            <CircularProgress size={15} className={classes.progress} />\r\n          )}\r\n        </MenuItem>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPDIIIFMenuItem.propTypes = {\r\n  allowPdfDownload: PropTypes.bool,\r\n  canvasGroupings: PropTypes.array.isRequired,\r\n  handleClose: PropTypes.func,\r\n  openPDIIIFDialog: PropTypes.func,\r\n  manifest: PropTypes.object.isRequired,\r\n  setAllowPdfDownload: PropTypes.func.isRequired,\r\n  setEstimatedSize: PropTypes.func.isRequired,\r\n};\r\n\r\nPDIIIFMenuItem.defaultProps = {\r\n  handleClose: () => {},\r\n  openPDIIIFDialog: () => {},\r\n};\r\n\r\nconst styles = () => ({\r\n  progress: {\r\n    marginLeft: \"2px\",\r\n  },\r\n});\r\n\r\nexport default {\r\n  target: \"WindowTopBarShareMenu\",\r\n  mode: \"add\",\r\n  name: \"PDIIIFMenuItem\",\r\n  component: withStyles(styles)(PDIIIFMenuItem),\r\n  mapDispatchToProps,\r\n  mapStateToProps,\r\n  reducers: {\r\n    windowDialogs: dialogReducer,\r\n    PDIIIF: PDIIIFReducer,\r\n  },\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVertSharp';\r\nimport { PluginHook } from 'mirador/dist/es/src/components/PluginHook';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\r\nimport PDIIIFMenuItem from \"./miradorPDIIIFMenuItem\";\r\n/**\r\n *\r\n */\r\nexport class DownloadWindowTopBarPluginMenu extends Component {\r\n  downloadFile(url, filename) {\r\n    fetch(url, {\r\n        method: 'GET'\r\n    })\r\n    .then(response => response.blob())\r\n    .then(blob => {\r\n        var url = window.URL.createObjectURL(blob);\r\n        var a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a); // we need to append the element to the dom -> otherwise it will not work in firefox\r\n        a.click();    \r\n        a.remove();  //afterwards we remove the element again         \r\n    });\r\n  }\r\n\r\n  downloadSingleImage() {\r\n    const { canvasIndex, manifestId, canvas } = this.props;\r\n    console.log(\"c\", canvas)\r\n    console.log(\"m\", manifestId)\r\n    let page = canvasIndex + 1\r\n    this.downloadFile(canvas.__jsonld.items[0].items[0].body.id, \"oocihm.84056.\"+page+\".jpg\") \r\n  }\r\n\r\n  downloadSinglePdf() {\r\n    const { handleClose, canvasIndex, manifestId } = this.props\r\n    const pathname = new URL(manifestId).pathname\r\n    const parts = pathname.split('/')\r\n    const id = parts[parts.length - 2]\r\n    console.log(\"/dl/\" + id)\r\n    fetch(\"/dl/\" + id, {\r\n      method: 'GET'\r\n    })\r\n    .then((response) => response.json())\r\n    .then(data => {\r\n      let page = canvasIndex + 1\r\n      console.log(\"data\", data)\r\n      if(data[\"canvasDownloadUris\"]?.length) {\r\n        this.downloadFile(data[\"canvasDownloadUris\"][canvasIndex], id + \".\" +page+\".pdf\") \r\n      } else {\r\n        alert(\"error\")\r\n      } \r\n    })\r\n  }\r\n\r\n  downloadFullPDF() {\r\n    const { handleClose, manifestId } = this.props\r\n    const pathname = new URL(manifestId).pathname\r\n    const parts = pathname.split('/')\r\n    const id = parts[parts.length - 2]\r\n    console.log(\"/dl/\" + id)\r\n    fetch(\"/dl/\" + id, {\r\n      method: 'GET'\r\n    })\r\n    .then((response) => response.json())\r\n    .then(data => {\r\n      if(data[\"docPdfUri\"]?.length) {\r\n        this.downloadFile(data[\"docPdfUri\"], id + \".pdf\") \r\n      } else {\r\n        alert(\"error downloading full pdf\")\r\n      } \r\n    })\r\n  }\r\n\r\n  /**\r\n   * render component\r\n   */\r\n  render() {\r\n    const { PluginComponents, windowId } = this.props\r\n    const windowPluginMenuId = `window-plugin-menu_${windowId}`;\r\n    if (!PluginComponents || PluginComponents.length === 0) return null;\r\n    return (\r\n      <>\r\n<ul class=\"mv-menu-nav nav\" aria-label=\"Item navigation buttons\">\r\n  <li class=\"nav-item\">\r\n    <a \r\n    class=\"nav-link MuiButtonBase-root MuiIconButton-root mirador-first-canvas-button btn btn-outline\" \r\n    tabindex=\"0\">\r\n      <button id=\"downloads-button\" \r\n              type=\"button\" \r\n              tabIndex=\"0\"\r\n              class=\"MuiFormControlLabel-root MuiFormControlLabel-labelPlacementBottom\" \r\n              data-bs-toggle=\"modal\" \r\n              data-bs-target=\"#downloadsModal\">\r\n        <DownloadIcon />\r\n        <span>Download</span>\r\n      </button>\r\n    </a>\r\n  </li>\r\n</ul>\r\n\r\n<div class=\"modal fade\" id=\"downloadsModal\" tabindex=\"-1\" aria-labelledby=\"downloadsModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"downloadsModalLabel\">Download Options</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\" id={windowPluginMenuId}>\r\n        <ul class=\"mv-menu-nav nav\" aria-label=\"Item navigation buttons\">\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" tabindex=\"0\"\r\n            onKeyDown={ (e) => {\r\n              console.log(\"keydown\", e)\r\n              if (e.key === 'Enter' ) {\r\n                console.log(\"is enter\")\r\n                this.downloadSingleImage()\r\n              }\r\n            }}>\r\n              <MenuItem \r\n                onClick={() => this.downloadSingleImage()}>\r\n                <ListItemIcon>\r\n                  <DownloadIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\r\n                  Current image in full resolution\r\n                </ListItemText>\r\n              </MenuItem>\r\n            </a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" tabindex=\"0\"\r\n            onKeyDown={ (e) => {\r\n              console.log(\"keydown\", e)\r\n              if (e.key === 'Enter' ) {\r\n                console.log(\"is enter\")\r\n                this.downloadSinglePdf()\r\n              }\r\n            }}>\r\n              <MenuItem onClick={() => this.downloadSinglePdf()}>\r\n                <ListItemIcon>\r\n                  <DownloadIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\r\n                  Current image as a searchable PDF\r\n                </ListItemText>\r\n              </MenuItem>\r\n            </a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" tabindex=\"0\"\r\n            onKeyDown={ (e) => {\r\n              console.log(\"keydown\", e)\r\n              if (e.key === 'Enter' ) {\r\n                console.log(\"is enter\")\r\n                this.downloadFullPDF()\r\n              }\r\n            }}>\r\n              <MenuItem onClick={() => this.downloadFullPDF()}>\r\n                <ListItemIcon>\r\n                  <DownloadIcon />\r\n                </ListItemIcon>\r\n                <ListItemText primaryTypographyProps={{ variant: 'body1' }}>\r\n                  All images as a searchable PDF\r\n                </ListItemText>\r\n              </MenuItem>\r\n            </a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            \r\n          </li>\r\n        </ul>\r\n        <PluginHook {...this.props} />\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nDownloadWindowTopBarPluginMenu.propTypes = {\r\n  container: PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\r\n  menuIcon: PropTypes.element,\r\n  open: PropTypes.bool,\r\n  PluginComponents: PropTypes.arrayOf(\r\n    PropTypes.node,\r\n  ),\r\n  t: PropTypes.func.isRequired,\r\n  windowId: PropTypes.string.isRequired,\r\n  canvasIndex: PropTypes.number,\r\n  canvas: PropTypes.object,\r\n  manifestId: PropTypes.string\r\n};\r\n\r\nDownloadWindowTopBarPluginMenu.defaultProps = {\r\n  container: null,\r\n  menuIcon: <MoreVertIcon />,\r\n  open: false,\r\n  PluginComponents: [],\r\n};\r\n\r\nexport default {\r\n  target: 'WindowTopBarPluginMenu',\r\n  mode: 'wrap',\r\n  component: DownloadWindowTopBarPluginMenu\r\n};\r\n","'use strict';\r\nimport React from 'react';\r\nimport { withStyles } from '@material-ui/core';\r\nimport { withPlugins } from 'mirador/dist/es/src/extend/withPlugins';\r\nimport { DownloadWindowTopBarPluginMenu } from './downloadMenu.jsx';\r\nimport { getContainerId } from 'mirador/dist/es/src/state/selectors';\r\nimport DownloadIcon from '@material-ui/icons/VerticalAlignBottomSharp';\r\nimport {\r\n  getCanvasIndex, \r\n  getCurrentCanvas,\r\n} from 'mirador/dist/es/src/state/selectors';\r\n\r\nconst WindowTopBarShareMenu = (props) => (\r\n  <DownloadWindowTopBarPluginMenu\r\n    {...props}\r\n    t={() => 'Download options'}\r\n    menuIcon={<DownloadIcon />}\r\n  />\r\n)\r\n\r\n/**\r\n *\r\n * @param theme\r\n * @returns {{ctrlBtn: {margin: (number|string)}}}\r\n */\r\nconst styles = theme => ({\r\n  ctrlBtnSelected: {\r\n    backgroundColor: theme.palette.action.selected,\r\n  },\r\n});\r\n\r\nconst ImprovedWindowTopBarShareMenu = withStyles(styles)(\r\n  withPlugins('WindowTopBarShareMenu')(\r\n    WindowTopBarShareMenu\r\n  )\r\n);\r\n\r\n/**\r\n * mapStateToProps - to hook up connect\r\n */\r\nconst mapStateToProps = (state, props) => {\r\n  const { windowId } = props;\r\n  const containerId = getContainerId(state)\r\n  const canvasIndex = getCanvasIndex(state, { windowId })\r\n  const canvas = getCurrentCanvas(state, { windowId })\r\n  const manifestId = state.windows[windowId].manifestId\r\n  return {\r\n    containerId,\r\n    canvasIndex,\r\n    canvas,\r\n    manifestId\r\n  };\r\n};\r\n\r\n\r\nexport default {\r\n  component: ImprovedWindowTopBarShareMenu,\r\n  mapStateToProps,\r\n  mode: 'add',\r\n  name: 'WindowTopBarShareMenu',\r\n  target: 'WindowTopBarPluginArea',\r\n};\r\n","import React, { Component } from 'react'\r\nimport PropTypes from \"prop-types\"\r\nimport {\r\n  getCanvasIndex,\r\n} from 'mirador/dist/es/src/state/selectors'\r\n\r\nexport class PageNumPlugin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n     TargetComponent, targetProps\r\n    } = this.props;\r\n\r\n    return (\r\n      <TargetComponent {...targetProps} />\r\n    )\r\n  }\r\n}\r\n\r\nPageNumPlugin.propTypes = {\r\n  canvasIndex: PropTypes.number\r\n};\r\n\r\n/**\r\n * mapStateToProps - to hook up connect\r\n * @memberof Window\r\n * @private\r\n */\r\nconst mapStateToProps = (state, props) => {\r\n  const { windowId } = props;\r\n  const canvasIndex = getCanvasIndex(state, { windowId });\r\n  let pageNum = canvasIndex + 1\r\n  let queryParams = new URLSearchParams(window.location.search)\r\n  const queryPageNum = queryParams.get(\"pageNum\")\r\n  if(typeof queryPageNum !== \"undefined\" && pageNum !== parseInt(queryPageNum)) {\r\n    queryParams.set(\"pageNum\", pageNum)\r\n    history.pushState(null, null, \"?\"+queryParams.toString())\r\n  }\r\n  return {\r\n    canvasIndex\r\n  };\r\n};\r\n\r\n\r\nexport default {\r\n  target: 'WindowCanvasNavigationControls',\r\n  mode: 'wrap',\r\n  component: PageNumPlugin,\r\n  mapStateToProps\r\n};\r\n","import React, { Component } from 'react';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport SingleIcon from '@material-ui/icons/CropOriginalSharp';\r\nimport ScrollViewIcon from '@material-ui/icons/ViewColumn';\r\nimport PropTypes from 'prop-types';\r\nimport BookViewIcon from 'mirador/dist/es/src/components//icons/BookViewIcon';\r\nimport GalleryViewIcon from 'mirador/dist/es/src/components//icons/GalleryViewIcon';\r\n\r\n/**\r\n *\r\n */\r\nexport class WindowViewSettings extends Component {\r\n  /**\r\n   * constructor -\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  handleChange(value) {\r\n    const { windowId, setWindowViewType } = this.props;\r\n\r\n    setWindowViewType(windowId, value);\r\n  }\r\n\r\n  /**\r\n   * render\r\n   *\r\n   * @return {type}  description\r\n   */\r\n  render() {\r\n    const {\r\n      classes, handleClose, t, windowViewType, viewTypes,\r\n    } = this.props;\r\n\r\n    const iconMap = {\r\n      book: BookViewIcon,\r\n      gallery: GalleryViewIcon,\r\n      scroll: ScrollViewIcon,\r\n      single: SingleIcon,\r\n    };\r\n\r\n    /** Suspiciously similar to a component, yet if it is invoked through JSX\r\n        none of the click handlers work? */\r\n    const menuItem = ({ value, Icon }) => ( \r\n      <li class=\"nav-item\">\r\n        <a class=\"nav-link\" tabindex=\"0\"\r\n        onKeyDown={ (e) => {\r\n          console.log(\"keydown\", e)\r\n          if (e.key === 'Enter' ) {\r\n            console.log(\"is enter\")\r\n            this.handleChange(value)\r\n            handleClose()\r\n          }\r\n        }}>\r\n          <MenuItem\r\n            key={value}\r\n            className={classes.MenuItem}\r\n            autoFocus={windowViewType === value}\r\n            onClick={() => { this.handleChange(value); handleClose(); }}\r\n          >\r\n            <FormControlLabel\r\n              value={value}\r\n              classes={{ label: windowViewType === value ? classes.selectedLabel : classes.label }}\r\n              control={<Icon color={windowViewType === value ? 'secondary' : undefined} />}\r\n              label={t(value)}\r\n              labelPlacement=\"bottom\"\r\n            />\r\n          </MenuItem>\r\n        </a>\r\n      </li> \r\n    );\r\n\r\n    if (viewTypes.length === 0) return null;\r\n    return (\r\n      <>\r\n        <ListSubheader role=\"presentation\" disableSticky tabIndex=\"-1\">{t('view')}</ListSubheader>\r\n        <ul class=\"mv-menu-nav nav\" aria-label=\"Item navigation buttons\">    \r\n            { viewTypes.map(value => menuItem({ Icon: iconMap[value], value })) }\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nWindowViewSettings.propTypes = {\r\n  classes: PropTypes.objectOf(PropTypes.string).isRequired,\r\n  handleClose: PropTypes.func,\r\n  setWindowViewType: PropTypes.func.isRequired,\r\n  t: PropTypes.func,\r\n  viewTypes: PropTypes.arrayOf(PropTypes.string),\r\n  windowId: PropTypes.string.isRequired,\r\n  windowViewType: PropTypes.string.isRequired,\r\n};\r\nWindowViewSettings.defaultProps = {\r\n  handleClose: () => {},\r\n  t: key => key,\r\n  viewTypes: [],\r\n};","import { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { withPlugins } from 'mirador/dist/es/src/extend/withPlugins';\r\nimport * as actions from 'mirador/dist/es/src/state/actions';\r\nimport { getAllowedWindowViewTypes, getWindowViewType } from 'mirador/dist/es/src/state/selectors';\r\nimport { WindowViewSettings } from './windowViewSettingsComponent';\r\n\r\n/**\r\n * mapDispatchToProps - used to hook up connect to action creators\r\n * @memberof ManifestListItem\r\n * @private\r\n */\r\nconst mapDispatchToProps = { setWindowViewType: actions.setWindowViewType };\r\n\r\n/**\r\n * mapStateToProps - to hook up connect\r\n * @memberof WindowViewer\r\n * @private\r\n */\r\nconst mapStateToProps = (state, { windowId }) => (\r\n  {\r\n    viewTypes: getAllowedWindowViewTypes(state, { windowId }),\r\n    windowViewType: getWindowViewType(state, { windowId }),\r\n  }\r\n);\r\n\r\n/** */\r\nconst styles = theme => ({\r\n  label: {\r\n    borderBottom: '2px solid transparent',\r\n  },\r\n  MenuItem: {\r\n    display: 'inline-block',\r\n  },\r\n  selectedLabel: {\r\n    borderBottom: `2px solid ${theme.palette.secondary.main}`,\r\n    color: theme.palette.secondary.main,\r\n  },\r\n});\r\n\r\nconst enhance = compose(\r\n  withStyles(styles),\r\n  withTranslation(null, { withRef: true }),\r\n  connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }),\r\n  withPlugins('WindowViewSettings'),\r\n);\r\n\r\nexport default enhance(WindowViewSettings);","import React, { Component } from 'react';\r\nimport WindowViewSettings from './mirador-window-view-settings/windowViewSettingsContainer';\r\n\r\n/**\r\n */\r\nexport class ViewPlugin extends Component {\r\n  /**\r\n   * render\r\n   * @return\r\n   */\r\n  render() {\r\n    const {\r\n      handleClose, windowId\r\n    } = this.props;\r\n\r\n    return (\r\n      <WindowViewSettings windowId={windowId} handleClose={handleClose} />\r\n    );\r\n  }\r\n}\r\n\r\nexport default {\r\n  component: ViewPlugin,\r\n  mode: 'add',\r\n  name: 'ViewPlugin',\r\n  target: 'WindowTopBarPluginArea',\r\n};","import React, { Component } from 'react'\r\nimport PropTypes from \"prop-types\"\r\nimport NavigationIcon from '@material-ui/icons/NavigateNext';\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\r\nimport classNames from 'classnames';\r\nimport ns from 'mirador/dist/es/src/config/css-ns';\r\nimport Select from 'react-select';\r\nimport * as actions from 'mirador/dist/es/src/state/actions';\r\nimport {\r\n  getSequenceViewingDirection,\r\n  getNextCanvasGrouping,\r\n  getPreviousCanvasGrouping,\r\n  getCurrentCanvas,\r\n  getCanvases\r\n} from 'mirador/dist/es/src/state/selectors';\r\nimport isEqual from 'lodash/isEqual'\r\n\r\n/**\r\n */\r\nclass ViewerNavigation extends Component {\r\n  /**\r\n   * Renders things\r\n   */\r\n  render() {\r\n    const {\r\n      hasNextCanvas, hasPreviousCanvas, setNextCanvas, setPreviousCanvas, \r\n      viewingDirection, setCanvas, lastCanvas, firstCanvas\r\n    } = this.props;\r\n\r\n    let htmlDir = 'ltr';\r\n    let previousIconStyle = {};\r\n    let nextIconStyle = {};\r\n    switch (viewingDirection) {\r\n      case 'top-to-bottom':\r\n        previousIconStyle = { transform: 'rotate(270deg)' };\r\n        nextIconStyle = { transform: 'rotate(90deg)' };\r\n        break;\r\n      case 'bottom-to-top':\r\n        previousIconStyle = { transform: 'rotate(90deg)' };\r\n        nextIconStyle = { transform: 'rotate(270deg)' };\r\n        break;\r\n      case 'right-to-left':\r\n        htmlDir = 'rtl';\r\n        previousIconStyle = {};\r\n        nextIconStyle = { transform: 'rotate(180deg)' };\r\n        break;\r\n      default:\r\n        previousIconStyle = { transform: 'rotate(180deg)' };\r\n        nextIconStyle = {};\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={classNames(ns('osd-navigation-custom'))}\r\n        dir={htmlDir}\r\n      >\r\n        <ul class=\"nav nav-pills\" aria-label=\"Item navigation buttons\">\r\n          <li class=\"nav-item\">\r\n            <a \r\n            class=\"nav-link MuiButtonBase-root MuiIconButton-root mirador-first-canvas-button btn btn-outline\" \r\n            tabindex=\"0\"\r\n            aria-label=\"Last Image\" \r\n            title=\"First Image\"\r\n            disabled={!hasPreviousCanvas}\r\n            onKeyDown={ (e) => {\r\n              if (e.key === 'Enter' ) {\r\n                hasPreviousCanvas && setCanvas(firstCanvas)\r\n              }\r\n            }}\r\n            onClick={() => { hasPreviousCanvas && setCanvas(firstCanvas); }}>\r\n              <SkipNextIcon style={previousIconStyle} />\r\n            </a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a \r\n            class=\"nav-link MuiButtonBase-root MuiIconButton-root mirador-first-canvas-button btn btn-outline\" \r\n            tabindex=\"0\" \r\n            aria-label=\"Previous Image\" \r\n            title=\"Previous Image\"\r\n            disabled={!hasPreviousCanvas}\r\n            onKeyDown={ (e) => {\r\n              if (e.key === 'Enter' ) {\r\n                hasPreviousCanvas && setPreviousCanvas()\r\n              }\r\n            }}\r\n            onClick={() => { hasPreviousCanvas && setPreviousCanvas(); }}>\r\n              <NavigationIcon style={previousIconStyle} />\r\n            </a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a \r\n            class=\"nav-link MuiButtonBase-root MuiIconButton-root mirador-first-canvas-button btn btn-outline\" \r\n            tabindex=\"0\" \r\n            aria-label=\"Next Image\" \r\n            title=\"Next Image\"\r\n            disabled={!hasNextCanvas}\r\n            onKeyDown={ (e) => {\r\n              if (e.key === 'Enter' ) {\r\n                hasNextCanvas && setNextCanvas()\r\n              }\r\n            }}\r\n            onClick={() => { hasNextCanvas && setNextCanvas(); }}>\r\n              <NavigationIcon style={nextIconStyle} />\r\n            </a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a \r\n            class=\"nav-link MuiButtonBase-root MuiIconButton-root mirador-first-canvas-button btn btn-outline\" \r\n            tabindex=\"0\" \r\n            aria-label=\"Last Image\" \r\n            title=\"Last Image\"\r\n            disabled={!hasNextCanvas}\r\n            onKeyDown={ (e) => {\r\n              if (e.key === 'Enter' ) {\r\n                hasNextCanvas && setCanvas(lastCanvas)\r\n              }\r\n            }}\r\n            onClick={() => { hasNextCanvas && setCanvas(lastCanvas); }}>\r\n            <SkipNextIcon style={nextIconStyle} />\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nViewerNavigation.propTypes = {\r\n  hasNextCanvas: PropTypes.bool,\r\n  hasPreviousCanvas: PropTypes.bool,\r\n  setNextCanvas: PropTypes.func,\r\n  setPreviousCanvas: PropTypes.func,\r\n  setCanvas: PropTypes.func,\r\n  t: PropTypes.func.isRequired,\r\n  viewingDirection: PropTypes.string,\r\n  firstCanvas: PropTypes.string,\r\n  lastCanvas: PropTypes.string,\r\n};\r\n\r\nexport class NavControlsPlugin extends Component {\r\n  state = {\r\n    firstCanvas: \"\",\r\n    lastCanvas: \"\",\r\n    selectOptions: [],\r\n    selectedOption: null\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.selectOptions = this.props.canvases?.map((canvas, index) => {\r\n      return {\r\n        value: canvas.id,\r\n        label: `Image ${index+1}`\r\n      }\r\n    })\r\n    this.state.selectedOption =  this.state.selectOptions?.[0]\r\n    this.state.canvasIds = this.props.canvases?.map((canvas) => canvas.id)\r\n    this.state.firstCanvas = this.state.canvasIds?.[0]\r\n    this.state.lastCanvas = this.state.canvasIds?.pop()\r\n  }\r\n\r\n  handleChange = (selectedOption) => {\r\n    this.setState({ selectedOption }, () =>\r\n      this.props.setCanvas(selectedOption.value)\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.currentCanvas.id !== prevProps.currentCanvas?.id) {\r\n      let index = 0\r\n      for(let canvas of this.props.canvases) {\r\n        if (canvas['id'] === this.props.currentCanvas.id) break\r\n        index++\r\n      }\r\n      this.state.selectedOption = {\r\n        value: this.props.currentCanvas.id,\r\n        label: `Image ${index+1}`\r\n      }\r\n      this.forceUpdate()\r\n    }\r\n    if (this.props.canvases && !isEqual(this.props.canvases, prevProps.canvases)) {\r\n      this.state.selectOptions = this.props.canvases.map((canvas, index) => {\r\n        return {\r\n          value: canvas.id,\r\n          label: `Image ${index+1}`\r\n        }\r\n      })\r\n      this.state.selectedOption = this.state.selectOptions[0]\r\n      this.state.canvasIds = this.props.canvases.map((canvas) => canvas.id)\r\n      this.state.firstCanvas = this.state.canvasIds[0]\r\n      this.state.lastCanvas = this.state.canvasIds.pop()\r\n      this.forceUpdate()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { windowId, hasNextCanvas, hasPreviousCanvas, viewingDirection, setNextCanvas, setPreviousCanvas, setCanvas } = this.props\r\n    const { firstCanvas, lastCanvas, selectOptions, selectedOption } = this.state\r\n    return (\r\n      <div  style={{zIndex: 1000000, position: \"absolute\", top: \"0.6rem\", left: \"1rem\", display: \"flex\", alignItems: \"flex-start\"}}> \r\n        <Select\r\n          value={selectedOption}\r\n          onChange={this.handleChange}\r\n          options={selectOptions}\r\n        />\r\n        <ViewerNavigation \r\n          windowId={windowId}\r\n          hasNextCanvas={hasNextCanvas}\r\n          hasPreviousCanvas={hasPreviousCanvas}\r\n          viewingDirection={viewingDirection}\r\n          setNextCanvas={setNextCanvas}\r\n          setPreviousCanvas={setPreviousCanvas}\r\n          setCanvas={setCanvas}\r\n          lastCanvas={lastCanvas}\r\n          firstCanvas={firstCanvas}\r\n         />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n/** */\r\nconst mapStateToProps = (state, { windowId }) => ({\r\n  hasNextCanvas: !!getNextCanvasGrouping(state, { windowId }),\r\n  hasPreviousCanvas: !!getPreviousCanvasGrouping(state, { windowId }),\r\n  viewingDirection: getSequenceViewingDirection(state, { windowId }),\r\n  currentCanvas: getCurrentCanvas(state, { windowId }),\r\n  canvases: getCanvases(state, { windowId })\r\n});\r\n\r\n/**\r\n * mapDispatchToProps - used to hook up connect to action creators\r\n * @memberof ManifestForm\r\n * @private\r\n */\r\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\r\n  setNextCanvas: (...args) => dispatch(actions.setNextCanvas(windowId)),\r\n  setPreviousCanvas: (...args) => dispatch(actions.setPreviousCanvas(windowId)),\r\n  setCanvas: (canvasId) => {\r\n    return dispatch(actions.setCanvas(windowId, canvasId))\r\n  },\r\n});\r\n\r\nexport default {\r\n  component: NavControlsPlugin,\r\n  mode: 'add',\r\n  name: 'NavControlsPlugin',\r\n  target: 'WindowTopBarPluginArea',\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n};\r\n","import React, { Component } from 'react'\r\nimport * as actions from 'mirador/dist/es/src/state/actions'\r\nimport {\r\n  getCanvases\r\n} from 'mirador/dist/es/src/state/selectors'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardMedia from '@material-ui/core/CardMedia'\r\nimport Button from '@material-ui/core/Button'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\nimport Pagination from '@material-ui/lab/Pagination'\r\n\r\nexport class LegacySearchPlugin extends Component {\r\n\r\n  state = {\r\n    query: '',\r\n    results: [],\r\n    currentResultIndex: 0,\r\n    currentCanvasIndex: 0,\r\n    resultsListOpen: false,\r\n    resultsMenuOpen: false,\r\n    itemOffset: 0,\r\n    endOffset: 0,\r\n    currentItems: [],\r\n    pageCount: 0,\r\n    page: 1,\r\n    itemsPerPage: 20\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const queryString = window.location.search\r\n    const urlParams = new URLSearchParams(queryString)\r\n    const query = urlParams.get('q') \r\n    this.state.query = query ? query : \"\"\r\n  }\r\n\r\n  handleClear = () => {\r\n    document.getElementById(\"pvSearch\").value = \"\"\r\n    this.state.query = \"\"\r\n    this.state.results = []\r\n    this.state.currentResultIndex = 0\r\n    this.state.resultsListOpen = false\r\n    this.state.resultsMenuOpen = false\r\n    this.state.endOffset = 0\r\n    this.state.currentItems = 0\r\n    this.state.pageCount = 0\r\n    this.forceUpdate()\r\n  }\r\n\r\n  handleSearch = () => {\r\n    if(this.state.query.length) {\r\n      let currURL = window.location.href\r\n      let urlArr=currURL.split('/')\r\n      let parameters=urlArr[urlArr.length-1].split('?')\r\n      let id = parameters[0]\r\n      fetch('/legacy/'+id+'?'+ new URLSearchParams({\r\n          q: this.state.query\r\n      })).then(response => {\r\n        response.json().then(content => {\r\n          this.state.results = content\r\n          this.state.resultsListOpen = true\r\n          this.state.page = 0\r\n          this.state.itemOffset = 0\r\n          this.state.endOffset = 1 * this.state.itemsPerPage \r\n          this.state.currentItems = this.state.results.slice(this.state.itemOffset, this.state.endOffset)\r\n          this.state.pageCount = Math.ceil(this.state.results.length / this.state.itemsPerPage)\r\n          console.log(\"???\", this.state.currentItems, this.state.pageCount, this.state.endOffset, this.state.itemsPerPage)\r\n          this.forceUpdate()\r\n        })\r\n      })\r\n    } else this.handleClear()\r\n  }\r\n\r\n  handleChangePage = (event, newPage) => {\r\n    this.state.page = newPage\r\n    this.state.itemOffset = (this.state.page - 1) * this.state.itemsPerPage \r\n    this.state.endOffset = (this.state.page ) * this.state.itemsPerPage \r\n    this.state.currentItems = this.state.results.slice(this.state.itemOffset, this.state.endOffset)\r\n    console.log(\"???\", this.state)\r\n    this.forceUpdate()\r\n  };\r\n  \r\n  render() {\r\n    const { windowId, canvases, setCanvas, manifestId } = this.props\r\n    return (\r\n      <div className={this.state.resultsListOpen ? \"fullscreen\" : \"\"} style={{zIndex: 10000000, position: \"absolute\", top: \"-3.5rem\", left: \"0\", padding:\"1rem 1rem 0 1rem\", right:\"0\", background: \"#ffffff\", borderBottom: \"none\"}}> \r\n        <div id=\"pvToolbarTop\" aria-label=\"Viewer controls\">\r\n            <input \r\n            id=\"pvSearch\" \r\n            class=\"DocSearch-Input search-q q form-control\"\r\n            aria-autocomplete=\"both\" \r\n            aria-labelledby=\"docsearch-label\" \r\n            autocomplete=\"off\" \r\n            autocorrect=\"off\" \r\n            autocapitalize=\"off\" \r\n            enterkeyhint=\"search\" \r\n            spellcheck=\"false\" \r\n            placeholder=\"Search within images...\"\r\n            type=\"search\"\r\n            name=\"q\"\r\n            defaultValue={this.state.query}\r\n            onChange={(e) => { \r\n              console.log(e)\r\n              this.state.query = e.target.value\r\n            }}/>\r\n            <button \r\n              onClick={this.handleSearch}\r\n              type=\"submit\" \r\n              id=\"item-search-submit\" \r\n              class=\"btn btn-primary\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" aria-hidden=\"true\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n                    <path fill=\"none\" d=\"M0 0h24v24H0V0z\"></path><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path>\r\n                </svg>\r\n            </button>\r\n            { \r\n              this.state.resultsListOpen || this.state.resultsMenuOpen ? (\r\n              <Button \r\n                onClick={this.handleClear}\r\n                className=\"btn-ghost\"\r\n                id=\"item-search-clear\">\r\n                  <ClearIcon />\r\n              </Button> ) : (\"\")\r\n            }\r\n        </div>\r\n        <div class=\"container-fluid container-flex card-section\">\r\n          { this.state.resultsListOpen ? this.state.currentItems.length ? this.state.currentItems.map((result, index) => (\r\n            <Card className='mui-card clickable' onClick={() => {\r\n              this.state.currentCanvasIndex = result - 1\r\n              this.state.currentResultIndex = this.state.itemOffset + index \r\n              this.state.resultsListOpen = false\r\n              this.state.resultsMenuOpen = true\r\n              console.log(this.state.currentCanvasIndex, this.state.currentResultIndex)\r\n              setCanvas(canvases[this.state.currentCanvasIndex].id)\r\n              this.forceUpdate()\r\n            }}>\r\n              <CardHeader\r\n                title={\"Image \" + result}\r\n              />\r\n              <CardMedia\r\n                image={canvases[result-1].__jsonld.items[0].items[0].body.id}\r\n                height=\"300px\"\r\n                title={\"Image \" + result}\r\n              />\r\n            </Card>\r\n          )) : (<p><br/>No results</p>) : this.state.resultsMenuOpen ?\r\n            <div className=\"legacy-search-menu\">\r\n              <div style={{display : \"flex\", justifyContent: \"flex-start\", alignItems: \"center\"}}>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n                  this.state.resultsListOpen = true\r\n                  this.state.resultsMenuOpen = false \r\n                  this.state.page = 1\r\n                  this.state.itemOffset = 0\r\n                  this.state.endOffset = 1 * this.state.itemsPerPage \r\n                  this.state.currentItems = this.state.results.slice(this.state.itemOffset, this.state.endOffset)\r\n                  this.forceUpdate()\r\n                }}\r\n                  className=\"btn-ghost btn-icon\"\r\n                  style={{marginLeft: \"1rem\"}}>\r\n                  <ArrowBackIcon />\r\n                  All results\r\n                </Button>\r\n              </div>\r\n              <div style={{display : \"flex\", justifyContent: \"center\", alignItems: \"center\", color: \"#666\"}} className=\"MuiTypography-caption\">\r\n                <span style={{paddingRight : \"0.6rem\", borderRight: \"none\"}}>\r\n                  Image {this.state.currentCanvasIndex + 1}\r\n                </span>\r\n                <span style={{marginLeft: \"0.5rem\"}}>\r\n                  (Result {this.state.currentResultIndex + 1} of {this.state.results.length})\r\n                </span>\r\n              </div>\r\n              <div style={{display : \"flex\", justifyContent: \"flex-end\", alignItems: \"center\"}}>\r\n                <Button disabled={this.state.currentResultIndex === 0} variant=\"contained\" className=\"btn-ghost\" onClick={() => {\r\n                  if(this.state.currentResultIndex > 0) {\r\n                    this.state.currentResultIndex -= 1\r\n                    this.state.currentCanvasIndex = this.state.results[this.state.currentResultIndex]-1\r\n                    setCanvas(canvases[this.state.currentCanvasIndex].id)\r\n                    console.log(canvases[this.state.currentCanvasIndex])\r\n                    this.forceUpdate()\r\n                  }\r\n                }}>\r\n                  previous result\r\n                </Button>\r\n                <Button disabled={this.state.currentResultIndex === this.state.results.length-1} variant=\"contained\" className=\"btn-ghost\" onClick={() => {\r\n                  if(this.state.currentResultIndex < this.state.results.length-1) {\r\n                    this.state.currentResultIndex += 1\r\n                    this.state.currentCanvasIndex = this.state.results[this.state.currentResultIndex]-1\r\n                    setCanvas(canvases[this.state.currentCanvasIndex].id)\r\n                    console.log(canvases[this.state.currentCanvasIndex])\r\n                    this.forceUpdate()\r\n                  }\r\n                }}>\r\n                  next result\r\n                </Button>\r\n              </div>\r\n            </div> \r\n            : \"\"\r\n          }\r\n        </div>\r\n\r\n        { this.state.resultsListOpen && this.state.currentItems.length ? (\r\n          <div class=\"card-pagination-wrapper\">\r\n            <Pagination count={this.state.pageCount} page={this.state.page} onChange={this.handleChangePage} />\r\n          </div>\r\n         ) : \"\" }\r\n        \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, { windowId }) => ({\r\n  canvases: getCanvases(state, { windowId })\r\n});\r\n\r\n/**\r\n * mapDispatchToProps - used to hook up connect to action creators\r\n * @memberof ManifestForm\r\n * @private\r\n */\r\nconst mapDispatchToProps = (dispatch, { windowId }) => ({\r\n  setCanvas: (canvasId) => {\r\n    return dispatch(actions.setCanvas(windowId, canvasId))\r\n  },\r\n});\r\n\r\nexport default {\r\n  component: LegacySearchPlugin,\r\n  mode: 'add',\r\n  name: 'LegacySearchPlugin',\r\n  target: 'WindowTopBarPluginArea',\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n};\r\n","import Mirador from 'mirador/dist/es/src/index.js'\r\nimport miradorImageToolsPlugin from '../plugins/mirador-image-tools/miradorImageToolsPlugin.js'\r\n//import miradorShareDialogPlugin from 'mirador-share-plugin/es/MiradorShareDialog.js'\r\n//import fullResDownloadPlugin from '../plugins/fullResDownloadPlugin.js'\r\n//import pdfDownloadPlugin from '../plugins/pdfDownloadPlugin.js'\r\n//import fullPdfDownloadPlugin from '../plugins/fullPdfDownloadPlugin.js'\r\n//import miradorDownloadPlugin from '../plugins/mirador-downloads/miradorDownloadPlugin.js'\r\n//import miradorDownloadDialogPlugin from '../plugins/mirador-downloads/MiradorDownloadDialog.js'\r\nimport downloadMenuPlugin from '../plugins/downloadMenuPlugin.jsx'\r\n//import miradorPDIIIFDialogPlugin from '../plugins/miradorPDIIIFDialog.js'\r\nimport pageNumPlugin from '../plugins/pageNumPlugin.jsx'\r\nimport miradorViewPlugin from '../plugins/miradorViewPlugin.jsx'\r\nimport navControlsPlugin from '../plugins/navControls.jsx'\r\nimport legacySearchPlugin from '../plugins/legacySearchPlugin.jsx'\r\n//import textOverlayPlugin from 'mirador-textoverlay/es';\r\n\r\nexport default {\r\n  init: function() {\r\n        console.log(Mirador)\r\n        //let searchInput = document.getElementById(\"pvSearch\")\r\n        //let resetButton = document.getElementById(\"pvSearchReset\")\r\n\r\n        //console.log(\"rb\", resetButton)\r\n        let pageViewer = document.getElementById(\"page-viewer\")\r\n        if(!pageViewer) return\r\n    \r\n        const documentId = pageViewer.getAttribute(\"data-docid\")\r\n        let canvasIndex = 0\r\n        const params = new URLSearchParams(window.location.search)\r\n        if(params.has(\"pageNum\")) canvasIndex = parseInt(params.get(\"pageNum\")-1)\r\n    \r\n        let apiPrefix =  \"https://parl.canadiana.ca/iiif/\"\r\n        let manifest = apiPrefix+documentId+\"/manifest\"\r\n        \r\n        let mplugins = [\r\n          //miradorZoomBugPlugin,\r\n          miradorViewPlugin,\r\n          downloadMenuPlugin,\r\n          /*{\r\n            ...fullResDownloadPlugin,\r\n            target: 'WindowTopBarShareMenu',\r\n          },*/\r\n          /*{\r\n            ...miradorDownloadPlugin,\r\n            target: 'WindowTopBarShareMenu',\r\n          },*/\r\n          /*{\r\n            ...pdfDownloadPlugin,\r\n            target: 'WindowTopBarShareMenu',\r\n          },*/\r\n          /*{\r\n            ...fullPdfDownloadPlugin,\r\n            target: 'WindowTopBarShareMenu',\r\n          },*/\r\n          //miradorPDIIIFDialogPlugin,\r\n          //miradorShareDialogPlugin,\r\n          //miradorDownloadDialogPlugin,\r\n          ...miradorImageToolsPlugin,\r\n          pageNumPlugin,\r\n          legacySearchPlugin,\r\n          navControlsPlugin\r\n          //textOverlayPlugin\r\n        ]\r\n    \r\n        //https://github.com/ProjectMirador/mirador/blob/master/src/config/settings.js\r\n        let mconfig = {\r\n    \r\n          id: 'page-viewer', // id selector where Mirador should be instantiated\r\n    \r\n          canvasNavigation: {\r\n    \r\n            // Set the height and width of canvas thumbnails in the  CanvasNavigation companion window\r\n    \r\n            height: 50,\r\n    \r\n            width: 50\r\n    \r\n          },\r\n    \r\n          selectedTheme: \"light\", // dark also available\r\n    \r\n          themes: {\r\n    \r\n            dark: {\r\n    \r\n              palette: {\r\n    \r\n                type: \"dark\",\r\n    \r\n                primary: {\r\n    \r\n                  main: \"#4db6ac\"\r\n    \r\n                },\r\n    \r\n                secondary: {\r\n    \r\n                  main: \"#4db6ac\"\r\n    \r\n                },\r\n    \r\n                shades: {\r\n    \r\n                  dark: \"#000000\",\r\n    \r\n                  main: \"#424242\",\r\n    \r\n                  light: \"#616161\"\r\n    \r\n                }\r\n    \r\n              }\r\n    \r\n            },\r\n    \r\n            light: {\r\n    \r\n              palette: {\r\n    \r\n                type: \"light\"\r\n    \r\n              }\r\n    \r\n            }\r\n    \r\n          },\r\n    \r\n          theme: {\r\n    \r\n            // Sets up a MaterialUI theme. See https://material-ui.com/customization/default-theme/\r\n    \r\n            palette: {\r\n    \r\n              type: \"light\",\r\n    \r\n              primary: {\r\n    \r\n                main: \"#3a78ae\" // Controls the color of the Add button and current window indicator\r\n    \r\n              },\r\n    \r\n              secondary: {\r\n    \r\n                main: \"#3a78ae\" // Controls the color of Selects and FormControls\r\n    \r\n              },\r\n    \r\n              shades: {\r\n    \r\n                // Shades that can be used to offset color areas of the Workspace / Window\r\n    \r\n                dark: \"#eeeeee\",\r\n    \r\n                main: \"#ffffff\",\r\n    \r\n                light: \"#f5f5f5\"\r\n    \r\n              },\r\n    \r\n              error: {\r\n    \r\n                main: \"#b00020\"\r\n    \r\n              },\r\n    \r\n              notification: {\r\n    \r\n                // Color used in MUI Badge dots\r\n    \r\n                main: \"#ffa224\"\r\n    \r\n              },\r\n    \r\n              hitCounter: {\r\n    \r\n                default: \"#bdbdbd\"\r\n    \r\n              },\r\n    \r\n              highlights: {\r\n    \r\n                primary: \"#ffff00\",\r\n    \r\n                secondary: \"#00BFFF\"\r\n    \r\n              },\r\n    \r\n              section_divider: \"rgba(0, 0, 0, 0.25)\",\r\n    \r\n              annotations: {\r\n    \r\n                hidden: { globalAlpha: 0 },\r\n    \r\n                default: { strokeStyle: \"#00BFFF\", globalAlpha: 1 },\r\n    \r\n                hovered: { strokeStyle: \"#BF00FF\", globalAlpha: 1 },\r\n    \r\n                selected: { strokeStyle: \"#ffff00\", globalAlpha: 1 }\r\n    \r\n              },\r\n    \r\n              search: {\r\n    \r\n                default: { fillStyle: \"#00BFFF\", globalAlpha: 0.3 },\r\n    \r\n                hovered: { fillStyle: \"#00FFFF\", globalAlpha: 0.3 },\r\n    \r\n                selected: { fillStyle: \"#ffff00\", globalAlpha: 0.3 }\r\n    \r\n              }\r\n    \r\n            },\r\n    \r\n            typography: {\r\n    \r\n              body1: {\r\n    \r\n                fontSize: \"1rem\",\r\n    \r\n                letterSpacing: \"0em\",\r\n    \r\n                lineHeight: \"1.6em\"\r\n    \r\n              },\r\n    \r\n              body2: {\r\n    \r\n                fontSize: \"0.878rem\",\r\n    \r\n                letterSpacing: \"0.015em\",\r\n    \r\n                lineHeight: \"1.6em\"\r\n    \r\n              },\r\n    \r\n              button: {\r\n    \r\n                fontSize: \"0.878rem\",\r\n    \r\n                letterSpacing: \"0.09em\",\r\n    \r\n                lineHeight: \"2.25rem\",\r\n    \r\n                textTransform: \"uppercase\"\r\n    \r\n              },\r\n    \r\n              caption: {\r\n    \r\n                fontSize: \"0.772rem\",\r\n    \r\n                letterSpacing: \"0.033em\",\r\n    \r\n                lineHeight: \"1.6rem\"\r\n    \r\n              },\r\n    \r\n              body1Next: {\r\n    \r\n                fontSize: \"1rem\",\r\n    \r\n                letterSpacing: \"0em\",\r\n    \r\n                lineHeight: \"1.6em\"\r\n    \r\n              },\r\n    \r\n              body2Next: {\r\n    \r\n                fontSize: \"0.878rem\",\r\n    \r\n                letterSpacing: \"0.015em\",\r\n    \r\n                lineHeight: \"1.6em\"\r\n    \r\n              },\r\n    \r\n              buttonNext: {\r\n    \r\n                fontSize: \"0.878rem\",\r\n    \r\n                letterSpacing: \"0.09em\",\r\n    \r\n                lineHeight: \"2.25rem\"\r\n    \r\n              },\r\n    \r\n              captionNext: {\r\n    \r\n                fontSize: \"0.772rem\",\r\n    \r\n                letterSpacing: \"0.33em\",\r\n    \r\n                lineHeight: \"1.6rem\"\r\n    \r\n              },\r\n    \r\n              overline: {\r\n    \r\n                fontSize: \"0.678rem\",\r\n    \r\n                fontWeight: 500,\r\n    \r\n                letterSpacing: \"0.166em\",\r\n    \r\n                lineHeight: \"2em\",\r\n    \r\n                textTransform: \"uppercase\"\r\n    \r\n              },\r\n    \r\n              h1: {\r\n    \r\n                fontSize: \"2.822rem\",\r\n    \r\n                letterSpacing: \"-0.015em\",\r\n    \r\n                lineHeight: \"1.2em\"\r\n    \r\n              },\r\n    \r\n              h2: {\r\n    \r\n                fontSize: \"1.575rem\",\r\n    \r\n                letterSpacing: \"0em\",\r\n    \r\n                lineHeight: \"1.33em\"\r\n    \r\n              },\r\n    \r\n              h3: {\r\n    \r\n                fontSize: \"1.383rem\",\r\n    \r\n                fontWeight: 300,\r\n    \r\n                letterSpacing: \"0em\",\r\n    \r\n                lineHeight: \"1.33em\"\r\n    \r\n              },\r\n    \r\n              h4: {\r\n    \r\n                fontSize: \"1rem\",\r\n    \r\n                letterSpacing: \"0.007em\",\r\n    \r\n                lineHeight: \"1.45em\"\r\n    \r\n              },\r\n    \r\n              h5: {\r\n    \r\n                fontSize: \"1rem\",\r\n    \r\n                letterSpacing: \"0.005em\",\r\n    \r\n                lineHeight: \"1.55em\"\r\n    \r\n              },\r\n    \r\n              h6: {\r\n    \r\n                fontSize: \"1rem\",\r\n    \r\n                fontWeight: 400,\r\n    \r\n                letterSpacing: \"0.01em\",\r\n    \r\n                lineHeight: \"1.6em\"\r\n    \r\n              },\r\n    \r\n              subtitle1: {\r\n    \r\n                fontSize: \"0.937rem\",\r\n    \r\n                letterSpacing: \"0.015em\",\r\n    \r\n                lineHeight: \"1.6em\",\r\n    \r\n                fontWeight: 300\r\n    \r\n              },\r\n    \r\n              subtitle2: {\r\n    \r\n                fontSize: \"0.878rem\",\r\n    \r\n                fontWeight: 500,\r\n    \r\n                letterSpacing: \"0.02em\",\r\n    \r\n                lineHeight: \"1.75em\"\r\n    \r\n              },\r\n    \r\n              useNextVariants: true // set so that console deprecation warning is removed\r\n    \r\n            },\r\n    \r\n            overrides: {\r\n    \r\n              MuiListSubheader: {\r\n    \r\n                root: {\r\n    \r\n                  '&[role=\"presentation\"]:focus': {\r\n    \r\n                    outline: 0\r\n    \r\n                  }\r\n    \r\n                }\r\n    \r\n              },\r\n    \r\n              MuiTooltip: {\r\n    \r\n                // Overridden from https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/Tooltip/Tooltip.js#L40-L70\r\n    \r\n                tooltipPlacementLeft: {\r\n    \r\n                  [\"@media (min-width:600px)\"]: {\r\n    \r\n                    margin: 0\r\n    \r\n                  }\r\n    \r\n                },\r\n    \r\n                tooltipPlacementRight: {\r\n    \r\n                  [\"@media (min-width:600px)\"]: {\r\n    \r\n                    margin: 0\r\n    \r\n                  }\r\n    \r\n                },\r\n    \r\n                tooltipPlacementTop: {\r\n    \r\n                  [\"@media (min-width:600px)\"]: {\r\n    \r\n                    margin: 0\r\n    \r\n                  }\r\n    \r\n                },\r\n    \r\n                tooltipPlacementBottom: {\r\n    \r\n                  [\"@media (min-width:600px)\"]: {\r\n    \r\n                    margin: 0\r\n    \r\n                  }\r\n    \r\n                }\r\n    \r\n              },\r\n    \r\n              MuiTouchRipple: {\r\n    \r\n                childPulsate: {\r\n    \r\n                  animation: \"none\"\r\n    \r\n                },\r\n    \r\n                rippleVisible: {\r\n    \r\n                  animation: \"none\"\r\n    \r\n                }\r\n    \r\n              }\r\n    \r\n            },\r\n    \r\n            props: {\r\n    \r\n              MuiButtonBase: {\r\n    \r\n                disableTouchRipple: true\r\n    \r\n              },\r\n    \r\n              MuiLink: {\r\n    \r\n                underline: \"always\"\r\n    \r\n              }\r\n    \r\n            }\r\n    \r\n          },\r\n    \r\n          language: \"en\", // The default language set in the application\r\n    \r\n          availableLanguages: {\r\n    \r\n            // All the languages available in the language switcher\r\n    \r\n            ar: \"\",\r\n    \r\n            de: \"Deutsch\",\r\n    \r\n            en: \"English\",\r\n    \r\n            fa: \"\",\r\n    \r\n            fr: \"Franais\",\r\n    \r\n            ja: \"\",\r\n    \r\n            kr: \"\",\r\n    \r\n            lt: \"Lietuvi\",\r\n    \r\n            nl: \"Nederlands\",\r\n    \r\n            \"nb-NO\": \"Norwegian Bokml\",\r\n    \r\n            pl: \"Polski\",\r\n    \r\n            \"pt-BR\": \"Portugus do Brasil\",\r\n    \r\n            vi: \"Ting Vit\",\r\n    \r\n            \"zh-CN\": \"()\",\r\n    \r\n            \"zh-TW\": \"()\",\r\n    \r\n            it: \"Italiano\",\r\n    \r\n            sr: \"\",\r\n    \r\n            sv: \"Svenska\",\r\n    \r\n            bg: \"\"\r\n    \r\n          },\r\n    \r\n          annotations: {\r\n    \r\n            htmlSanitizationRuleSet: \"iiif\", // See src/lib/htmlRules.js for acceptable values\r\n    \r\n            filteredMotivations: [\r\n    \r\n              \"oa:commenting\",\r\n    \r\n              \"oa:tagging\",\r\n    \r\n              \"sc:painting\",\r\n    \r\n              \"commenting\",\r\n    \r\n              \"tagging\"\r\n    \r\n            ]\r\n    \r\n          },\r\n    \r\n          createGenerateClassNameOptions: {\r\n    \r\n            // Options passed directly to createGenerateClassName in Material-UI https://material-ui.com/styles/api/#creategenerateclassname-options-class-name-generator\r\n    \r\n            productionPrefix: \"mirador\"\r\n    \r\n          },\r\n    \r\n          requests: {\r\n    \r\n            preprocessors: [\r\n    \r\n              // Functions that receive HTTP requests and manipulate them (e.g. to add headers)\r\n    \r\n              // (url, options) => (url.match('info.json') && { ...options, myCustomThing: 'blah' })\r\n    \r\n            ],\r\n    \r\n            postprocessors: [\r\n    \r\n              // Functions that receive HTTP responses and manipulates them before adding to store\r\n    \r\n              // An example of manipulating the response for an annotation request\r\n    \r\n              // (url, action) => {\r\n    \r\n              //   if (action.annotationId) {\r\n    \r\n              //     action.annotationJson = {}\r\n    \r\n              //   }\r\n    \r\n              // }\r\n    \r\n            ]\r\n    \r\n          },\r\n    \r\n          translations: {\r\n    \r\n            // Translations can be added to inject new languages or override existing labels\r\n            en: { \r\n              \"currentItem\": \"Current image\",\r\n              \"currentItem_1/1\": \"Current image\",\r\n              \"resource\": \"Item Title\",\r\n            }\r\n    \r\n          },\r\n    \r\n    \r\n          view: \"catalogueView\",\r\n    \r\n          window: {\r\n\r\n            imageToolsOpen: false,\r\n    \r\n            //global window defaults\r\n    \r\n            allowClose: false, // Configure if windows can be closed or not\r\n    \r\n            allowFullscreen: false, // Configure to show a \"fullscreen\" button in the WindowTopBar\r\n    \r\n            allowMaximize: false, // Configure if windows can be maximized or not\r\n    \r\n            allowTopMenuButton: false, // Configure if window view and thumbnail display menu are visible or not\r\n    \r\n            allowWindowSideBar: false, // Configure if side bar menu is visible or not\r\n    \r\n            authNewWindowCenter: \"parent\", // Configure how to center a new window created by the authentication flow. Options: parent, screen\r\n    \r\n            sideBarPanel: \"info\", // Configure which sidebar is selected by default. Options: info, attribution, canvas, annotations, search\r\n    \r\n            defaultSidebarPanelHeight: 201, // Configure default sidebar height in pixels\r\n    \r\n            defaultSidebarPanelWidth: 235, // Configure default sidebar width in pixels\r\n    \r\n            defaultView: \"single\", // Configure which viewing mode (e.g. single, book, gallery) for windows to be opened in\r\n    \r\n            forceDrawAnnotations: false,\r\n    \r\n            hideWindowTitle: false, // Configure if the window title is shown in the window title bar or not\r\n    \r\n            highlightAllAnnotations: false, // Configure whether to display annotations on the canvas by default\r\n    \r\n            showLocalePicker: false, // Configure locale picker for multi-lingual metadata\r\n    \r\n            sideBarOpen:  false, // Configure if the sidebar (and its content panel) is open by default\r\n    \r\n            switchCanvasOnSearch: true, // Configure if Mirador should automatically switch to the canvas of the first search result\r\n    \r\n            panels: {\r\n    \r\n              // Configure which panels are visible in WindowSideBarButtons\r\n    \r\n              info: false,\r\n    \r\n              attribution: false,\r\n    \r\n              canvas: false,\r\n    \r\n              annotations: false,\r\n    \r\n              search: false,\r\n    \r\n              layers: false\r\n    \r\n            },\r\n    \r\n            views: [\r\n    \r\n              { key: \"single\", behaviors: [\"individuals\"] },\r\n    \r\n              { key: \"book\", behaviors: [\"paged\"] },\r\n    \r\n              { key: \"scroll\", behaviors: [\"continuous\"] },\r\n    \r\n              { key: \"gallery\" }\r\n    \r\n            ],\r\n    \r\n            elastic: {\r\n    \r\n              height: 400,\r\n    \r\n              width: 480\r\n    \r\n            }\r\n    \r\n          },\r\n          \r\n          windows: [{\r\n            manifestId: manifest,\r\n            //view: 'single',\r\n            canvasIndex,\r\n          }],\r\n    \r\n          thumbnails: {\r\n    \r\n            preferredFormats: [\"jpg\", \"png\", \"webp\", \"tif\"]\r\n    \r\n          },\r\n    \r\n          thumbnailNavigation: {\r\n    \r\n            defaultPosition: \"off\", // Which position for the thumbnail navigation to be be displayed. Other possible values are \"far-bottom\" or \"far-right\"\r\n    \r\n            displaySettings: false, // Display the settings for this in WindowTopMenu\r\n    \r\n            height: 130, // height of entire ThumbnailNavigation area when position is \"far-bottom\"\r\n    \r\n            width: 100 // width of one canvas (doubled for book view) in ThumbnailNavigation area when position is \"far-right\"\r\n    \r\n          },\r\n    \r\n          \r\n          workspace: {\r\n    \r\n            draggingEnabled: false,\r\n    \r\n            allowNewWindows: true,\r\n    \r\n            isWorkspaceAddVisible: false, // Catalog/Workspace add window feature visible by default\r\n    \r\n            exposeModeOn: false, // unused?\r\n    \r\n            height: 5000, // height of the elastic mode's virtual canvas\r\n    \r\n            showZoomControls: false, // Configure if zoom controls should be displayed by default\r\n    \r\n            type: \"mosaic\", // Which workspace type to load by default. Other possible values are \"elastic\". If \"mosaic\" or \"elastic\" are not selected no worksapce type will be used.\r\n    \r\n            viewportPosition: {\r\n    \r\n              // center coordinates for the elastic mode workspace\r\n    \r\n              x: 0,\r\n    \r\n              y: 0\r\n    \r\n            },\r\n    \r\n            width: 5000 // width of the elastic mode's virtual canvas\r\n    \r\n          },\r\n    \r\n          workspaceControlPanel: {\r\n    \r\n            enabled: false // Configure if the control panel should be rendered.  Useful if you want to lock the viewer down to only the configured manifests\r\n    \r\n          },\r\n    \r\n          galleryView: {\r\n    \r\n            height: 120, // height of gallery view thumbnails\r\n    \r\n            width: null // width of gallery view thumbnails (or null, to auto-calculate an aspect-ratio appropriate size)\r\n    \r\n          },\r\n    \r\n          osdConfig: {\r\n    \r\n            // Default config used for OpenSeadragon https://openseadragon.github.io/docs/OpenSeadragon.html#.Options\r\n    \r\n            alwaysBlend: false,\r\n    \r\n            blendTime: 0.1,\r\n    \r\n            preserveImageSizeOnResize: true,\r\n    \r\n            preserveViewport: true,\r\n    \r\n            zoomPerScroll: 1.2,\r\n    \r\n            gestureSettingsMouse: {\r\n              scrollToZoom: true,\r\n              clickToZoom: true,\r\n              dblClickToZoom: true\r\n            },\r\n    \r\n            gestureSettingsTouch: {\r\n              scrollToZoom: false,\r\n              dragToPan: false\r\n            },\r\n\r\n            minScrollDeltaTime: 0,\r\n            clickTimeThreshold: 0,\r\n            zoomPerSecond: 1.2,\r\n            showNavigator: true,\r\n            autoHideControls: false,\r\n            showNavigationControl: true,\r\n            navigatorPosition: \"BOTTOM_RIGHT\",\r\n            showFullPageControl: true\r\n          },\r\n    \r\n          export: {\r\n    \r\n            catalog: true,\r\n    \r\n            companionWindows: true,\r\n    \r\n            config: true,\r\n    \r\n            elasticLayout: true,\r\n    \r\n            layers: true,\r\n    \r\n            // filter out anything re-retrievable:\r\n    \r\n            manifests: { filter: ([id, value]) => !id.startsWith(\"http\") },\r\n    \r\n            viewers: true,\r\n    \r\n            windows: true,\r\n    \r\n            workspace: true\r\n    \r\n          },\r\n    \r\n          audioOptions: {\r\n    \r\n            // Additional props passed to <audio> element\r\n    \r\n            controls: true,\r\n    \r\n            crossOrigin: \"anonymous\"\r\n    \r\n          },\r\n    \r\n          videoOptions: {\r\n    \r\n            // Additional props passed to <audio> element\r\n    \r\n            controls: true,\r\n    \r\n            crossOrigin: \"anonymous\"\r\n    \r\n          }\r\n    \r\n        }\r\n\r\n        let miradorInstance = Mirador.viewer(mconfig, mplugins)\r\n        console.log(miradorInstance)\r\n\r\n        miradorInstance.store.subscribe(() => {\r\n          /*Enable keyboard nav of canvas controls*/\r\n          let zoomIns = document.querySelectorAll('[title=\"Zoom in\"]')\r\n          //console.log(zoomIns)\r\n          if(zoomIns.length) {\r\n            zoomIns[0].setAttribute(\"tabindex\", \"0\")\r\n          }\r\n          let zoomOuts = document.querySelectorAll('[title=\"Zoom out\"]')\r\n          //console.log(zoomOuts)\r\n          if(zoomOuts.length) {\r\n            zoomOuts[0].setAttribute(\"tabindex\", \"0\")\r\n          }\r\n          let resets = document.querySelectorAll('[title=\"Go home\"]')\r\n          //console.log(resets)\r\n          if(resets.length) {\r\n            resets[0].setAttribute(\"tabindex\", \"0\")\r\n          }\r\n          let fullscreens = document.querySelectorAll('[title=\"Toggle full page\"]')\r\n          //console.log(fullscreens)\r\n          if(fullscreens.length) {\r\n            fullscreens[0].setAttribute(\"tabindex\", \"0\")\r\n          }\r\n        })\r\n     \r\n  }\r\n}\r\n","import M3Viewer from \"../src/modules/m3_viewer.js\";\r\nM3Viewer.init();\r\n"],"names":["ImageTool","_Component","props","_this","_classCallCheck","_callSuper","state","open","handleChange","bind","_assertThisInitialized","handleClick","_inherits","key","value","_this$props","this","variant","setState","e","val","onChange","bubbleBg","_this$props2","children","containerId","label","max","min","type","windowId","foregroundColor","classes","width","toggled","id","concat","fade","React","style","display","MiradorMenuButton","onClick","backgroundColor","className","slider","Slider","orientation","indexOf","Component","defaultProps","compose","withStyles","_ref","palette","breakpoints","shades","main","borderRadius","top","marginTop","position","height","zIndex","marginLeft","padding","down","right","marginBottom","withWidth","ImageRotation","arguments","otherProps","_objectWithoutProperties","_excluded","Object","assign","RotateLeftIcon","RotateRightIcon","ImageFlip","flipped","SwapHorizIcon","color","MiradorImageTools","toggleState","toggleRotate","toggleFlip","handleReset","viewer","applyFilters","prevProps","viewConfig","param","updateViewport","_defineProperty","_this$props3","rotation","flip","brightness","contrast","saturate","grayscale","invert","_this$props4","_this$props4$viewConf","_this$props4$viewConf2","_this$props4$viewConf3","_this$props4$viewConf4","_this$props4$viewConf5","_this$props4$viewConf6","canvas","controlledFilters","newFilters","filter","split","some","includes","push","join","_this$props5","updateWindow","imageToolsOpen","_this$props6","_this$props6$viewConf","_this$props6$viewConf2","_this$props6$viewConf3","_this$props7","_this$props7$viewConf","_this2","_this$props8","enabled","theme","_this$props8$viewConf","_this$props8$viewConf2","_this$props8$viewConf3","_this$props8$viewConf4","_this$props8$viewConf5","_this$props8$viewConf6","_this$props8$viewConf7","t","getContrastText","isSmallDisplay","toggleButton","borderContainer","context","CloseSharpIcon","TuneSharpIcon","toggleButtonLabel","root","BrightnessIcon","ContrastIcon","transform","GradientIcon","TonalityIcon","InvertColorsIcon","ReplaySharpIcon","undefined","border","borderImageRight","borderImageBottom","replace","flexDirection","borderRight","borderImageSlice","borderImageSource","borderBottom","fontSize","MiradorImageToolsMenuItem","handleClose","MenuItem","imageToolsEnabled","ListItemIcon","ListItemText","primaryTypographyProps","de","collapse_open","collapse_close","greyscale","hide","revert","rotateLeft","rotateRight","saturation","show","en","it","fr","ja","sr","target","mapDispatchToProps","actions","mapStateToProps","getContainerId","getWindowConfig","getViewer","mode","component","withTheme","config","translations","_ref2","_regeneratorRuntime","r","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","_defineProperties","descriptor","_toPropertyKey","_getPrototypeOf","self","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","apply","Boolean","valueOf","ReferenceError","_setPrototypeOf","obj","toPrimitive","String","Number","_toPrimitive","asyncGeneratorStep","gen","reject","_next","_throw","info","error","_asyncToGenerator","fn","args","err","checkStreamsaverSupport","Response","WritableStream","isSecureContext","navigator","checkImageApiHasCors","_checkImageApiHasCors","_callee2","_images$0$Id","testImgResp","testImgData","_context2","fetch","images","t0","Uint8Array","arrayBuffer","t1","t2","PDIIIFMenuItem","instance","Constructor","hasChecked","allowPdfDownload","supportsFilesystemAPI","showSaveFilePicker","supportsStreamsaver","imageApiHasCors","protoProps","staticProps","_componentDidMount","subClass","superClass","openDialog","_callee","manifest","canvasGroupings","setAllowPdfDownload","setEstimatedSize","_this$state","estimatedSizeInBytes","_context","json","estimatePdfSize","maxWidth","tabIndex","disabled","openDialogAndCloseMenu","DownloadIcon","renderMenuItemText","CircularProgress","size","progress","openPDIIIFDialog","DownloadWindowTopBarPluginMenu","url","filename","response","blob","window","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","remove","canvasIndex","manifestId","console","log","page","downloadFile","__jsonld","items","parts","pathname","data","_data$canvasDownloadU","alert","_data$docPdfUri","_this3","PluginComponents","windowPluginMenuId","class","tabindex","onKeyDown","downloadSingleImage","downloadSinglePdf","downloadFullPDF","PluginHook","container","menuIcon","MoreVertIcon","ctrlBtnSelected","action","selected","withPlugins","getCanvasIndex","getCurrentCanvas","windows","PageNumPlugin","TargetComponent","targetProps","pageNum","queryParams","URLSearchParams","location","search","queryPageNum","get","parseInt","set","history","pushState","toString","WindowViewSettings","setWindowViewType","windowViewType","viewTypes","iconMap","book","BookViewIcon","gallery","GalleryViewIcon","scroll","ScrollViewIcon","single","SingleIcon","ListSubheader","role","disableSticky","map","Icon","autoFocus","FormControlLabel","selectedLabel","control","labelPlacement","menuItem","secondary","withTranslation","withRef","connect","getAllowedWindowViewTypes","getWindowViewType","forwardRef","ViewPlugin","ViewerNavigation","_createClass","hasNextCanvas","hasPreviousCanvas","setNextCanvas","setPreviousCanvas","viewingDirection","setCanvas","lastCanvas","firstCanvas","htmlDir","previousIconStyle","nextIconStyle","classNames","ns","dir","title","SkipNextIcon","NavigationIcon","NavControlsPlugin","_Component2","_this$props$canvases","_this$state$selectOpt","_this$props$canvases2","_this$state$canvasIds","_this$state$canvasIds2","selectOptions","selectedOption","canvases","index","canvasIds","_prevProps$currentCan","currentCanvas","_step","_iterator","_createForOfIteratorHelper","forceUpdate","isEqual","left","alignItems","Select","options","getNextCanvasGrouping","getPreviousCanvasGrouping","getSequenceViewingDirection","getCanvases","dispatch","canvasId","LegacySearchPlugin","query","results","currentResultIndex","currentCanvasIndex","resultsListOpen","resultsMenuOpen","itemOffset","endOffset","currentItems","pageCount","itemsPerPage","getElementById","urlArr","q","content","Math","ceil","handleClear","event","newPage","queryString","background","autocomplete","autocorrect","autocapitalize","enterkeyhint","spellcheck","placeholder","defaultValue","handleSearch","xmlns","fill","viewBox","Button","ClearIcon","result","Card","CardHeader","CardMedia","image","justifyContent","ArrowBackIcon","paddingRight","Pagination","count","handleChangePage","Mirador","pageViewer","documentId","getAttribute","params","has","mplugins","miradorViewPlugin","downloadMenuPlugin","_toConsumableArray","miradorImageToolsPlugin","pageNumPlugin","legacySearchPlugin","navControlsPlugin","mconfig","canvasNavigation","selectedTheme","themes","dark","primary","light","notification","hitCounter","default","highlights","section_divider","annotations","hidden","globalAlpha","strokeStyle","hovered","fillStyle","typography","body1","letterSpacing","lineHeight","body2","button","textTransform","caption","body1Next","body2Next","buttonNext","captionNext","overline","fontWeight","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","useNextVariants","overrides","MuiListSubheader","outline","MuiTooltip","tooltipPlacementLeft","margin","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","MuiTouchRipple","childPulsate","animation","rippleVisible","MuiButtonBase","disableTouchRipple","MuiLink","underline","language","availableLanguages","ar","fa","kr","lt","nl","pl","vi","sv","bg","htmlSanitizationRuleSet","filteredMotivations","createGenerateClassNameOptions","productionPrefix","requests","preprocessors","postprocessors","view","allowClose","allowFullscreen","allowMaximize","allowTopMenuButton","allowWindowSideBar","authNewWindowCenter","sideBarPanel","defaultSidebarPanelHeight","defaultSidebarPanelWidth","defaultView","forceDrawAnnotations","hideWindowTitle","highlightAllAnnotations","showLocalePicker","sideBarOpen","switchCanvasOnSearch","panels","attribution","layers","views","behaviors","elastic","thumbnails","preferredFormats","thumbnailNavigation","defaultPosition","displaySettings","workspace","draggingEnabled","allowNewWindows","isWorkspaceAddVisible","exposeModeOn","showZoomControls","viewportPosition","x","workspaceControlPanel","galleryView","osdConfig","alwaysBlend","blendTime","preserveImageSizeOnResize","preserveViewport","zoomPerScroll","gestureSettingsMouse","scrollToZoom","clickToZoom","dblClickToZoom","gestureSettingsTouch","dragToPan","minScrollDeltaTime","clickTimeThreshold","zoomPerSecond","showNavigator","autoHideControls","showNavigationControl","navigatorPosition","showFullPageControl","export","catalog","companionWindows","elasticLayout","manifests","_slicedToArray","startsWith","viewers","audioOptions","controls","crossOrigin","videoOptions","miradorInstance","store","subscribe","zoomIns","querySelectorAll","setAttribute","zoomOuts","resets","fullscreens","M3Viewer"],"sourceRoot":""}