{"version":3,"file":"js/facet_modal-cd703bbf0ed09be5f6d0.js","mappings":"qoCAEU,WACF,IAAIA,EAAgBC,SAASC,uBAAuB,wBAEpD,GADAC,QAAQC,IAAIJ,GACRA,EAAJ,CAAyB,IACYK,EADZC,EAAAC,EACDP,GAAa,QAAAQ,EAAA,WAAG,IAAhCC,EAAYJ,EAAAK,MACVC,EAASF,EAAaG,iBAAiB,KACjCC,MAAMC,KAAKH,GACbI,KAAI,SAAAC,GACNA,EAAEC,QAAU,SAACC,GACTA,EAAEC,iBACFC,MAAMJ,EAAEK,MACHC,MAAK,SAACC,GAEH,OAAOA,EAASC,MACpB,IACCF,MAAK,SAACG,GAGH,IACIC,GADM,IAAIC,WAAYC,gBAAgBH,EAAM,aACjCb,iBAAiB,uCAC5BiB,EAAWpB,EAAaP,uBAAuB,uBAAuB,GAC1E2B,EAASC,UAAS,yPAAAC,OAIJL,EAAK,GAAGM,UAAS,0KAK/B,IAAIC,EAAuBJ,EAASK,qBAAqB,UACzD/B,QAAQC,IAAI,MAAO6B,EAAqB,GAAIA,EAAqB,GAAGD,WACpEC,EAAqB,GAAGhB,QAAU,SAACC,GAC/BW,EAASC,UAAY,EACzB,EAKA,IAAIK,EAAaN,EAASK,qBAAqB,KAC/C/B,QAAQC,IAAI,aAAa+B,GAAW,IACLC,EADKC,EAAA9B,EACf4B,GAAU,QAAAG,EAAA,WAAG,IAA1BC,EAASH,EAAA1B,MACb6B,EAAUtB,QAAU,SAACC,GACjBA,EAAEC,iBACFC,MAAMmB,EAAUlB,MACXC,MAAK,SAACC,GAEH,OAAOA,EAASC,MACpB,IACCF,MAAK,SAACG,GACH,IACIe,GADO,IAAIb,WAAYC,gBAAgBH,EAAM,aAChCb,iBAAiB,uCAClCiB,EAASC,UAAS,yTAAAC,OAIJS,EAAM,GAAGR,UAAS,yOAKpC,GACR,CACJ,EAtBA,IAAAK,EAAAI,MAAAL,EAAAC,EAAAK,KAAAC,MAAAL,GAsBC,OAAAM,GAAAP,EAAAnB,EAAA0B,EAAA,SAAAP,EAAAQ,GAAA,CAEL,GACR,CACJ,GACR,EAhEA,IAAAvC,EAAAmC,MAAApC,EAAAC,EAAAoC,KAAAC,MAAAnC,GAgEC,OAAAoC,GAAAtC,EAAAY,EAAA0B,EAAA,SAAAtC,EAAAuC,GAAA,CAjEwB,CAkE7B,ECtEJC,E","sources":["webpack://demo-blacklight/./app/javascript/src/modules/facet_modal.js","webpack://demo-blacklight/./app/javascript/packs/facet_modal.js"],"sourcesContent":["\r\nexport default {\r\n    init: function() {\r\n        let facetTriggers = document.getElementsByClassName(\"facet-modal-override\")\r\n        console.log(facetTriggers)\r\n        if(!facetTriggers) return\r\n        for(let facetTrigger of facetTriggers) {\r\n            const $elems = facetTrigger.querySelectorAll('a')\r\n            var elems = Array.from($elems)\r\n                elems.map(a => {\r\n                    a.onclick = (e) => {\r\n                        e.preventDefault()\r\n                        fetch(a.href)\r\n                            .then((response) => {\r\n                                // When the page is loaded convert it to text\r\n                                return response.text()\r\n                            })\r\n                            .then((html) => {\r\n                                // more_#{@facet_field.key}_html\r\n                                // data-blacklight-modal=\"container\"\r\n                                let doc = new DOMParser().parseFromString(html, \"text/html\")\r\n                                let divs = doc.querySelectorAll('[data-blacklight-modal=\"container\"]')\r\n                                let modalDiv = facetTrigger.getElementsByClassName(\"facet-modal-wrapper\")[0]\r\n                                modalDiv.innerHTML = `\r\n                                <div class=\"modal\" tabindex=\"-1\">\r\n                                    <div class=\"modal-dialog\">\r\n                                        <div class=\"modal-content\">\r\n                                            ${divs[0].getHTML()}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                `\r\n                                let modalDissmissButtons = modalDiv.getElementsByTagName('button')\r\n                                console.log(\"div\", modalDissmissButtons[0], modalDissmissButtons[0].getHTML() )\r\n                                modalDissmissButtons[0].onclick = (e) => {\r\n                                    modalDiv.innerHTML = ''\r\n                                }\r\n\r\n                                /* overwrite these too\r\n                                <a class=\"btn btn-link\" data-blacklight-modal=\"preserve\" rel=\"next\" href=\"/catalog/facet/language_ssim_str?f%5Bauthor_ssm_str%5D%5B%5D=Canada.+Legislature.+Legislative+Assembly.&amp;facet.page=2&amp;q=&amp;search_field=title_ssm\">Next Â»</a>\r\n                                */\r\n                                let modalLinks = modalDiv.getElementsByTagName('a')\r\n                                console.log(\"modalLinks\",modalLinks)\r\n                                for(let modalLink of modalLinks) {\r\n                                    modalLink.onclick = (e) => {\r\n                                        e.preventDefault()\r\n                                        fetch(modalLink.href)\r\n                                            .then((response) => {\r\n                                                // When the page is loaded convert it to text\r\n                                                return response.text()\r\n                                            })\r\n                                            .then((html) => {\r\n                                                let doc2 = new DOMParser().parseFromString(html, \"text/html\")\r\n                                                let divs2 = doc2.querySelectorAll('[data-blacklight-modal=\"container\"]')\r\n                                                modalDiv.innerHTML = `\r\n                                                <div class=\"modal\" tabindex=\"-1\">\r\n                                                    <div class=\"modal-dialog\">\r\n                                                        <div class=\"modal-content\">\r\n                                                            ${divs2[0].getHTML()}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                `\r\n                                            })\r\n                                    }\r\n                                }\r\n\r\n                            })\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}","import FacetModal from \"../src/modules/facet_modal.js\";\r\nFacetModal.init();\r\n"],"names":["facetTriggers","document","getElementsByClassName","console","log","_step","_iterator","_createForOfIteratorHelper","_loop","facetTrigger","value","$elems","querySelectorAll","Array","from","map","a","onclick","e","preventDefault","fetch","href","then","response","text","html","divs","DOMParser","parseFromString","modalDiv","innerHTML","concat","getHTML","modalDissmissButtons","getElementsByTagName","modalLinks","_step2","_iterator2","_loop2","modalLink","divs2","s","n","done","err","f","FacetModal"],"sourceRoot":""}